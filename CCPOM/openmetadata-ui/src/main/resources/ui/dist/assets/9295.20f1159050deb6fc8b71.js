"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[9295],{99295:function(e,t,a){a.r(t),a.d(t,{default:function(){return A}});var l=a(70655),n=a(67294),i=a(68432),r=a(15137),s=a(49101),c=a(49409),d=a(56256),u=a(71577),o=a(19650),m=a(50963),y=a(96486),p=a(16139),v=a(17309),b=a(79690),f=a(95137),E=a(79686),h=a(26387),w=function(e){var t=e.header,a=e.allowAccess,r=void 0===a||a,w=e.isLoading,C=e.slashedBreadcrumb,g=e.onCancel,T=e.onSave,N=(0,i.$)().t,Z=(0,l.CR)((0,m.useForm)(),1)[0],x=(0,f.Eu)().currentUser,L=(c.Z.useWatch("owner",Z),c.Z.useWatch("reviewers",Z),n.createElement("div",{"data-testid":"right-panel"},n.createElement(d.Z.Title,{level:5},N("label.configure-entity",{entity:N("label.client-center")})),n.createElement(d.Z.Text,{className:"mb-5"},N("message.create-new-client-center-guide")))),S=[{name:"name",id:"root/name",label:N("label.name"),required:!0,placeholder:N("label.name"),type:v.U.TEXT,props:{"data-testid":"name"},rules:[{pattern:p.$Q,message:N("message.entity-name-validation")},{min:1,max:128,message:""+N("message.entity-maximum-size",{entity:""+N("label.name"),max:"128"})}]},{name:"displayName",id:"root/displayName",label:N("label.display-name"),required:!1,placeholder:N("label.display-name"),type:v.U.TEXT,props:{"data-testid":"display-name"}},{name:"mutuallyExclusive",label:N("label.mutually-exclusive"),type:v.U.SWITCH,required:!1,props:{"data-testid":"mutually-exclusive-button"},id:"root/mutuallyExclusive",formItemLayout:v.E.HORIZONATAL}];return N("label.owner"),v.U.USER_TEAM_SELECT,n.createElement(u.Z,{"data-testid":"add-owner",icon:n.createElement(s.Z,{style:{color:"white",fontSize:"12px"}}),size:"small",type:"primary"}),v.E.HORIZONATAL,N("label.reviewer-plural"),v.U.USER_MULTI_SELECT,n.createElement(u.Z,{"data-testid":"add-reviewers",icon:n.createElement(s.Z,{style:{color:"white",fontSize:"12px"}}),size:"small",type:"primary"}),v.E.HORIZONATAL,n.createElement(E.Z,{firstPanel:{children:n.createElement("div",{className:"max-width-md w-9/10 service-form-container"},n.createElement(h.Z,{titleLinks:C}),n.createElement(d.Z.Title,{className:"m-t-md","data-testid":"form-heading",level:5},t),n.createElement("div",{className:"add-clientCenter","data-testid":"add-clientCenter"},n.createElement(c.Z,{form:Z,layout:"vertical",onFinish:function(e){var t=e.name,a=e.displayName,l=e.description,n=void 0===l?"":l,i=e.tags,r=e.mutuallyExclusive,s=e.reviewers,c=void 0===s?[]:s,d=e.owner,u=null!=d?d:{id:null==x?void 0:x.id,type:"user"},o={name:t.trim(),displayName:null==a?void 0:a.trim(),description:n,reviewers:c.map((function(e){return(0,y.toString)(e.fullyQualifiedName)})).filter(Boolean),owner:u,tags:i||[],mutuallyExclusive:Boolean(r)};T(o)}},(0,b.GL)(S),n.createElement(o.Z,{className:"w-full justify-end","data-testid":"cta-buttons",size:16},n.createElement(u.Z,{"data-testid":"cancel-clientCenter",type:"link",onClick:g},N("label.cancel")),n.createElement(u.Z,{"data-testid":"save-clientCenter",disabled:!r,htmlType:"submit",loading:w,type:"primary"},N("label.save")))))),minWidth:700,flex:.7},pageTitle:N("label.add-entity",{entity:N("label.client-center")}),secondPanel:{children:L,className:"p-md service-doc-panel",minWidth:60,overlay:{displayThreshold:200,header:N("label.setup-guide"),rotation:"counter-clockwise"}}})},C=a(8752),g=a(79839),T=a(62761),N=a(72819),Z=a(90108),x=a(93895),L=a(39570),S=a(96840),k=a(73553),R=a(46321),A=function(){var e=(0,r.k6)(),t=(0,C.BL)().permissions,a=(0,l.CR)((0,n.useState)([]),2),s=a[0],c=a[1],d=(0,l.CR)((0,n.useState)(!1),2),u=d[0],o=d[1],m=(0,l.CR)((0,n.useState)(!1),2),y=m[0],p=m[1],v=(0,l.CR)((0,n.useState)([]),2),b=v[0],f=v[1],E=(0,i.$)().t,h=(0,n.useMemo)((function(){return(0,L.P_)(N.OX.Create,g.A.CLIENT_CENTER,t)}),[t]),A=function(t){void 0===t&&(t=""),e.push((0,S.CM)(t))},U=(0,n.useCallback)((function(){A()}),[]),_=(0,n.useCallback)((function(e){return(0,l.mG)(void 0,void 0,void 0,(function(){var t,a,n;return(0,l.Jh)(this,(function(l){switch(l.label){case 0:p(!0),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,(0,Z.b2)(e)];case 2:return t=l.sent(),A(null!==(n=t.fullyQualifiedName)&&void 0!==n?n:""),[3,5];case 3:return a=l.sent(),i=(0,x.B)(a,T.c9.alreadyExist)?E("server.entity-already-exist",{entity:E("label.client-center"),entityPlural:E("label.client-center-lowercase-plural"),name:e.name}):a,r=E("server.add-entity-error",{entity:E("label.client-center-lowercase")}),(0,R.Eo)(i,r),[3,5];case 4:return p(!1),[7];case 5:return[2]}var i,r}))}))}),[]);return(0,n.useEffect)((function(){f([{name:E("label.client-center"),url:(0,S.CM)()},{name:E("label.add-entity",{entity:E("label.client-center")}),url:"",activeTitle:!0}])}),[]),n.createElement("div",{className:"self-center"},n.createElement(w,{allowAccess:h,fetchTags:function(){o(!0),(0,k.bn)().then((function(e){return(0,l.mG)(void 0,void 0,void 0,(function(){var t;return(0,l.Jh)(this,(function(a){switch(a.label){case 0:return e.data?[4,(0,k.bM)(e.data)]:[3,2];case 1:return t=a.sent(),c(t),[3,3];case 2:(0,R.Eo)(E("server.entity-fetch-error",{entity:E("label.tag-plural")})),a.label=3;case 3:return[2]}}))}))})).catch((function(e){(0,R.Eo)(e,E("server.entity-fetch-error",{entity:E("label.tag-plural")}))})).finally((function(){o(!1)}))},header:E("label.add-entity",{entity:E("label.client-center")}),isLoading:y,isTagLoading:u,slashedBreadcrumb:b,tagList:s,onCancel:U,onSave:_}))}}}]);