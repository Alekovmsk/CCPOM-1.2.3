"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[5053],{92056:function(e,t,a){var r=a(71230),n=a(15746),i=a(96486),l=a(67294),o=a(97638),m=a(72972),s=a(85406);t.Z=function(e){var t=e.loading,a=e.children;return t?l.createElement("div",{className:"m-b-md p-md"},l.createElement(s.Z,{isLabel:!0}),l.createElement(r.Z,{gutter:32,justify:"space-between"},l.createElement(n.Z,{className:"m-l-xss",span:24},l.createElement(m.Z,null)),l.createElement(n.Z,{className:"m-t-md",span:24},(0,o.kK)().map((function(){return l.createElement(s.Z,{isCount:!0,isLabel:!0,key:(0,i.uniqueId)()})}))))):a}},21397:function(e,t,a){a.d(t,{O:function(){return r}});var r={name:"",displayName:"",description:""}},64383:function(e,t,a){var r,n;a.d(t,{O:function(){return n}}),function(e){e.Allow="allow",e.Deny="deny"}(r||(r={})),function(e){e.All="All",e.Create="Create",e.Delete="Delete",e.EditAll="EditAll",e.EditCustomFields="EditCustomFields",e.EditDataProfile="EditDataProfile",e.EditDescription="EditDescription",e.EditDisplayName="EditDisplayName",e.EditKnowledgePanel="EditKnowledgePanel",e.EditLifeCycle="EditLifeCycle",e.EditLineage="EditLineage",e.EditOwner="EditOwner",e.EditPage="EditPage",e.EditPolicy="EditPolicy",e.EditQueries="EditQueries",e.EditReviewers="EditReviewers",e.EditRole="EditRole",e.EditSampleData="EditSampleData",e.EditStatus="EditStatus",e.EditTags="EditTags",e.EditTeams="EditTeams",e.EditTests="EditTests",e.EditTier="EditTier",e.EditUsage="EditUsage",e.EditUsers="EditUsers",e.ViewAll="ViewAll",e.ViewBasic="ViewBasic",e.ViewDataProfile="ViewDataProfile",e.ViewQueries="ViewQueries",e.ViewSampleData="ViewSampleData",e.ViewTests="ViewTests",e.ViewUsage="ViewUsage"}(n||(n={}))},75053:function(e,t,a){a.r(t),a.d(t,{default:function(){return ce}});var r,n=a(70655),i=a(19650),l=a(56256),o=a(94199),m=a(71577),s=a(79166),d=a(94184),u=a.n(d),c=a(34901),p=a(96486),b=a(67294),f=a(68432),y=a(15137),E=a(57599),v=a(52094),h=a(83716),g=a(88816),N=a(80646),T=a(69523),Z=a(50922),S=a(8752),D=a(79839),w=a(92056),C=a(19793),O=a(62761),x=a(61105);!function(e){e.System="system",e.User="user"}(r||(r={}));var A=a(64383),I=a(22334),M=a(2598),L="/spdClassifications",P=function(e){return(0,n.mG)(void 0,void 0,void 0,(function(){var t,a=e.arrQueryFields,r=e.limit,i=void 0===r?10:r,l=(0,n._T)(e,["arrQueryFields","limit"]);return(0,n.Jh)(this,(function(e){switch(e.label){case 0:return t=(0,I.JP)("/spds",a),[4,M.Z.get(t,{params:(0,n.pi)((0,n.pi)({},l),{limit:i})})];case 1:return[2,e.sent().data]}}))}))},R=function(e){return(0,n.mG)(void 0,void 0,void 0,(function(){return(0,n.Jh)(this,(function(t){switch(t.label){case 0:return[4,M.Z.post(L,e)];case 1:return[2,t.sent().data]}}))}))},q=function(e){return(0,n.mG)(void 0,void 0,void 0,(function(){return(0,n.Jh)(this,(function(t){switch(t.label){case 0:return[4,M.Z.post("/spds",e)];case 1:return[2,t.sent().data]}}))}))},F=a(93895),U=a(24671),k=a(39570),V=a(96840),Y=a(40734),z=a(46321),Q=a(8645),G=a(49101),H=a(49409),X=a(50146),J=a(91894),B=a(11448),_=a(12028),j=a(71230),$=a(15746),K=a(4107),W=a(16139),ee=a(21397),te=a(17309),ae=a(79690),re=a(37878),ne=a(40773),ie=a(95137),le=a(30381),oe=a.n(le),me=a(37398),se=a(45736),de=a(72121),ue=function(e){var t=e.visible,a=e.onCancel,r=e.header,i=e.initialValues,o=e.onSubmit,s=(e.showMutuallyExclusive,e.isLoading),d=e.isSystemTag,u=e.permissions,c=e.isClassification,y=e.isEditing,E=void 0!==y&&y,v=(e.isTier,(0,f.$)().t),h=(0,n.CR)(H.Z.useForm(),1)[0],g=H.Z.useWatch("owner",h),N=(0,n.CR)((0,b.useState)(0),2),T=N[0],Z=N[1],S=(0,n.CR)((0,b.useState)(0),2),D=S[0],w=S[1],C=(0,ie.Eu)().currentUser,x=(0,n.CR)((0,b.useState)([]),2),A=x[0],I=x[1],M=(0,n.CR)((0,b.useState)(""),2),L=M[0],P=M[1],R=(0,n.CR)((0,b.useState)(!1),2),q=R[0],F=R[1],k=(0,n.CR)((0,b.useState)([]),2),V=k[0],Y=k[1],z=(0,n.CR)((0,b.useState)([]),2),le=(z[0],z[1],(0,n.CR)((0,b.useState)([]),2));le[0],le[1],(0,b.useEffect)((function(){var e,t;if(i){var a=i.name,r=i.description,n=i.owner,l=i.docNumber,o=i.docType,m=i.conclusionDate,s=i.expirationDate,d=i.validity,u=i.prolongation,c=i.domainData,p=i.consumer,b=i.docStatus,f=i.members,y=i.autoSystemProvider,E=i.autoSystemOwnerFullName,v=i.autoSystemOwnerPhone,g=i.autoSystemOwnerEmail,N=i.productManagerFullName,T=i.productManagerPhone,S=i.productManagerEmail,D=i.connectionParameters,C=i.connectionModes,O=i.otherParameters,x=i.requirements,A=i.indicators,M=i.reportingType,L=i.reportingPeriodicity,R=i.reportingFormationMode,q=i.reportingHref;w(x?x.length:0),Z(A?A.length:0),Y(f);var U=f?f.map((function(e){return!!e.memberDomainAttribute&&e.memberDomainAttribute})):[];I(U),P(oe()(m).format("YYYY-MM-DD")),F(u||!1),h.setFieldsValue({name:a,description:r,docNumber:l,docType:o,conclusionDate:m,expirationDate:s,validity:d,prolongation:u,domainData:c,consumer:p?[p]:void 0,docStatus:b,members:f?f.map((function(e){return e.memberDomainAttribute?{memberType:e.memberType,memberNumber:e.memberNumber,memberName:e.memberName?[e.memberName]:void 0,memberShortName:e.memberShortName,memberShortDescription:e.memberShortDescription,memberOwner:e.memberOwner,memberManager:e.memberManager,memberDomainAttribute:e.memberDomainAttribute,memberDomainName:e.memberDomainName,memberDomainShortName:e.memberDomainShortName,memberDomainShortDescription:e.memberDomainShortDescription,memberDomainOwner:e.memberDomainOwner,memberDomainTechLeader:e.memberDomainTechLeader}:{memberType:e.memberType,memberNumber:e.memberNumber,memberName:e.memberName?[e.memberName]:void 0,memberShortName:e.memberShortName,memberShortDescription:e.memberShortDescription,memberOwner:e.memberOwner,memberManager:e.memberManager,memberDomainAttribute:e.memberDomainAttribute}})):void 0,autoSystemProvider:y,autoSystemOwnerFullName:E,autoSystemOwnerPhone:v,autoSystemOwnerEmail:g,productManagerFullName:N,productManagerPhone:T,productManagerEmail:S,connectionParameters:D,connectionModes:C,otherParameters:O,requirements:x,indicators:A,reportingType:M,reportingPeriodicity:L,reportingFormationMode:R,reportingHref:q,iconURL:null===(e=null==i?void 0:i.style)||void 0===e?void 0:e.iconURL,color:null===(t=null==i?void 0:i.style)||void 0===t?void 0:t.color}),n&&h.setFieldValue("owner",n)}}),[i]);var ue=(0,b.useMemo)((function(){return E&&d}),[E,d]),ce=((0,b.useMemo)((function(){return E?!((null==u?void 0:u.editDisplayName)||(null==u?void 0:u.editAll)):!((null==u?void 0:u.createTags)||c)}),[E,c,u]),(0,b.useMemo)((function(){return E?!((null==u?void 0:u.editDescription)||(null==u?void 0:u.editAll)):!((null==u?void 0:u.createTags)||c)}),[E,c,u]),(0,b.useMemo)((function(){return E?!(null==u?void 0:u.editAll):!((null==u?void 0:u.createTags)||c)}),[E,c,u]),(0,b.useMemo)((function(){return E?!(null==u?void 0:u.editAll):!c}),[E,c,u]),{name:"owner",id:"root/owner",required:!1,label:v("label.data-provider"),type:te.U.USER_TEAM_SELECT,props:{hasPermission:!0,children:b.createElement(m.Z,{"data-testid":"add-owner",icon:b.createElement(G.Z,{style:{color:"white",fontSize:"12px"}}),size:"small",type:"primary"})},formItemLayout:te.E.HORIZONATAL,formItemProps:{valuePropName:"owner",trigger:"onUpdate"}}),pe=[{name:"name",id:"root/name",required:!0,label:v("label.doc-name"),type:te.U.TEXT,rules:[{pattern:W.$Q,message:v("message.entity-name-validation")},{type:"string",min:2,max:64}],props:{"data-testid":"name",disabled:ue},placeholder:v("label.doc-name"),formItemLayout:te.E.HORIZONATAL},{name:"docNumber",id:"root/docNumber",required:!1,label:v("label.doc-number"),type:te.U.TEXT,props:{"data-testid":"docNumber",disabled:!1},placeholder:v("label.doc-number"),formItemLayout:te.E.HORIZONATAL},{name:"docType",id:"root/docType",required:!1,label:v("label.doc-type"),type:te.U.TEXT,props:{"data-testid":"docType",disabled:!0},formItemProps:{initialValue:"СПД"},placeholder:v("label.doc-type"),formItemLayout:te.E.HORIZONATAL}],be=[{name:"validity",id:"root/validity",required:!1,label:v("label.validity"),type:te.U.TEXT,props:{"data-testid":"validity",disabled:!0},placeholder:v("label.validity"),formItemLayout:te.E.HORIZONATAL}],fe=[{name:"domainData",id:"root/domainData",required:!1,label:v("label.domain-data"),type:te.U.TEXT,props:{"data-testid":"domainData",disabled:!1},placeholder:v("label.domain-data"),formItemLayout:te.E.HORIZONATAL}],ye=[{name:"docStatus",id:"root/docStatus",required:!1,label:v("label.doc-status"),type:te.U.TEXT,props:{"data-testid":"docStatus",disabled:!1},placeholder:v("label.doc-status"),formItemLayout:te.E.HORIZONATAL},{name:"autoSystemProvider",id:"root/autoSystemProvider",required:!1,label:"Поставщик",type:te.U.TEXT,props:{"data-testid":"autoSystemProvider",disabled:!0},placeholder:"Поставщик",formItemLayout:te.E.HORIZONATAL}],Ee=[{name:"description",id:"root/description",required:!0,label:"Описание технологии подключения и ключевые условия",type:te.U.TEXT,props:{"data-testid":"description",disabled:ue,initialValue:"",dd:"zzz"},placeholder:"Описание технологии подключения и ключевые условия",formItemLayout:te.E.HORIZONATAL},{name:"connectionParameters",id:"root/connectionParameters",required:!1,label:"Параметры подключения",type:te.U.TEXT,props:{"data-testid":"dataRegister",disabled:!1},placeholder:"Параметры подключения",formItemLayout:te.E.HORIZONATAL},{name:"connectionModes",id:"root/connectionModes",required:!1,label:"Режимы подключения, временные параметры предоставления данных",type:te.U.TEXT,props:{"data-testid":"connectionModes",disabled:!1},placeholder:"Режимы подключения, временные параметры предоставления данных",formItemLayout:te.E.HORIZONATAL},{name:"otherParameters",id:"root/otherParameters",required:!1,label:"Иные параметры, требующие явного указания",type:te.U.TEXT,props:{"data-testid":"otherParameters",disabled:!1},placeholder:"Иные параметры, требующие явного указания",formItemLayout:te.E.HORIZONATAL}],ve=[{name:"autoSystemOwnerFullName",id:"root/autoSystemOwnerFullName",required:!1,label:"ФИО",type:te.U.TEXT,props:{"data-testid":"autoSystemOwnerFullName",disabled:!0},placeholder:"ФИО",formItemLayout:te.E.HORIZONATAL},{name:"autoSystemOwnerPhone",id:"root/autoSystemOwnerPhone",required:!1,label:"Телефон",type:te.U.TEXT,props:{"data-testid":"autoSystemOwnerPhone",disabled:!0},placeholder:"Телефон",formItemLayout:te.E.HORIZONATAL},{name:"autoSystemOwnerEmail",id:"root/autoSystemOwnerEmail",required:!1,label:"Email",type:te.U.TEXT,props:{"data-testid":"autoSystemOwnerEmail",disabled:!0},placeholder:"Email",formItemLayout:te.E.HORIZONATAL}],he=[{name:"productManagerFullName",id:"root/productManagerFullName",required:!1,label:"ФИО",type:te.U.TEXT,props:{"data-testid":"productManagerFullName",disabled:!0},placeholder:"ФИО",formItemLayout:te.E.HORIZONATAL},{name:"productManagerPhone",id:"root/productManagerPhone",required:!1,label:"Телефон",type:te.U.TEXT,props:{"data-testid":"productManagerPhone",disabled:!0},placeholder:"Телефон",formItemLayout:te.E.HORIZONATAL},{name:"productManagerEmail",id:"root/productManagerEmail",required:!1,label:"Email",type:te.U.TEXT,props:{"data-testid":"productManagerEmail",disabled:!0},placeholder:"Email",formItemLayout:te.E.HORIZONATAL}],ge=[{name:"reportingType",id:"root/reportingType",required:!1,label:"Вид отчета",type:te.U.TEXT,props:{"data-testid":"reportingType",disabled:!1},placeholder:"Вид отчета",formItemLayout:te.E.HORIZONATAL},{name:"reportingPeriodicity",id:"root/reportingPeriodicity",required:!1,label:"Периодичность",type:te.U.TEXT,props:{"data-testid":"reportingPeriodicity",disabled:!1},placeholder:"Периодичность",formItemLayout:te.E.HORIZONATAL},{name:"reportingFormationMode",id:"root/reportingFormationMode",required:!1,label:"Режим формирования",type:te.U.TEXT,props:{"data-testid":"reportingFormationMode",disabled:!1},placeholder:"Режим формирования",formItemLayout:te.E.HORIZONATAL},{name:"reportingHref",id:"root/reportingHref",required:!1,label:"Ссылка на отчет",type:te.U.TEXT,props:{"data-testid":"reportingHref",disabled:!1},placeholder:"Ссылка на отчет",formItemLayout:te.E.HORIZONATAL}];return b.createElement(X.Z,{centered:!0,destroyOnClose:!0,closable:!1,"data-testid":"modal-container",okButtonProps:{form:"tags",type:"primary",htmlType:"submit",loading:s},okText:v("label.save"),cancelText:v("label.cancel"),open:t,title:b.createElement(l.Z.Text,{strong:!0,"data-testid":"header"},r),width:1500,onCancel:function(){h.setFieldsValue(ee.O),a()}},b.createElement(H.Z,{form:h,initialValues:null!=i?i:ee.O,layout:"vertical",name:"tags",validateMessages:O.NG,onFieldsChange:function(e,t){var a=t.filter((function(e){return 1==e.name.length&&"members"==e.name[0]})),r=a?a[0].value:void 0;r&&Y((0,n.ev)([],(0,n.CR)(r)))},onFinish:function(e){!function(e){var t,a=e.name,r=e.description,n=e.displayName,i=e.docNumber,l=e.docType,m=e.conclusionDate,s=e.expirationDate,d=e.validity,u=e.prolongation,c=e.domainData,b=e.consumer,f=e.docStatus,y=e.autoSystemProvider,E=e.autoSystemOwnerFullName,v=e.autoSystemOwnerPhone,h=e.autoSystemOwnerEmail,N=e.productManagerFullName,T=e.productManagerPhone,Z=e.productManagerEmail,S=e.members,D=void 0===S?[]:S,w=e.connectionParameters,O=e.connectionModes,x=e.otherParameters,A=e.requirements,I=void 0===A?[]:A,M=e.indicators,L=void 0===M?[]:M,P=e.reportingType,R=e.reportingPeriodicity,q=e.reportingFormationMode,F=e.reportingHref,U=e.color,k=e.iconURL,V=g||{id:null!==(t=null==C?void 0:C.id)&&void 0!==t?t:"",type:"user"},Y={color:U,iconURL:k},z=D.map((function(e){return e.memberDomainAttribute?{memberType:e.memberType,memberNumber:e.memberNumber,memberName:e.memberName[0],memberShortName:e.memberShortName,memberShortDescription:e.memberShortDescription,memberOwner:e.memberOwner,memberManager:e.memberManager,memberDomainAttribute:e.memberDomainAttribute,memberDomainName:e.memberDomainName,memberDomainShortName:e.memberDomainShortName,memberDomainShortDescription:e.memberDomainShortDescription,memberDomainOwner:e.memberDomainOwner,memberDomainTechLeader:e.memberDomainTechLeader}:{memberType:e.memberType,memberNumber:e.memberNumber,memberName:e.memberName[0],memberShortName:e.memberShortName,memberShortDescription:e.memberShortDescription,memberOwner:e.memberOwner,memberManager:e.memberManager,memberDomainAttribute:e.memberDomainAttribute}})),Q={name:a.trim(),displayName:null==n?void 0:n.trim(),requirements:I.length>0?I:void 0,indicators:L.length>0?L:void 0,members:z.length>0?z:void 0,description:r,docNumber:i,docType:l,conclusionDate:m,expirationDate:s,validity:d,prolongation:u,domainData:c,consumer:b[0],docStatus:f,autoSystemProvider:y,autoSystemOwnerFullName:E,autoSystemOwnerPhone:v,autoSystemOwnerEmail:h,productManagerFullName:N,productManagerPhone:T,productManagerEmail:Z,connectionParameters:w,connectionModes:O,otherParameters:x,reportingType:P,reportingPeriodicity:R,reportingFormationMode:q,reportingHref:F,owner:V,style:(0,p.isEmpty)(Y)?void 0:Y};o(Q)}(e),h.setFieldsValue(ee.O)}},b.createElement(J.Z,{className:"ant-card-feed",headStyle:{backgroundColor:"rgba(250, 250, 250)"},style:{marginBottom:"20px"},title:b.createElement(l.Z.Text,{strong:!0,"data-testid":"header"},"Данные реестра")},(0,ae.GL)(pe),b.createElement(H.Z.Item,{label:v("label.conclusion-date"),className:"form-item-horizontal",name:"conclusionDate",valuePropName:"date",getValueFromEvent:function(e){return e?e.format("YYYY-MM-DD"):void 0},getValueProps:function(e){return{value:e?oe()(e):void 0}},rules:[{required:!0,message:""+v("message.field-text-is-required",{fieldText:v("label.conclusion-date")})}]},b.createElement(B.Z,{id:"conclusionDate",placeholder:v("label.conclusion-date"),onChange:function(e,t){var a,r;q?(a=1===oe()(t).month()&&29==oe()(t).date()?oe()(t).add(2,"y").add(1,"d").format("YYYY-MM-DD"):oe()(t).add(2,"y").format("YYYY-MM-DD"),r="2 года"):(a=1===oe()(t).month()&&29==oe()(t).date()?oe()(t).add(1,"y").add(1,"d").format("YYYY-MM-DD"):oe()(t).add(1,"y").format("YYYY-MM-DD"),r="1 год"),h.setFieldsValue({expirationDate:a,validity:r}),P(t)}})),b.createElement(H.Z.Item,{label:v("label.expiration-date"),className:"form-item-horizontal",name:"expirationDate",valuePropName:"date",getValueFromEvent:function(e){return L||void 0},getValueProps:function(e){return{value:e?oe()(e):void 0}}},b.createElement(B.Z,{id:"conclusionDate",placeholder:v("label.expiration-date"),disabled:!0})),(0,ae.GL)(be),b.createElement(H.Z.Item,{label:v("label.prolongation"),className:"form-item-horizontal",name:"prolongation",valuePropName:"checked"},b.createElement(_.Z,{id:"prolongation",onChange:function(e){var t,a;e?(t=1===oe()(L).month()&&29==oe()(L).date()?oe()(L).add(2,"y").add(1,"d").format("YYYY-MM-DD"):oe()(L).add(2,"y").format("YYYY-MM-DD"),a="2 года"):(t=1===oe()(L).month()&&29==oe()(L).date()?oe()(L).add(1,"y").add(1,"d").format("YYYY-MM-DD"):oe()(L).add(1,"y").format("YYYY-MM-DD"),a="1 год"),h.setFieldsValue({expirationDate:t,validity:a}),F(e)}})),(0,ae.GL)(fe),b.createElement(H.Z.Item,{label:v("label.consumer"),className:"form-item-horizontal",name:"consumer",rules:[{required:!0,message:""+v("message.field-text-is-required",{fieldText:v("label.consumer")})}]},b.createElement(me.Z,{fetchOptions:se.Xk,mode:"multiple",placeholder:v("label.consumer"),onChange:function(e){return(0,n.mG)(void 0,void 0,void 0,(function(){var t,a,r,i,l,o;return(0,n.Jh)(this,(function(n){switch(n.label){case 0:return 0==e.length?[3,4]:e[0].data?(t=e[0].data.supplier,a=e[0].data.fullNameOwner,r=e[0].data.productManager,i=[e[0].value],[4,(0,de.GN)(a)]):[3,3];case 1:return l=n.sent(),[4,(0,de.GN)(r)];case 2:o=n.sent(),h.setFieldsValue({autoSystemProvider:t,autoSystemOwnerFullName:a,productManagerFullName:r,consumer:i,autoSystemOwnerPhone:null==l?void 0:l._source.phoneNumber,autoSystemOwnerEmail:null==l?void 0:l._source.email,productManagerPhone:null==o?void 0:o._source.phoneNumber,productManagerEmail:null==o?void 0:o._source.email}),n.label=3;case 3:return[3,5];case 4:h.setFieldsValue({autoSystemProvider:void 0,autoSystemOwnerFullName:void 0,productManagerFullName:void 0,consumer:void 0,autoSystemOwnerPhone:void 0,autoSystemOwnerEmail:void 0,productManagerPhone:void 0,productManagerEmail:void 0}),n.label=5;case 5:return[2]}}))}))}})),(0,ae.GL)(ye),b.createElement("div",{className:"m-t-xss"},b.createElement(j.Z,{gutter:[8,0]},b.createElement($.Z,{span:8},(0,ae.rz)(ce)),b.createElement($.Z,{span:10},g&&b.createElement("div",{className:"m-y-sm","data-testid":"owner-container"},b.createElement(ne.w,{id:g.id,name:(0,U.C_)(g),size:re.e.small})))))),b.createElement(J.Z,{headStyle:{backgroundColor:"rgba(250, 250, 250)"},style:{marginBottom:"20px"},title:b.createElement(l.Z.Text,{strong:!0,"data-testid":"header"},"Технологические параметры предоставлерния данных")},(0,ae.GL)(Ee)),b.createElement(J.Z,{headStyle:{backgroundColor:"rgba(250, 250, 250)"},style:{marginBottom:"20px"},title:b.createElement(l.Z.Text,{strong:!0,"data-testid":"header"},"Участники")},b.createElement(H.Z.List,{name:"members"},(function(e,t){var a=t.add,r=t.remove;return b.createElement(b.Fragment,null,b.createElement(H.Z.Item,{className:"form-item-horizontal",colon:!1,label:"Участники"},b.createElement(m.Z,{"data-testid":"add-member",icon:b.createElement(G.Z,{style:{color:"white",fontSize:"12px"}}),size:"small",type:"primary",onClick:function(){a(),I((function(e){return(0,n.ev)((0,n.ev)([],(0,n.CR)(e)),[!1])}))}},v("label.add"))),e.map((function(e,t){return b.createElement(J.Z,{headStyle:{backgroundColor:"rgba(250, 250, 250)"},style:{marginBottom:"20px",border:"1px solid gray"},title:b.createElement(l.Z.Text,{strong:!0,"data-testid":"header"},"Участник ",t+1)},b.createElement(H.Z.Item,{className:"form-item-horizontal",name:[e.name,"memberType"],label:"Тип",rules:[{required:!0,message:""+v("message.field-text-is-required",{fieldText:"Тип"})}]},b.createElement(K.Z,{id:"memberType-"+t,placeholder:"Тип"})),b.createElement(H.Z.Item,{label:"Номер в реестре АС",className:"form-item-horizontal",name:[e.name,"memberNumber"],rules:[{required:!0,message:""+v("message.field-text-is-required",{fieldText:"Номер в реестре АС"})}]},b.createElement(K.Z,{disabled:!0,id:"memberNumber-"+t,placeholder:"Номер в реестре АС"})),b.createElement(H.Z.Item,{label:"Наименование",className:"form-item-horizontal",name:[e.name,"memberName"],rules:[{required:!0,message:""+v("message.field-text-is-required",{fieldText:"Наименование"})}]},b.createElement(me.Z,{fetchOptions:se.IQ,id:"memberName-"+t,mode:"multiple",placeholder:"Наименование",onChange:function(e){if(0!=e.length&&e[0].data&&V){var a=V;a[t]||(a[t]={memberType:void 0,memberNumber:void 0,memberName:void 0,memberShortName:void 0,memberShortDescription:void 0,memberOwner:void 0,memberManager:void 0,memberDomainAttribute:!1}),a[t].memberNumber=e[0].data.numberInList,a[t].memberShortName=e[0].data.shortName,a[t].memberShortDescription=e[0].data.description,a[t].memberOwner=e[0].data.fullNameOwner,a[t].memberManager=e[0].data.productManager,a[t].memberName=[e[0].value],h.setFieldsValue({members:a}),Y((0,n.ev)([],(0,n.CR)(a)))}}})),b.createElement(H.Z.Item,{label:"Краткое наименование",className:"form-item-horizontal",name:[e.name,"memberShortName"],rules:[{required:!0,message:""+v("message.field-text-is-required",{fieldText:"Краткое наименование"})}]},b.createElement(K.Z,{disabled:!0,id:"memberShortName-"+t,placeholder:"Краткое наименование"})),b.createElement(H.Z.Item,{label:"Краткое описание",className:"form-item-horizontal",name:[e.name,"memberShortDescription"],rules:[{required:!0,message:""+v("message.field-text-is-required",{fieldText:"Краткое описание"})}]},b.createElement(K.Z,{disabled:!0,id:"memberShortDescription-"+t,placeholder:"Краткое описание"})),b.createElement(H.Z.Item,{label:"Владелец АС",className:"form-item-horizontal",name:[e.name,"memberOwner"],rules:[{required:!0,message:""+v("message.field-text-is-required",{fieldText:"Владелец АС"})}]},b.createElement(K.Z,{disabled:!0,id:"memberOwner-"+t,placeholder:"Владелец АС"})),b.createElement(H.Z.Item,{label:"Менеджер АС",className:"form-item-horizontal",name:[e.name,"memberManager"],rules:[{required:!0,message:""+v("message.field-text-is-required",{fieldText:"Менеджер АС"})}]},b.createElement(K.Z,{disabled:!0,id:"memberManager-"+t,placeholder:"Менеджер АС"})),b.createElement(H.Z.Item,{label:"Признак домена",valuePropName:"checked",className:"form-item-horizontal",name:[e.name,"memberDomainAttribute"]},b.createElement(_.Z,{id:"memberDomainAttribute-"+t,onChange:function(e){var a=A;a[t]=e,I((0,n.ev)([],(0,n.CR)(a)))}})),b.createElement(J.Z,{headStyle:{backgroundColor:"rgba(250, 250, 250)"},style:A[t]?{marginBottom:"20px"}:{display:"None"},title:b.createElement(l.Z.Text,{strong:!0,"data-testid":"header"},"Домен")},b.createElement(H.Z.Item,{label:"Наименование",className:"form-item-horizontal",name:[e.name,"memberDomainName"]},b.createElement(K.Z,{id:"memberDomainName-"+t,placeholder:"Наименование"})),b.createElement(H.Z.Item,{label:"Краткое наименование",className:"form-item-horizontal",name:[e.name,"memberDomainShortName"]},b.createElement(K.Z,{id:"memberDomainShortName-"+t,placeholder:"Краткое наименование"})),b.createElement(H.Z.Item,{label:"Краткое описание",className:"form-item-horizontal",name:[e.name,"memberDomainShortDescription"]},b.createElement(K.Z,{id:"memberDomainShortDescription-"+t,placeholder:"Краткое описание"})),b.createElement(H.Z.Item,{label:"Технический лидер",className:"form-item-horizontal",name:[e.name,"memberDomainOwner"]},b.createElement(K.Z,{id:"memberDomainOwner-"+t,placeholder:"Технический лидер"})),b.createElement(H.Z.Item,{label:"Владелец",className:"form-item-horizontal",name:[e.name,"memberDomainTechLeader"]},b.createElement(K.Z,{id:"memberDomainTechLeader-"+t,placeholder:"Владелец"}))),b.createElement(m.Z,{icon:b.createElement(Q.ReactComponent,{width:16}),size:"small",type:"text",onClick:function(){r(e.name)}}))})))}))),b.createElement(J.Z,{headStyle:{backgroundColor:"rgba(250, 250, 250)"},style:{marginBottom:"20px"},title:b.createElement(l.Z.Text,{strong:!0,"data-testid":"header"},"Ответственные лица / матрица эскалации")},b.createElement(J.Z,{headStyle:{backgroundColor:"rgba(250, 250, 250)"},style:{marginBottom:"20px"},title:b.createElement(l.Z.Text,{strong:!0,"data-testid":"header"},"Владелец АС")},(0,ae.GL)(ve)),b.createElement(J.Z,{headStyle:{backgroundColor:"rgba(250, 250, 250)"},style:{marginBottom:"20px"},title:b.createElement(l.Z.Text,{strong:!0,"data-testid":"header"},"Менеджер продукта (менеджер АС)")},(0,ae.GL)(he))),b.createElement(J.Z,{headStyle:{backgroundColor:"rgba(250, 250, 250)"},style:{marginBottom:"20px"},title:b.createElement(l.Z.Text,{strong:!0,"data-testid":"header"},"Требования к интеграционному взаимодействию")},b.createElement(H.Z.List,{name:"requirements"},(function(e,t){var a=t.add,r=t.remove;return b.createElement(b.Fragment,null,b.createElement(H.Z.Item,{className:"form-item-horizontal",colon:!1,label:"Требования"},b.createElement(m.Z,{"data-testid":"add-requirement",icon:b.createElement(G.Z,{style:{color:"white",fontSize:"12px"}}),size:"small",type:"primary",onClick:function(){a(),w(D+1)}},v("label.add"))),0!=D?b.createElement(j.Z,{gutter:[8,0]},b.createElement($.Z,{span:2},b.createElement("p",{style:{textAlign:"center"}},"№")),b.createElement($.Z,{span:4},b.createElement("p",{style:{textAlign:"center"}},"Описание требования"))):[],e.map((function(e,t){return b.createElement(j.Z,{gutter:[8,0],key:e.key},b.createElement($.Z,{span:2},b.createElement(H.Z.Item,{name:[e.name,"reqNumber"],rules:[{required:!0,message:""+v("message.field-text-is-required",{fieldText:"№"})}]},b.createElement(K.Z,{id:"reqNumber-"+t,placeholder:"№"}))),b.createElement($.Z,{span:20},b.createElement(H.Z.Item,{name:[e.name,"reqDescription"],rules:[{required:!0,message:""+v("message.field-text-is-required",{fieldText:"Описание требования"})}]},b.createElement(K.Z,{id:"index-"+t,placeholder:"Описание требования"}))),b.createElement($.Z,{span:2},b.createElement(m.Z,{icon:b.createElement(Q.ReactComponent,{width:16}),size:"small",type:"text",onClick:function(){r(e.name),w(D-1)}})))})))}))),b.createElement(J.Z,{headStyle:{backgroundColor:"rgba(250, 250, 250)"},style:{marginBottom:"20px"},title:b.createElement(l.Z.Text,{strong:!0,"data-testid":"header"},"Параметры предоставлерния данных")},b.createElement(H.Z.List,{name:"indicators"},(function(e,t){var a=t.add,r=t.remove;return b.createElement(b.Fragment,null,b.createElement(H.Z.Item,{className:"form-item-horizontal",colon:!1,label:"Индикаторы предоставления данных"},b.createElement(m.Z,{"data-testid":"add-indicator",icon:b.createElement(G.Z,{style:{color:"white",fontSize:"12px"}}),size:"small",type:"primary",onClick:function(){a(),Z(T+1)}},v("label.add"))),0!=T?b.createElement(j.Z,{gutter:[8,0]},b.createElement($.Z,{span:2},b.createElement("p",{style:{textAlign:"center"}},"№")),b.createElement($.Z,{span:4},b.createElement("p",{style:{textAlign:"center"}},"Показатель")),b.createElement($.Z,{span:8},b.createElement("p",{style:{textAlign:"center"}},"Описание")),b.createElement($.Z,{span:4},b.createElement("p",{style:{textAlign:"center"}},"Целевое значение (%)")),b.createElement($.Z,{span:4},b.createElement("p",{style:{textAlign:"center"}},"Вес (%)"))):[],e.map((function(e,t){return b.createElement(j.Z,{gutter:[8,0],key:e.key},b.createElement($.Z,{span:2},b.createElement(H.Z.Item,{name:[e.name,"number"],rules:[{required:!0,message:""+v("message.field-text-is-required",{fieldText:"№"})}]},b.createElement(K.Z,{id:"number-"+t,placeholder:"№"}))),b.createElement($.Z,{span:4},b.createElement(H.Z.Item,{name:[e.name,"index"],rules:[{required:!0,message:""+v("message.field-text-is-required",{fieldText:"Показатель"})}]},b.createElement(K.Z,{id:"index-"+t,placeholder:"Показатель"}))),b.createElement($.Z,{span:8},b.createElement(H.Z.Item,{name:[e.name,"description"],rules:[{required:!0,message:""+v("message.field-text-is-required",{fieldText:"Описание"})}]},b.createElement(K.Z,{id:"description-"+t,placeholder:"Описание"}))),b.createElement($.Z,{span:4},b.createElement(H.Z.Item,{name:[e.name,"targetValue"],rules:[{required:!0,message:""+v("message.field-text-is-required",{fieldText:"Целевое значение"})}]},b.createElement(K.Z,{id:"targetValue-"+t,placeholder:"Целевое значение (%)"}))),b.createElement($.Z,{span:4},b.createElement(H.Z.Item,{name:[e.name,"weight"],rules:[{required:!0,message:v("Вес")}]},b.createElement(K.Z,{id:"weight-"+t,placeholder:"Вес (%)"}))),b.createElement($.Z,{span:2},b.createElement(m.Z,{icon:b.createElement(Q.ReactComponent,{width:16}),size:"small",type:"text",onClick:function(){r(e.name),Z(T-1)}})))})))}))),b.createElement(J.Z,{className:"ant-card-feed",headStyle:{backgroundColor:"rgba(250, 250, 250)"},style:{marginBottom:"20px"},title:b.createElement(l.Z.Text,{strong:!0,"data-testid":"header"},"Отчетность")},(0,ae.GL)(ge))))},ce=function(){var e,t,a,d,Q=(0,S.BL)(),G=Q.getEntityPermission,H=Q.permissions,X=(0,y.k6)(),J=(0,y.UO)().fqn,B=(0,n.CR)((0,b.useState)([]),2),_=B[0],j=B[1],$=(0,n.CR)((0,b.useState)(),2),K=$[0],W=$[1],ee=(0,n.CR)((0,b.useState)(!1),2),te=ee[0],ae=ee[1],re=(0,n.CR)((0,b.useState)(!1),2),ne=re[0],ie=re[1],le=(0,n.CR)((0,b.useState)(!1),2),oe=le[0],me=le[1],se=(0,n.CR)((0,b.useState)(),2),de=se[0],ce=se[1],pe=(0,n.CR)((0,b.useState)(""),2),be=pe[0],fe=pe[1],ye=(0,n.CR)((0,b.useState)(!1),2),Ee=ye[0],ve=ye[1],he=(0,n.CR)((0,b.useState)(!1),2),ge=he[0],Ne=he[1],Te=(0,n.CR)((0,b.useState)({data:void 0,state:!1}),2),Ze=Te[0],Se=Te[1],De=(0,n.CR)((0,b.useState)(k.Bd),2),we=De[0],Ce=De[1],Oe=(0,n.CR)((0,b.useState)(""),2),xe=Oe[0],Ae=Oe[1],Ie=(0,n.CR)((0,b.useState)(),2),Me=Ie[0],Le=Ie[1],Pe=(0,n.CR)((0,b.useState)({}),2),Re=Pe[0],qe=Pe[1],Fe=(0,n.CR)((0,b.useState)(O.j2),2),Ue=Fe[0],ke=Fe[1],Ve=(0,n.CR)((0,b.useState)(!1),2),Ye=Ve[0],ze=Ve[1],Qe=(0,n.CR)((0,b.useState)(!1),2),Ge=Qe[0],He=Qe[1],Xe=(0,f.$)().t,Je=(0,b.useMemo)((function(){return(0,k.P_)(A.O.Create,D.A.CLASSIFICATION,H)}),[H]),Be=(0,n.CR)((0,b.useState)(x.Vu.INITIAL),2),_e=Be[0],je=Be[1],$e=(0,b.useMemo)((function(){var e;return null!==(e=null==K?void 0:K.disabled)&&void 0!==e&&e}),[null==K?void 0:K.disabled]),Ke=(0,b.useMemo)((function(){return"Tier"===(null==K?void 0:K.name)}),[K]),We=function(e,t){return(0,n.mG)(void 0,void 0,void 0,(function(){var a,r,i;return(0,n.Jh)(this,(function(n){switch(n.label){case 0:ze(!0),Le([]),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,P({arrQueryFields:["usageCount","owner"],parent:e,after:null==t?void 0:t.after,before:null==t?void 0:t.before,limit:O.IV})];case 2:return a=n.sent(),Le(a.data),qe(a.paging),[3,5];case 3:return r=n.sent(),i=(0,Y.HR)(r,Xe("server.entity-fetch-error",{entity:Xe("label.tag-plural")})),(0,z.Eo)(i),fe(i),Le([]),[3,5];case 4:return ze(!1),[7];case 5:return[2]}}))}))},et=function(e){return(0,n.mG)(void 0,void 0,void 0,(function(){var t,a,r,i;return(0,n.Jh)(this,(function(l){switch(l.label){case 0:ve(!0),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,(o=["termCount"],m=1e3,void 0===m&&(m=10),(0,n.mG)(void 0,void 0,void 0,(function(){var e;return(0,n.Jh)(this,(function(t){switch(t.label){case 0:return e=(0,I.JP)(L,o),[4,M.Z.get(e,{params:{limit:m}})];case 1:return[2,t.sent().data]}}))})))];case 2:return t=l.sent(),j(t.data),e&&t.data.length&&(W(t.data[0]),Ae(null!==(i=t.data[0].fullyQualifiedName)&&void 0!==i?i:""),X.push((0,V.$S)(t.data[0].fullyQualifiedName))),[3,5];case 3:return a=l.sent(),r=(0,Y.HR)(a,Xe("server.entity-fetch-error",{entity:Xe("label.tag-category-lowercase")})),(0,z.Eo)(r),fe(r),[3,5];case 4:return ve(!1),[7];case 5:return[2]}var o,m}))}))},tt=function(){ce(void 0),me(!1),ie(!1)},at=(0,b.useCallback)((function(){var e;if(!(0,p.isUndefined)(K)){var t=(0,n.ev)([],(0,n.CR)(_)).filter((function(e){return e.id!==K.id})),a=t[0];j(t),X.push((0,V.$S)(null!==(e=null==a?void 0:a.fullyQualifiedName)&&void 0!==e?e:null==a?void 0:a.name))}}),[K,_,j]);(0,b.useEffect)((function(){K&&(0,n.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,n.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,G(D.A.CLASSIFICATION,null==K?void 0:K.id)];case 1:return e=a.sent(),Ce(e),[3,3];case 2:return t=a.sent(),(0,z.Eo)(t),[3,3];case 3:return[2]}}))}))}),[K]),(0,b.useEffect)((function(){if(J){var e=J.startsWith(O.jV);t=e?O.jV:(0,Y.p2)(J),(0,n.mG)(void 0,void 0,void 0,(function(){var e,a,r,i;return(0,n.Jh)(this,(function(l){switch(l.label){case 0:if((null==K?void 0:K.fullyQualifiedName)===t)return[3,4];ve(!0),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,(o=t,m=["usageCount","termCount"],(0,n.mG)(void 0,void 0,void 0,(function(){var e;return(0,n.Jh)(this,(function(t){switch(t.label){case 0:return e=(0,I.JP)(L+"/name/"+o,m),[4,M.Z.get(e)];case 1:return[2,t.sent().data]}}))})))];case 2:return(e=l.sent())?(j((function(a){return a.map((function(a){return a.fullyQualifiedName===t?(0,n.pi)((0,n.pi)({},a),{termCount:e.termCount}):a}))})),W(e),Ae(null!==(i=e.fullyQualifiedName)&&void 0!==i?i:""),ve(!1)):(0,z.Eo)(Xe("server.unexpected-response")),[3,4];case 3:return a=l.sent(),r=(0,Y.HR)(a,Xe("server.entity-fetch-error",{entity:Xe("label.tag-category-lowercase")})),(0,z.Eo)(r),fe(r),W({name:t,description:""}),ve(!1),[3,4];case 4:return[2]}var o,m}))}))}var t}),[J]),(0,b.useEffect)((function(){et(!J)}),[]),(0,b.useEffect)((function(){var e;K&&We(null!==(e=null==K?void 0:K.fullyQualifiedName)&&void 0!==e?e:"")}),[null==K?void 0:K.fullyQualifiedName]);var rt=(0,b.useCallback)((function(e){var t,a=e.cursorType,r=e.currentPage;if(a){var n=((t={})[a]=Re[a],t.total=Re.total,t);ke(r),We(xe,n)}}),[We,Re,xe]),nt=((0,b.useMemo)((function(){return b.createElement(g.Z,{id:"tags",className:""},b.createElement(w.Z,{loading:Ee},b.createElement("div",{className:"p-y-xs","data-testid":"data-summary-container"},b.createElement(i.Z,{className:"w-full p-x-sm m-b-sm",direction:"vertical",size:12},b.createElement(l.Z.Text,{className:"text-sm font-semibold"},Xe("label.spd")),b.createElement(o.Z,{title:!Je&&Xe("message.no-permission-for-action")},b.createElement(m.Z,{block:!0,className:" text-primary","data-testid":"add-classification",disabled:!Je,onClick:function(){ie((function(e){return!e}))}},b.createElement("div",{className:"d-flex items-center justify-center"},b.createElement(E.ReactComponent,{className:"anticon"}),b.createElement(l.Z.Text,{className:"p-l-xss",ellipsis:{tooltip:!0}},Xe("label.add-entity",{entity:Xe("label.classification")})))))),_.map((function(e){return b.createElement("div",{className:u()("align-center content-box cursor-pointer text-grey-body text-body d-flex p-y-xss p-x-sm m-y-xss",{activeCategory:(null==K?void 0:K.name)===e.name}),"data-testid":"side-panel-classification",key:e.name,onClick:function(){return function(e){var t;W(e),Ae(null!==(t=e.fullyQualifiedName)&&void 0!==t?t:""),X.push((0,V.$S)(e.fullyQualifiedName))}(e)}},b.createElement(l.Z.Paragraph,{className:"ant-typography-ellipsis-custom self-center m-b-0 tag-category","data-testid":"tag-name",ellipsis:{rows:1,tooltip:!0}},(0,U.C_)(e),e.disabled&&b.createElement(s.Z,{className:"m-l-xs badge-grey opacity-60",count:Xe("label.disabled"),"data-testid":"disabled",size:"small"})),(0,F.yh)(e.termCount,"self-center m-l-auto",(null==K?void 0:K.fullyQualifiedName)===e.fullyQualifiedName))})))))}),[Ee,_,K,Je]),(0,b.useMemo)((function(){return(0,k.P_)(A.O.Create,D.A.TAG,H)||we.EditAll}),[H,we])),it=(0,b.useMemo)((function(){return(0,k.P_)(A.O.EditDescription,D.A.TAG,H)||we.EditAll}),[H,we]),lt=(0,b.useMemo)((function(){return(0,k.P_)(A.O.EditDisplayName,D.A.TAG,H)||we.EditAll}),[H,we]),ot=(0,b.useMemo)((function(){return(0,k.P_)(A.O.EditAll,D.A.TAG,H)||we.EditAll}),[H,we]),mt=(0,b.useMemo)((function(){return{createTags:nt,editAll:ot,editDescription:it,editDisplayName:lt}}),[nt,ot,it,lt]),st=(0,b.useMemo)((function(){return!(it||lt||ot)||$e}),[it,lt,ot,$e]),dt=(0,b.useMemo)((function(){return Xe(de?"label.edit-entity":"label.add-entity",{entity:Xe("label.spd")})}),[de,K]);return Ee?b.createElement(T.Z,null):be?b.createElement(h.Z,null,b.createElement(l.Z.Paragraph,{className:"text-center m-auto"},be)):b.createElement(N.Z,{pageTitle:Xe("label.tag-plural")},ge?b.createElement(T.Z,null):b.createElement(v.Z,{classificationPermissions:we,currentClassification:K,currentPage:Ue,deleteTags:Ze,disableEditButton:st,handleActionDeleteTag:function(e){K&&Se({data:{id:e.id,name:e.name,categoryName:null==K?void 0:K.fullyQualifiedName,isCategory:!1,status:"waiting"},state:!0})},handleAddNewTagClick:function(){me(!0)},handleAfterDeleteAction:at,handleCancelEditDescription:function(){ae(!1)},handleEditDescriptionClick:function(){ae(!0)},handleEditTagClick:function(e){me(!0),ce(e)},handlePageChange:rt,handleUpdateClassification:function(e){return(0,n.mG)(void 0,void 0,void 0,(function(){var t,a,r,i,l;return(0,n.Jh)(this,(function(o){switch(o.label){case 0:if((0,p.isUndefined)(K))return[3,5];Ne(!0),t=(0,c.qu)(K,e),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,(m=null!==(i=null==K?void 0:K.id)&&void 0!==i?i:"",s=t,(0,n.mG)(void 0,void 0,void 0,(function(){var e;return(0,n.Jh)(this,(function(t){switch(t.label){case 0:return e={headers:{"Content-type":"application/json-patch+json"}},[4,M.Z.patch(L+"/"+m,s,e)];case 1:return[2,t.sent().data]}}))})))];case 2:return a=o.sent(),j((function(e){return e.map((function(e){return e.fullyQualifiedName===K.fullyQualifiedName?(0,n.pi)((0,n.pi)({},e),a):e}))})),W((function(e){return(0,n.pi)((0,n.pi)({},e),a)})),(null==K?void 0:K.fullyQualifiedName)===e.fullyQualifiedName&&(null==K?void 0:K.name)===e.name||X.push((0,V.$S)(a.fullyQualifiedName)),[3,5];case 3:return r=o.sent(),(null===(l=r.response)||void 0===l?void 0:l.status)===C.NL.CONFLICT?(0,z.Eo)(Xe("server.entity-already-exist",{entity:Xe("label.classification"),entityPlural:Xe("label.classification-lowercase-plural"),name:e.name})):(0,z.Eo)(r,Xe("server.entity-updating-error",{entity:Xe("label.classification-lowercase")})),[3,5];case 4:return ae(!1),Ne(!1),[7];case 5:return[2]}var m,s}))}))},isEditClassification:te,isTagsLoading:Ye,paging:Re,tags:Me}),ne&&b.createElement(ue,{isClassification:!0,showMutuallyExclusive:!0,data:_,header:Xe("label.adding-new-classification"),isEditing:!1,isLoading:Ge,isTier:Ke,visible:ne,onCancel:tt,onSubmit:function(e){return(0,n.mG)(void 0,void 0,void 0,(function(){var t,a,r;return(0,n.Jh)(this,(function(n){switch(n.label){case 0:He(!0),n.label=1;case 1:return n.trys.push([1,4,5,6]),[4,R(e)];case 2:return t=n.sent(),[4,et()];case 3:return n.sent(),X.push((0,V.$S)(t.fullyQualifiedName)),[3,6];case 4:return a=n.sent(),(null===(r=a.response)||void 0===r?void 0:r.status)===C.NL.CONFLICT?(0,z.Eo)(Xe("server.entity-already-exist",{entity:Xe("label.classification"),entityPlural:Xe("label.classification-lowercase-plural"),name:e.name})):(0,z.Eo)(a,Xe("server.create-entity-error",{entity:Xe("label.classification-lowercase")})),[3,6];case 5:return ie(!1),He(!1),[7];case 6:return[2]}}))}))}}),oe&&b.createElement(ue,{header:dt,initialValues:de,isEditing:!(0,p.isUndefined)(de),isLoading:Ge,isSystemTag:(null==de?void 0:de.provider)===r.System,isTier:Ke,permissions:mt,visible:oe,onCancel:tt,onSubmit:function(e){var t=(0,p.omit)(e,"color","iconURL"),a={color:e.color,iconURL:e.iconURL};de?function(e){(0,n.mG)(void 0,void 0,void 0,(function(){var t,a,r,i,l;return(0,n.Jh)(this,(function(o){switch(o.label){case 0:if((0,p.isUndefined)(de))return[3,5];He(!0),t=(0,c.qu)(de,e),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,(m=null!==(i=de.id)&&void 0!==i?i:"",s=t,(0,n.mG)(void 0,void 0,void 0,(function(){var e;return(0,n.Jh)(this,(function(t){switch(t.label){case 0:return e={headers:{"Content-type":"application/json-patch+json"}},[4,M.Z.patch("/spds/"+m,s,e)];case 1:return[2,t.sent().data]}}))})))];case 2:return a=o.sent(),Le((function(e){return null==e?void 0:e.map((function(e){return e.id===de.id?(0,n.pi)((0,n.pi)({},e),a):e}))})),[3,5];case 3:return r=o.sent(),console.log(r),(null===(l=r.response)||void 0===l?void 0:l.status)===C.NL.CONFLICT?(0,z.Eo)(Xe("server.entity-already-exist",{entity:Xe("label.tag"),entityPlural:Xe("label.tag-lowercase-plural"),name:e.name})):(0,z.Eo)(r,Xe("server.entity-updating-error",{entity:Xe("label.tag-lowercase")})),[3,5];case 4:return He(!1),tt(),[7];case 5:return[2]}var m,s}))}))}((0,n.pi)((0,n.pi)((0,n.pi)({},de),t),{style:a})):function(e){(0,n.mG)(void 0,void 0,void 0,(function(){var t,a,r;return(0,n.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,3,4]),[4,q((0,n.pi)((0,n.pi)({},e),{spdClassification:null==K?void 0:K.fullyQualifiedName}))];case 1:return i.sent(),j((function(e){return e.map((function(e){var t;return e.fullyQualifiedName===(null==K?void 0:K.fullyQualifiedName)?(0,n.pi)((0,n.pi)({},e),{termCount:(null!==(t=e.termCount)&&void 0!==t?t:0)+1}):e}))})),We(null!==(a=null==K?void 0:K.fullyQualifiedName)&&void 0!==a?a:""),[3,4];case 2:return t=i.sent(),(null===(r=t.response)||void 0===r?void 0:r.status)===C.NL.CONFLICT?(0,z.Eo)(Xe("server.entity-already-exist",{entity:Xe("label.tag"),entityPlural:Xe("label.tag-lowercase-plural"),name:e.name})):(0,z.Eo)(t,Xe("server.create-entity-error",{entity:Xe("label.tag-lowercase")})),[3,4];case 3:return me(!1),[7];case 4:return[2]}}))}))}((0,n.pi)((0,n.pi)({},t),{style:a}))}}),b.createElement(Z.Z,{bodyText:(0,F.fP)(null!==(t=null===(e=Ze.data)||void 0===e?void 0:e.name)&&void 0!==t?t:"",""),entityName:null!==(d=null===(a=Ze.data)||void 0===a?void 0:a.name)&&void 0!==d?d:"",entityType:Xe("label.classification"),loadingState:_e,visible:Ze.state,onCancel:function(){return Se({data:void 0,state:!1})},onConfirm:function(){var e;(null===(e=Ze.data)||void 0===e?void 0:e.id)&&(je(x.Vu.WAITING),function(e){return(0,n.mG)(void 0,void 0,void 0,(function(){return(0,n.Jh)(this,(function(t){switch(t.label){case 0:return[4,M.Z.delete("/spds/"+e,{params:{recursive:!0,hardDelete:!0}})];case 1:return[2,t.sent().data]}}))}))}(Ze.data.id).then((function(e){var t;e?K&&(je(x.Vu.SUCCESS),j((function(e){return e.map((function(e){var t;return e.fullyQualifiedName===K.fullyQualifiedName?(0,n.pi)((0,n.pi)({},e),{termCount:(null!==(t=e.termCount)&&void 0!==t?t:0)-1}):e}))})),We(null!==(t=null==K?void 0:K.fullyQualifiedName)&&void 0!==t?t:"")):(0,z.Eo)(Xe("server.delete-entity-error",{entity:Xe("label.tag-lowercase")}))})).catch((function(e){(0,z.Eo)(e,Xe("server.delete-entity-error",{entity:Xe("label.tag-lowercase")}))})).finally((function(){Se({data:void 0,state:!1}),je(x.Vu.INITIAL)})))}}))}}}]);