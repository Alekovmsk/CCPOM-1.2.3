"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[6804],{26804:function(e,t,n){n.r(t);var a=n(70655),r=n(34041),i=n(56256),l=n(49409),o=n(4107),s=n(19650),c=n(71577),u=n(23031),d=n(96486),m=n(67294),f=n(15137),h=n(79686),p=n(18927),v=n(26387),b=n(96162),y=n(62761),g=n(16139),w=n(80897),Z=n(93895),E=n(96840),x=n(46321),G=r.Z.Option,J=(0,E.DW)(b.lx.ROLES),C=[{name:(0,u.t)("label.setting-plural"),url:(0,E.si)()},{name:(0,u.t)("label.role-plural"),url:J},{name:(0,u.t)("label.add-new-entity-w",{entity:(0,u.t)("label.role")}),url:""}];t.default=function(){var e=(0,f.k6)(),t=(0,a.CR)((0,m.useState)([]),2),n=t[0],b=t[1],k=(0,a.CR)((0,m.useState)(""),2),N=k[0],P=k[1],R=(0,a.CR)((0,m.useState)(""),2),S=R[0],T=R[1],j=(0,a.CR)((0,m.useState)([]),2),Q=j[0],W=j[1];return(0,m.useEffect)((function(){(0,a.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,w.Ko)("owner,location,roles,teams",void 0,void 0,100)];case 1:return e=n.sent(),b(e.data||[]),[3,3];case 2:return t=n.sent(),(0,x.Eo)(t),[3,3];case 3:return[2]}}))}))}),[]),m.createElement(h.Z,{firstPanel:{children:m.createElement("div",{className:"max-width-md w-9/10 service-form-container","data-testid":"add-role-container"},m.createElement(v.Z,{titleLinks:C}),m.createElement("div",{className:"m-t-md"},m.createElement(i.Z.Paragraph,{className:"text-base","data-testid":"form-title"},(0,u.t)("label.add-new-entity-w",{entity:(0,u.t)("label.role")})),m.createElement(l.Z,{"data-testid":"role-form",id:"role-form",layout:"vertical",onFinish:function(){return(0,a.mG)(void 0,void 0,void 0,(function(){var t,n,r;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:t={name:(0,d.trim)(N),description:S,policies:Q.map((function(e){return e}))},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,w._d)(t)];case 2:return(n=a.sent())&&e.push((0,E.Uy)(n.fullyQualifiedName||"")),[3,4];case 3:return r=a.sent(),(0,x.Eo)((0,Z.B)(r,y.c9.alreadyExist)?(0,u.t)("server.entity-already-exist",{entity:(0,u.t)("label.role"),entityPlural:(0,u.t)("label.role-lowercase-plural"),name:t.name}):r),[3,4];case 4:return[2]}}))}))}},m.createElement(l.Z.Item,{label:(0,u.t)("label.name")+":",name:"name",rules:[{required:!0,max:128,min:1,message:""+(0,u.t)("message.entity-size-in-between",{entity:""+(0,u.t)("label.name"),max:"128",min:"1"})},{pattern:g.$Q,message:(0,u.t)("message.entity-name-validation")}]},m.createElement(o.Z,{"data-testid":"name",placeholder:(0,u.t)("label.role-name"),type:"text",value:N,onChange:function(e){return P(e.target.value)}})),m.createElement(l.Z.Item,{label:(0,u.t)("label.description")+":",name:"description"},m.createElement(p.Z,{height:"200px",initialValue:S,placeHolder:(0,u.t)("message.write-your-description"),style:{margin:0},onTextChange:function(e){return T(e)}})),m.createElement(l.Z.Item,{label:(0,u.t)("label.select-a-policy")+":",name:"policies",rules:[{required:!0,message:(0,u.t)("message.at-least-one-policy")}]},m.createElement(r.Z,{"data-testid":"policies",mode:"multiple",placeholder:(0,u.t)("label.select-a-policy"),value:Q,onChange:function(e){return W(e)}},n.map((function(e){return m.createElement(G,{key:e.fullyQualifiedName},e.displayName||e.name)})))),m.createElement(s.Z,{align:"center",className:"w-full justify-end"},m.createElement(c.Z,{"data-testid":"cancel-btn",type:"link",onClick:function(){e.push(J)}},(0,u.t)("label.cancel")),m.createElement(c.Z,{"data-testid":"submit-btn",form:"role-form",htmlType:"submit",type:"primary"},(0,u.t)("label.submit")))))),minWidth:700,flex:.7},pageTitle:(0,u.t)("label.add-new-entity-w",{entity:(0,u.t)("label.role")}),secondPanel:{children:m.createElement(m.Fragment,null,m.createElement(i.Z.Paragraph,{className:"text-base font-medium"},(0,u.t)("label.add-entity",{entity:(0,u.t)("label.role")})),m.createElement(i.Z.Text,null,(0,u.t)("message.add-role-message"))),className:"p-md service-doc-panel",minWidth:60,overlay:{displayThreshold:200,header:(0,u.t)("label.setup-guide"),rotation:"counter-clockwise"}}})}},80897:function(e,t,n){n.d(t,{$j:function(){return f},F3:function(){return l},Ko:function(){return o},QW:function(){return p},_d:function(){return u},cN:function(){return h},dV:function(){return v},n5:function(){return s},sZ:function(){return m},u$:function(){return d},u7:function(){return c}});var a=n(70655),r=n(2598),i={headers:{"Content-type":"application/json-patch+json"}},l=function(e,t,n,i,l){return void 0===i&&(i=!1),void 0===l&&(l=10),(0,a.mG)(void 0,void 0,void 0,(function(){var o;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return o={default:i,limit:l,fields:e,after:t,before:n},[4,r.Z.get("/roles",{params:o})];case 1:return[2,a.sent().data]}}))}))},o=function(e,t,n,i){return void 0===i&&(i=10),(0,a.mG)(void 0,void 0,void 0,(function(){var l;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return l={limit:i,fields:e,after:t,before:n},[4,r.Z.get("/policies",{params:l})];case 1:return[2,a.sent().data]}}))}))},s=function(e,t){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return[4,r.Z.get("/roles/name/"+e,{params:{fields:t}})];case 1:return[2,n.sent().data]}}))}))},c=function(e,t){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return[4,r.Z.get("/policies/name/"+e,{params:{fields:t}})];case 1:return[2,n.sent().data]}}))}))},u=function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(t){switch(t.label){case 0:return[4,r.Z.post("/roles",e)];case 1:return[2,t.sent().data]}}))}))},d=function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(t){switch(t.label){case 0:return[4,r.Z.post("/policies",e)];case 1:return[2,t.sent().data]}}))}))},m=function(e,t){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return[4,r.Z.patch("/roles/"+t,e,i)];case 1:return[2,n.sent().data]}}))}))},f=function(e,t){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return[4,r.Z.patch("/policies/"+t,e,i)];case 1:return[2,n.sent().data]}}))}))},h=function(){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,r.Z.get("/policies/resources")];case 1:return[2,e.sent().data]}}))}))},p=function(){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,r.Z.get("/policies/functions")];case 1:return[2,e.sent().data]}}))}))},v=function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(t){switch(t.label){case 0:return[4,r.Z.get("/policies/validation/condition/"+e)];case 1:return[2,t.sent()]}}))}))}}}]);