"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[9191,6709,4357,8655,1761],{56709:function(e,t,n){n.r(t),n.d(t,{ReactComponent:function(){return s}});var a,i,r=n(67294);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l.apply(this,arguments)}var s=function(e){return r.createElement("svg",l({viewBox:"0 0 25 27",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"img"},e),a||(a=r.createElement("g",{clipPath:"url(#gchat_svg__a)"},r.createElement("path",{d:"M5.674 14.525V6.05H1.97C.881 6.05 0 6.937 0 8.027v17.517c0 .881 1.064 1.32 1.684.699l4.073-4.073h11.598a1.97 1.97 0 0 0 1.971-1.971v-3.703H7.65a1.974 1.974 0 0 1-1.976-1.971Z",fill:"#00AC47"}),r.createElement("path",{d:"M23.029.46H7.65A1.97 1.97 0 0 0 5.68 2.433v3.62h11.676a1.97 1.97 0 0 1 1.971 1.97v8.47h3.703A1.97 1.97 0 0 0 25 14.52V2.432A1.97 1.97 0 0 0 23.029.461Z",fill:"#5BB974"}),r.createElement("path",{d:"M17.355 6.05H5.674v8.47a1.97 1.97 0 0 0 1.97 1.97h11.677V8.028a1.966 1.966 0 0 0-1.966-1.976Z",fill:"#00832D"}))),i||(i=r.createElement("defs",null,r.createElement("clipPath",{id:"gchat_svg__a"},r.createElement("path",{fill:"#fff",transform:"translate(0 .46)",d:"M0 0h25v26.074H0z"})))))};t.default="data:image/svg+xml;base64,PHN2ZyAgdmlld0JveD0iMCAwIDI1IDI3IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfNDE1NF8yNDg2MCkiPgo8cGF0aCBkPSJNNS42NzM3NiAxNC41MjQ5VjYuMDUwNzhIMS45NzEyMUMwLjg4MTMxIDYuMDUwNzggMCA2LjkzNzMxIDAgOC4wMjcyMVYyNS41NDM5QzAgMjYuNDI1MiAxLjA2MzgzIDI2Ljg2MzMgMS42ODQ0IDI2LjI0MjdMNS43NTcyIDIyLjE2OTlIMTcuMzU1QzE4LjQ0NDkgMjIuMTY5OSAxOS4zMjYyIDIxLjI4ODYgMTkuMzI2MiAyMC4xOTg3VjE2LjQ5NjFINy42NTAxOUM2LjU2MDI4IDE2LjQ5NjEgNS42NzM3NiAxNS42MTQ4IDUuNjczNzYgMTQuNTI0OVoiIGZpbGw9IiMwMEFDNDciLz4KPHBhdGggZD0iTTIzLjAyODggMC40NjA5MzhINy42NTAxN0M2LjU2MDI2IDAuNDYwOTM4IDUuNjc4OTYgMS4zNDIyNSA1LjY3ODk2IDIuNDMyMTVWNi4wNTEyNkgxNy4zNTVDMTguNDQ0OSA2LjA1MTI2IDE5LjMyNjIgNi45MzI1NyAxOS4zMjYyIDguMDIyNDdWMTYuNDkxNEgyMy4wMjg4QzI0LjExODcgMTYuNDkxNCAyNSAxNS42MTAxIDI1IDE0LjUyMDJWMi40MzIxNUMyNSAxLjM0MjI1IDI0LjExODcgMC40NjA5MzggMjMuMDI4OCAwLjQ2MDkzOFoiIGZpbGw9IiM1QkI5NzQiLz4KPHBhdGggZD0iTTE3LjM1NSA2LjA1MDc4SDUuNjczNzFWMTQuNTE5N0M1LjY3MzcxIDE1LjYwOTYgNi41NTUwMiAxNi40OTA5IDcuNjQ0OTIgMTYuNDkwOUgxOS4zMjFWOC4wMjcyMUMxOS4zMjYyIDYuOTM3MzEgMTguNDQ0OSA2LjA1MDc4IDE3LjM1NSA2LjA1MDc4WiIgZmlsbD0iIzAwODMyRCIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzQxNTRfMjQ4NjAiPgo8cmVjdCB3aWR0aD0iMjUiIGhlaWdodD0iMjYuMDc0MyIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgMC40NjA5MzgpIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg=="},4357:function(e,t,n){n.r(t),n.d(t,{ReactComponent:function(){return s}});var a,i,r=n(67294);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l.apply(this,arguments)}var s=function(e){return r.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",role:"img"},e),a||(a=r.createElement("g",{clipPath:"url(#ic-export_svg__a)"},r.createElement("path",{stroke:"#37352F",strokeLinecap:"round",strokeWidth:1.5,d:"m17.114 6.886-4.345-5.214a1 1 0 0 0-1.537 0L6.887 6.886"}),r.createElement("rect",{width:1.534,height:14.318,x:11.232,y:1.773,fill:"#37352F",rx:.767}),r.createElement("rect",{width:22.5,height:1.534,x:.75,y:21.715,fill:"#37352F",rx:.767}))),i||(i=r.createElement("defs",null,r.createElement("clipPath",{id:"ic-export_svg__a"},r.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))};t.default="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGcgY2xpcC1wYXRoPSJ1cmwoI2EpIj48cGF0aCBzdHJva2U9IiMzNzM1MkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxLjUiIGQ9Im0xNy4xMTQgNi44ODYtNC4zNDUtNS4yMTRhMSAxIDAgMCAwLTEuNTM3IDBMNi44ODcgNi44ODYiLz48cmVjdCB3aWR0aD0iMS41MzQiIGhlaWdodD0iMTQuMzE4IiB4PSIxMS4yMzIiIHk9IjEuNzczIiBmaWxsPSIjMzczNTJGIiByeD0iLjc2NyIvPjxyZWN0IHdpZHRoPSIyMi41IiBoZWlnaHQ9IjEuNTM0IiB4PSIuNzUiIHk9IjIxLjcxNSIgZmlsbD0iIzM3MzUyRiIgcng9Ii43NjciLz48L2c+PGRlZnM+PGNsaXBQYXRoIGlkPSJhIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAwaDI0djI0SDB6Ii8+PC9jbGlwUGF0aD48L2RlZnM+PC9zdmc+"},8655:function(e,t,n){n.r(t),n.d(t,{ReactComponent:function(){return s}});var a,i,r=n(67294);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l.apply(this,arguments)}var s=function(e){return r.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",role:"img"},e),a||(a=r.createElement("g",{clipPath:"url(#ic-import_svg__a)"},r.createElement("path",{stroke:"#37352F",strokeLinecap:"round",strokeWidth:1.5,d:"m17.114 9.953-4.345 5.215a1 1 0 0 1-1.537 0L6.887 9.953"}),r.createElement("rect",{width:1.534,height:14.318,fill:"#37352F",rx:.767,transform:"matrix(1 0 0 -1 11.232 15.066)"}),r.createElement("rect",{width:22.5,height:1.534,x:.75,y:21.715,fill:"#37352F",rx:.767}))),i||(i=r.createElement("defs",null,r.createElement("clipPath",{id:"ic-import_svg__a"},r.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))};t.default="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGcgY2xpcC1wYXRoPSJ1cmwoI2EpIj48cGF0aCBzdHJva2U9IiMzNzM1MkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxLjUiIGQ9Im0xNy4xMTQgOS45NTMtNC4zNDUgNS4yMTVhMSAxIDAgMCAxLTEuNTM3IDBMNi44ODcgOS45NTMiLz48cmVjdCB3aWR0aD0iMS41MzQiIGhlaWdodD0iMTQuMzE4IiBmaWxsPSIjMzczNTJGIiByeD0iLjc2NyIgdHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgLTEgMTEuMjMyIDE1LjA2NikiLz48cmVjdCB3aWR0aD0iMjIuNSIgaGVpZ2h0PSIxLjUzNCIgeD0iLjc1IiB5PSIyMS43MTUiIGZpbGw9IiMzNzM1MkYiIHJ4PSIuNzY3Ii8+PC9nPjxkZWZzPjxjbGlwUGF0aCBpZD0iYSI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTAgMGgyNHYyNEgweiIvPjwvY2xpcFBhdGg+PC9kZWZzPjwvc3ZnPg=="},71761:function(e,t,n){n.r(t),n.d(t,{ReactComponent:function(){return s}});var a,i,r=n(67294);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l.apply(this,arguments)}var s=function(e){return r.createElement("svg",l({viewBox:"0 0 105 65",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"img"},e),a||(a=r.createElement("path",{d:"M36.902 2.538c-7.178-.552-21.532 0-21.532 16.011 0 14.134 6.625 18.403 9.938 18.77v6.073L10.4 51.674c-2.577 1.472-7.73 5.742-7.73 11.042h22.637l18.771-9.938v-8.281c-7.177-7.178-8.833-14.486-8.833-24.293 0-11.664 6.073-17.666 17.667-17.666",stroke:"currentColor",strokeWidth:4,strokeLinecap:"round"})),i||(i=r.createElement("path",{d:"M68.373 2.538c7.177-.552 21.532 0 21.532 16.011 0 14.134-6.626 18.403-9.938 18.77v6.073l14.907 8.282c2.576 1.472 7.729 5.742 7.729 11.042H79.967l-18.772-9.938v-8.281c7.178-7.178 8.834-14.486 8.834-24.293 0-11.664-6.073-17.666-17.668-17.666",stroke:"currentColor",strokeWidth:4,strokeLinecap:"round"})))};t.default="data:image/svg+xml;base64,Cjxzdmcgdmlld0JveD0iMCAwIDEwNSA2NSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTM2LjkwMTkgMi41MzgxMUMyOS43MjQ1IDEuOTg2IDE1LjM2OTcgMi41MzcxIDE1LjM2OTcgMTguNTQ5M0MxNS4zNjk3IDMyLjY4MzMgMjEuOTk1IDM2Ljk1MTcgMjUuMzA3NiAzNy4zMTkyVjQzLjM5MjRMMTAuNDAwNyA1MS42NzRDNy44MjQxNyA1My4xNDYzIDIuNjcxMTQgNTcuNDE2IDIuNjcxMTQgNjIuNzE2MkgyNS4zMDc2TDQ0LjA3OTQgNTIuNzc4MlY0NC40OTY2QzM2LjkwMTkgMzcuMzE5MiAzNS4yNDU2IDMwLjAxMDggMzUuMjQ1NiAyMC4yMDM4QzM1LjI0NTYgOC41NDA0NSA0MS4zMTg4IDIuNTM4MTEgNTIuOTEzMSAyLjUzODExIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSI0IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KPHBhdGggZD0iTTY4LjM3MjUgMi41MzgxMUM3NS41NDk5IDEuOTg2IDg5LjkwNDcgMi41MzcxIDg5LjkwNDcgMTguNTQ5M0M4OS45MDQ3IDMyLjY4MzMgODMuMjc5NCAzNi45NTE3IDc5Ljk2NjggMzcuMzE5MlY0My4zOTI0TDk0Ljg3MzcgNTEuNjc0Qzk3LjQ1MDIgNTMuMTQ2MyAxMDIuNjAzIDU3LjQxNiAxMDIuNjAzIDYyLjcxNjJINzkuOTY2OEw2MS4xOTUgNTIuNzc4MlY0NC40OTY2QzY4LjM3MjUgMzcuMzE5MiA3MC4wMjg4IDMwLjAxMDggNzAuMDI4OCAyMC4yMDM4QzcwLjAyODggOC41NDA0NSA2My45NTU2IDIuNTM4MTEgNTIuMzYxMyAyLjUzODExIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSI0IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KPC9zdmc+Cg=="},52873:function(e,t,n){var a=n(8081),i=n.n(a),r=n(23645),l=n.n(r)()(i());l.push([e.id,'/*\n *  Copyright 2022 Collate.\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n/*\n *  Copyright 2022 Collate.\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n/* navbar+tab_height+padding = 64+46+12  */\n.team-list-container {\n  padding: 20px;\n}\n.team-list-container .ant-btn {\n  border-radius: 4px;\n}\n.teams-list-table .ant-table-row .ant-table-cell:first-child,\n.list-table .ant-table-row .ant-table-cell:first-child,\n.teams-list-table .ant-table-thead .ant-table-cell:first-child,\n.list-table .ant-table-thead .ant-table-cell:first-child {\n  padding-left: 16px;\n}\n.remove-icon .ant-btn {\n  height: 22px;\n  width: 22px;\n}\n.roles-and-policy > .ant-space-item:first-child {\n  align-self: flex-end;\n}\n.teams-list-table .ant-table-thead tr > th {\n  border-right: 0px !important;\n  border-bottom: 1px solid #0000001a;\n}\n.teams-list-table .ant-table-bordered .ant-table-container .ant-table-content table tbody tr td {\n  border-right: none;\n  background: #f8f9fa;\n}\n.teams-list-table .ant-table-bordered .ant-table-container .ant-table-content table tbody tr .ant-table-cell-row-hover {\n  background: #f1f1f3;\n}\n.teams-list-table .ant-table-bordered .ant-table-container .ant-table-content table tbody .ant-table-row-level-0 td {\n  background: #fff;\n}\n.teams-list-table .ant-table-bordered .ant-table-container .ant-table-content table tbody .ant-table-row-level-0 .ant-table-cell-row-hover {\n  background: #f1f1f3;\n}\n.teams-list-table .ant-table-bordered .ant-table-container .ant-table-content table tbody .drop-over-having-child td {\n  background: #e8f4ff;\n}\n.teams-layout {\n  margin: -16px -16px 0 -16px;\n}\n.teams-layout .ant-card-head-title {\n  padding-top: 0;\n  padding-bottom: 12px;\n}\n.teams-layout .teams-profile {\n  background-color: #0950c51a;\n}\n.teams-layout .teams-profile-container {\n  background: transparent;\n}\n.teams-layout .teams-profile-container .ant-card {\n  background: none;\n}\n.teams-layout .teams-profile-container .ant-collapse-arrow {\n  top: 35px !important;\n}\n.teams-layout .teams-profile-container .domain-link {\n  font-size: 14px;\n}\n.teams-layout .teams-tabs-content-container {\n  width: 100%;\n}\n.teams-layout .teams-tabs-content-container .teams-scroll-component {\n  width: 100%;\n  height: calc(100vh - 120px);\n  overflow-y: scroll;\n}\n.team-assets-right-panel .summary-panel-container {\n  height: 100%;\n  border: 0;\n}\n.ant-collapse-borderless {\n  background-color: transparent !important;\n}\n',""]),t.Z=l},88978:function(e,t,n){n.d(t,{H$:function(){return p},oz:function(){return a},Nz:function(){return v},SX:function(){return f}});var a,i=n(23031),r=n(70655),l=n(94184),s=n.n(l),o=n(96486),c=n(67294),u=n(59240),d=n(5200),m=function(e){var t=e.index,n=e.handleMoveRow,a=e.handleTableHover,i=e.className,l=e.record,m=e.style,f=(0,r._T)(e,["index","handleMoveRow","handleTableHover","className","record","style"]),v=(0,c.useRef)(null),y=(0,r.CR)((0,u.L)({accept:p,collect:function(e){var n=((null==e?void 0:e.getItem())||{}).index;return n===t?{}:{isOver:e.isOver(),dropClassName:n!==t?"drop-over-child":""}},hover:function(){null==a||a((0,o.isUndefined)(t))},drop:function(e){var t=e.record;n(t,l)}}),2),h=y[0],b=h.isOver,E=h.dropClassName,g=y[1],M=(0,r.CR)((0,d.c)({type:p,item:{record:l,index:t},collect:function(e){return{isDragging:e.isDragging()}}}),2),C=M[0].isDragging;return g((0,M[1])(v)),(0,c.useEffect)((function(){C||null==a||a(!1)}),[C]),c.createElement("tr",(0,r.pi)({className:s()(b?E:"",i),ref:v,style:(0,r.pi)({cursor:"move"},m)},f))},p="DraggableBodyRow",f={header:{row:m},body:{row:m}};!function(e){e.MS_TEAMS="msTeams",e.SLACK="slack",e.G_CHAT="gChat",e.GENERIC="generic"}(a||(a={}));var v=[{label:(0,i.t)("label.none"),value:""},{label:(0,i.t)("label.ms-team-plural"),value:a.MS_TEAMS},{label:(0,i.t)("label.slack"),value:a.SLACK},{label:(0,i.t)("label.g-chat"),value:a.G_CHAT}]},92496:function(e,t,n){var a;n.d(t,{x:function(){return a}}),function(e){e.USERS="users",e.TEAMS="teams"}(a||(a={}))},9191:function(e,t,n){n.r(t),n.d(t,{default:function(){return Dt}});var a,i=n(70655),r=n(34901),l=n(96486),s=n(67294),o=n(68432),c=n(15137),u=n(52046),d=n(95137),m=n(83716),p=n(69523),f=n(8752),v=n(79839),y=n(49101),h=n(71230),b=n(15746),E=n(56256),g=n(12028),M=n(94199),C=n(71577),N=n(19650),T=n(51890),I=n(27279),w=n(91894),x=n(25499),Z=n(50146),D=n(94184),S=n.n(D),A=n(80129),k=n.n(A),z=n(76410),j=n(38780),R=n(4357),L=n(8655),O=n(16687),P=n(32481),G=n(71761),U=n(14128),B=n(6711),H=n(15335),J=n(13927),Y=n(8035),Q=n(62761),W=n(92693),F=n(96162),_=n(32337),V=n(61105),X=n(64632),K=n(22653),q=n(55546),$=n(72819),ee=n(48217),te=n(85087),ne=n(88121),ae=n(92496),ie=n(39117),re=n(11484),le=n(93895),se=n(24671),oe=n(39570),ce=n(96840),ue=n(23031),de=n(56709),me=n(38100),pe=n(29452),fe=n(88978),ve=function(e,t){return e.filter((function(e){return e.deleted===t}))},ye=function(e,t){return(0,ue.t)("message.delete-team-message",{teamName:e,deleteType:t})},he=function(e){if(!(0,l.isUndefined)(e))return(0,le.HU)(e)},be=function(e){switch(e){case ee.C.Organization:return[ee.C.BusinessUnit,ee.C.Division,ee.C.Department,ee.C.Group];case ee.C.BusinessUnit:case ee.C.Division:return[ee.C.Division,ee.C.Department,ee.C.Group];case ee.C.Department:return[ee.C.Department,ee.C.Group];case ee.C.Group:return[ee.C.Group]}},Ee=n(46321),ge=n(43633),Me=n(39541),Ce=n(59817),Ne=n(26387),Te=n(67167),Ie=n(2307),we=n(76),xe=n(52114),Ze=n(38212),De=n(24135),Se=function(e){var t=e.list,n=e.type,a=e.onDelete,i=e.hasAccess,r=e.isTeamDeleted,l=(0,o.$)().t,c=(0,s.useMemo)((function(){return[{title:l("label.name"),dataIndex:"name",width:"200px",key:"name",render:function(e,t){var a="";switch(n){case X.py.POLICY:a=(0,ce.Hr)(t.fullyQualifiedName||"");break;case X.py.ROLE:a=(0,ce.Uy)(t.fullyQualifiedName||"")}return s.createElement(we.Link,{className:"cursor-pointer","data-testid":"entity-name",to:a},(0,se.C_)(t))}},{title:l("label.description"),dataIndex:"description",key:"description",render:function(e,t){return s.createElement(De.Z,{markdown:(null==t?void 0:t.description)||""})}},{title:l("label.action-plural"),dataIndex:"actions",width:"80px",key:"actions",render:function(e,t){return s.createElement(M.Z,{placement:"bottomRight",title:i?l("label.remove"):xe.oH},s.createElement(C.Z,{"data-testid":"remove-action-"+(0,se.C_)(t),disabled:!i,type:"text",onClick:function(){return a(t)}},s.createElement(Ze.ZP,{alt:"remove",icon:Ze.PJ.ICON_REMOVE,title:"Remove"})))}}].filter((function(e){return"actions"!==e.key||!r}))}),[r]);return s.createElement(Ie.Z,{bordered:!0,className:"list-table",columns:c,dataSource:t,pagination:!1,rowKey:"id",size:"small"})};!function(e){e.TEAMS="teams",e.USERS="users",e.ASSETS="assets",e.ROLES="roles",e.POLICIES="policies"}(a||(a={}));var Ae,ke=n(19586),ze=n(14129),je=n(57865),Re=n(89368),Le=n(37565);!function(e){e.BusinessUnit="BusinessUnit",e.Department="Department",e.Division="Division",e.Group="Group",e.Organization="Organization"}(Ae||(Ae={}));var Oe=n(38333),Pe=n(93379),Ge=n.n(Pe),Ue=n(7795),Be=n.n(Ue),He=n(90569),Je=n.n(He),Ye=n(3565),Qe=n.n(Ye),We=n(19216),Fe=n.n(We),_e=n(44589),Ve=n.n(_e),Xe=n(52873),Ke={};Ke.styleTagTransform=Ve(),Ke.setAttributes=Qe(),Ke.insert=Je().bind(null,"head"),Ke.domAPI=Be(),Ke.insertStyleElement=Fe(),Ge()(Xe.Z,Ke),Xe.Z&&Xe.Z.locals&&Xe.Z.locals;var qe=function(e){var t,n,a=e.currentTeam,r=e.data,c=e.onTeamExpand,u=e.isFetchingAllTeamAdvancedDetails,d=(0,o.$)().t,m=(0,i.CR)((0,s.useState)(!1),2),p=m[0],f=m[1],v=(0,i.CR)((0,s.useState)(!1),2),y=v[0],h=v[1],b=(0,i.CR)((0,s.useState)(),2),g=b[0],M=b[1],C=(0,s.useMemo)((function(){return[{title:d("label.team-plural"),dataIndex:"teams",className:"whitespace-nowrap",key:"teams",render:function(e,t){return s.createElement(we.Link,{className:"link-hover",to:(0,ce.KH)(encodeURIComponent(t.fullyQualifiedName||t.name))},(0,se.C_)(t))}},{title:d("label.type"),dataIndex:"teamType",width:120,key:"teamType"},{title:d("label.sub-team-plural"),dataIndex:"childrenCount",width:100,key:"subTeams",render:function(e){return u?s.createElement(ke.Z,{active:u,paragraph:{rows:0}}):null!=e?e:0}},{title:d("label.user-plural"),dataIndex:"userCount",width:60,key:"users",render:function(e){return u?s.createElement(ke.Z,{active:u,paragraph:{rows:0}}):null!=e?e:0}},{title:d("label.entity-count",{entity:d("label.asset")}),dataIndex:"owns",width:120,key:"owns",render:function(e){var t;return u?s.createElement(ke.Z,{active:u,paragraph:{rows:0}}):null!==(t=null==e?void 0:e.length)&&void 0!==t?t:0}},{title:d("label.description"),dataIndex:"description",width:300,key:"description",render:function(e){return s.createElement(E.Z.Paragraph,{className:"m-b-0",ellipsis:{rows:2},title:e},(0,l.isEmpty)(e)?"--":e)}}]}),[r,u,c]),N=(0,s.useCallback)((function(e,t){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){return e.id===t.id?[2]:t.teamType===Ae.Group?((0,Ee.Eo)(d("message.error-team-transfer-message")),[2]):(M({from:e,to:t}),f(!0),[2])}))}))}),[]),T=(0,s.useMemo)((function(){return(0,i.pi)((0,i.pi)({},(0,Oe.Bn)(!0)),{onExpand:function(e,t){e&&(0,l.isEmpty)(t.children)&&c(!1,t.fullyQualifiedName,!0)}})}),[c]);return s.createElement(s.Fragment,null,s.createElement(ze.W,{backend:je.PD},s.createElement(Le.Z,{bordered:!0,className:"teams-list-table",columns:C,components:fe.SX,"data-testid":"team-hierarchy-table",dataSource:r,expandable:T,loading:y,locale:{emptyText:s.createElement(Re.Z,null)},pagination:!1,rowKey:"name",size:"small",onRow:function(e,t){return{index:t,handleMoveRow:N,record:e}}})),s.createElement(Z.Z,{centered:!0,destroyOnClose:!0,closable:!1,confirmLoading:y,"data-testid":"confirmation-modal",maskClosable:!1,okText:d("label.confirm"),open:p,title:d("label.move-the-entity",{entity:d("label.team-v")}),onCancel:function(){return f(!1)},onOk:function(){return(0,i.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:if(!g)return[3,6];h(!0),n.label=1;case 1:return n.trys.push([1,4,5,6]),[4,(0,re.Xv)(g.from.name,["users","defaultRoles","policies","owner","parents","children"],"all")];case 2:return e=n.sent(),[4,(0,re.fs)((r=e,s=[g.to.id],o=(0,l.omit)((0,l.cloneDeep)(r),["id","fullyQualifiedName","href","version","updatedAt","updatedBy","userCount","childrenCount","owns","changeDescription","deleted","inheritedRoles","key"]),u=o.policies,m=o.users,p=o.defaultRoles,v=o.children,(0,i.pi)((0,i.pi)({},o),{teamType:o.teamType,defaultRoles:he(p),children:o.teamType===ee.C.Group?void 0:he(v),parents:s,policies:he(u),users:he(m)})))];case 3:return n.sent(),c(!0,null==a?void 0:a.name),(0,Ee.XA)(d("message.team-moved-success")),[3,6];case 4:return t=n.sent(),(0,Ee.Eo)(t,d("server.team-moved-error")),[3,6];case 5:return h(!1),f(!1),[7];case 6:return[2]}var r,s,o,u,m,p,v}))}))}},s.createElement(le.u1,{i18nKey:"message.entity-transfer-message",renderElement:s.createElement("strong",null),values:{from:null===(t=null==g?void 0:g.from)||void 0===t?void 0:t.name,to:null===(n=null==g?void 0:g.to)||void 0===n?void 0:n.name,entity:d("label.team-lowercase")}})))},$e=n(54549),et=n(79508),tt=n(16165),nt=n(68855),at=n(4107),it=function(e){var t=e.currentTeam,n=e.updateTeamHandler,a=e.entityPermissions,r=(0,o.$)().t,l=(0,i.CR)((0,s.useState)(!1),2),c=l[0],u=l[1],m=(0,i.CR)((0,s.useState)(t?t.displayName:""),2),p=m[0],f=m[1],v=(0,te.a)().isAdminUser,y=(0,d.Eu)().isAuthDisabled,h=(0,s.useMemo)((function(){return t}),[t]).owner,g=(0,s.useMemo)((function(){var e,t;return(0,le.Xp)(null!==(e=null==h?void 0:h.type)&&void 0!==e?e:"",null!==(t=null==h?void 0:h.id)&&void 0!==t?t:"")}),[h]),T=(0,s.useMemo)((function(){return{hasEditPermission:a.EditAll,hasEditDisplayNamePermission:a.EditDisplayName||a.EditAll,hasAccess:y||v}}),[a]),I=T.hasEditDisplayNamePermission,w=T.hasAccess,x=function(){return(0,i.mG)(void 0,void 0,Promise,(function(){var e;return(0,i.Jh)(this,(function(a){switch(a.label){case 0:return p&&t?(e=(0,i.pi)((0,i.pi)({},t),{displayName:p}),[4,n(e)]):[3,2];case 1:a.sent(),a.label=2;case 2:return u(!1),[2]}}))}))},Z=(0,s.useMemo)((function(){return c?s.createElement(N.Z,null,s.createElement(at.Z,{className:"w-48","data-testid":"team-name-input",placeholder:r("message.enter-comma-separated-field",{field:r("label.term-lowercase")}),type:"text",value:p,onChange:function(e){return f(e.target.value)}}),s.createElement(N.Z,{"data-testid":"buttons",size:4},s.createElement(C.Z,{className:"rounded-4 text-sm p-xss","data-testid":"cancelAssociatedTag",type:"primary",onMouseDown:function(){return u(!1)}},s.createElement($e.Z,null)),s.createElement(C.Z,{className:"rounded-4 text-sm p-xss","data-testid":"saveAssociatedTag",type:"primary",onMouseDown:x},s.createElement(et.Z,null)))):s.createElement(N.Z,{align:"center"},s.createElement(N.Z,{align:"baseline"},s.createElement(E.Z.Title,{className:"m-b-0 w-max-200","data-testid":"team-heading",ellipsis:{tooltip:!0},level:5},p),(w||g)&&!t.deleted&&s.createElement(M.Z,{placement:"right",title:I?r("label.edit-entity",{entity:r("label.display-name")}):r("message.no-permission-for-action")},s.createElement(tt.Z,{className:"align-middle",component:j.ReactComponent,"data-testid":"edit-team-name",disabled:!I,style:{fontSize:"16px"},onClick:function(){return u(!0)}}))),t.deleted&&s.createElement(b.Z,{className:"text-xs"},s.createElement("div",{className:"deleted-badge-button","data-testid":"deleted-badge"},s.createElement(nt.Z,{className:"m-r-xss font-medium text-xs"}),r("label.deleted"))))}),[p,c,I,t]);return(0,s.useEffect)((function(){var e;t&&f(null!==(e=t.displayName)&&void 0!==e?e:t.name)}),[t]),s.createElement(N.Z,{size:4},Z)},rt=n(53014),lt=n(49409),st=n(27049),ot=n(16139),ct=n(8642),ut=n(24053),dt=n(34041),mt=function(e){var t=e.handleShowTypeSelector,n=e.showGroupOption,a=e.teamType,r=e.updateTeamType,l=e.parentTeamType,o=(0,i.CR)((0,s.useState)(a),2),c=o[0],u=o[1],d=(0,s.useMemo)((function(){var e=be(l).map((function(e){return{label:e,value:e}}));return n?e:e.filter((function(e){return e.value!==ee.C.Group}))}),[l,n]);return s.createElement(N.Z,{align:"center",className:"team-type-select","data-testid":"team-type-select",size:4},s.createElement(dt.Z,{defaultActiveFirstOption:!0,options:d,value:c,onSelect:function(e){u(e)}}),s.createElement(N.Z,{className:"m-l-xs",size:4},s.createElement(C.Z,{className:"h-8 p-x-xss","data-testid":"cancel-btn",size:"small",type:"primary",onClick:function(){t(!1)}},s.createElement($e.Z,null)),s.createElement(C.Z,{className:"h-8 p-x-xss","data-testid":"save-btn",size:"small",type:"primary",onClick:function(){r&&r(c)}},s.createElement(et.Z,null))))},pt=n(50963),ft=function(e){var t=e.subscription,n=e.hasEditPermission,a=e.updateTeamSubscription,r=(0,i.CR)((0,pt.useForm)(),1)[0],c=(0,o.$)().t,u=(0,i.CR)((0,s.useState)(!1),2),d=u[0],m=u[1],p=(0,i.CR)((0,s.useState)(!1),2),f=p[0],v=p[1],y=(0,s.useCallback)((function(e){var t=function(e){switch(e){case fe.oz.SLACK:return pe.ReactComponent;case fe.oz.G_CHAT:return de.ReactComponent;default:return me.ReactComponent}}(e);return s.createElement(t,{className:"align-middle","data-testid":e+"-icon",height:20,width:20})}),[]),h=(0,l.isEmpty)(lt.Z.useWatch("webhook",r)),b=(0,s.useCallback)((function(e,t){return s.createElement(E.Z.Link,{href:t.endpoint,target:"_blank"},y(e))}),[]),g=(0,s.useMemo)((function(){var e,a=null===(e=Object.entries(null!=t?t:{}))||void 0===e?void 0:e[0];return(0,l.isEmpty)(t)?n?s.createElement("div",{className:"flex-center gap-2"},s.createElement(E.Z.Text,{className:"font-medium","data-testid":"subscription-no-data"},c("label.none")),s.createElement(j.ReactComponent,{className:"cursor-pointer",color:Q.MJ,"data-testid":"edit-team-subscription",width:14,onClick:function(){return m(!0)}})):s.createElement(E.Z.Text,{className:"font-medium","data-testid":"subscription-no-data"},Q.lH):b(a[0],a[1])}),[t,n,m]);return(0,s.useEffect)((function(){h&&r.setFieldValue("endpoint","")}),[h]),(0,s.useEffect)((function(){if(t){var e=Object.entries(t)[0];r.setFieldsValue({webhook:e[0],endpoint:e[1].endpoint})}}),[t,d]),s.createElement(N.Z,{align:"center","data-testid":"teams-subscription"},s.createElement(E.Z.Text,{className:"right-panel-label font-normal"},c("label.subscription")+" :"),g,!d&&!(0,l.isEmpty)(t)&&n&&s.createElement(j.ReactComponent,(0,i.pi)({className:"cursor-pointer align-middle",color:Q.MJ,"data-testid":"edit-team-subscription"},Q.K$,{onClick:function(){return m(!0)}})),d&&s.createElement(Z.Z,{centered:!0,open:!0,closable:!1,confirmLoading:f,maskClosable:!1,okButtonProps:{form:"subscription-form",type:"primary",htmlType:"submit"},okText:c("label.confirm"),title:c("label.add-entity",{entity:c("label.subscription")}),onCancel:function(){return m(!1)}},s.createElement(lt.Z,{"data-testid":"subscription-modal",form:r,id:"subscription-form",layout:"vertical",onFinish:function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:v(!0),t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,a(h?void 0:e)];case 2:case 3:return t.sent(),[3,5];case 4:return m(!1),v(!1),[7];case 5:return[2]}}))}))}},s.createElement(lt.Z.Item,{label:c("label.webhook"),name:"webhook"},s.createElement(dt.Z,{options:fe.Nz,placeholder:c("label.select-field",{field:c("label.condition")})})),s.createElement(lt.Z.Item,{label:c("label.endpoint"),name:"endpoint",rules:[{required:!h,message:c("label.field-required-plural",{field:c("label.endpoint")})},{type:"url",message:c("message.endpoint-should-be-valid")}]},s.createElement(at.Z,{disabled:h,placeholder:c("label.enter-entity-value",{entity:c("label.endpoint")})})))))},vt=function(e){var t,n=e.parentTeams,a=e.isGroupType,r=e.childTeamsCount,c=e.entityPermissions,u=e.currentTeam,m=e.updateTeamHandler,p=e.isTeamDeleted,f=(0,o.$)().t,v=(0,te.a)().isAdminUser,y=(0,d.Eu)().isAuthDisabled,h=(0,i.CR)((0,s.useState)(!1),2),b=h[0],g=h[1],T=(0,i.CR)((0,s.useState)(!1),2),I=T[0],w=T[1],x=(0,d.Eu)().currentUser,Z=(0,s.useMemo)((function(){return u}),[u]),D=Z.email,A=Z.owner,k=Z.teamType,z=Z.id,R=Z.fullyQualifiedName,L=(0,s.useMemo)((function(){return{hasEditPermission:c.EditAll&&!p,hasAccess:y||v&&!p}}),[c,p]),O=L.hasEditPermission,P=L.hasAccess,G=(0,s.useMemo)((function(){var e;return(c.EditAll||(null===(e=u.owner)||void 0===e?void 0:e.id)===(null==x?void 0:x.id))&&!p}),[c,u,x,p]),U=function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return u?(t=(0,i.pi)((0,i.pi)({},u),{email:(0,l.isEmpty)(e.email)?void 0:e.email}),[4,m(t)]):[3,2];case 1:n.sent(),n.label=2;case 2:return g(!1),[2]}}))}))},B=(0,s.useCallback)((function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return u?(t=(0,i.pi)((0,i.pi)({},u),{owner:e}),[4,m(t)]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))}),[u]),H=function(e){return(0,i.mG)(void 0,void 0,Promise,(function(){var t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return u?(t=(0,i.pi)((0,i.pi)({},u),{teamType:e}),[4,m(t)]):[3,2];case 1:n.sent(),w(!1),n.label=2;case 2:return[2]}}))}))},J=(0,s.useMemo)((function(){return s.createElement(N.Z,{align:"center",size:4},s.createElement(E.Z.Text,{className:"text-grey-muted"},f("label.email")+" :"),b?s.createElement(lt.Z,{initialValues:{email:D},onFinish:U},s.createElement(N.Z,{align:"baseline"},s.createElement(lt.Z.Item,{className:"m-b-0",name:"email",rules:[{pattern:ot.Ln,type:"email",message:f("message.field-text-is-invalid",{fieldText:f("label.email")})}]},s.createElement(at.Z,{className:"w-48","data-testid":"email-input",placeholder:f("label.enter-entity",{entity:f("label.email-lowercase")})})),s.createElement(N.Z,{size:4},s.createElement(C.Z,{className:"h-8 p-x-xss","data-testid":"cancel-edit-email",size:"small",type:"primary",onClick:function(){return g(!1)}},s.createElement($e.Z,null)),s.createElement(C.Z,{className:"h-8 p-x-xss","data-testid":"save-edit-email",htmlType:"submit",size:"small",type:"primary"},s.createElement(et.Z,null))))):s.createElement(N.Z,{align:"center"},s.createElement(E.Z.Text,{className:"font-medium","data-testid":"email-value"},null!=D?D:Q.lH),O&&s.createElement(M.Z,{placement:"right",title:O?f("label.edit-entity",{entity:f("label.email")}):f("message.no-permission-for-action")},s.createElement(rt.Z,{className:"toolbar-button align-middle",component:j.ReactComponent,"data-testid":"edit-email",style:{fontSize:"16px"},onClick:function(){return g(!0)}}))))}),[D,b,O]),Y=(0,s.useMemo)((function(){var e,t;return k===ee.C.Organization?null:s.createElement(N.Z,{size:4},s.createElement(st.Z,{type:"vertical"}),s.createElement(E.Z.Text,{className:"text-grey-muted"},f("label.type")+" :"),I?s.createElement(mt,{handleShowTypeSelector:w,parentTeamType:null!==(t=null===(e=(0,l.last)(n))||void 0===e?void 0:e.teamType)&&void 0!==t?t:ee.C.Organization,showGroupOption:!r,teamType:null!=k?k:ee.C.Department,updateTeamType:O?H:void 0}):s.createElement(s.Fragment,null,s.createElement(E.Z.Text,{className:"font-medium","data-testid":"team-type"},k),O&&s.createElement(rt.Z,{className:S()("vertical-middle m-l-xs",{"opacity-50":a}),"data-testid":"edit-team-type-icon",title:a?f("message.group-team-type-change-message"):f("label.edit-entity",{entity:f("label.team-type")}),onClick:a?void 0:function(){return w(!0)}},s.createElement(j.ReactComponent,null))))}),[k,n,a,r,I,O,H,w]);return s.createElement(N.Z,{size:0},s.createElement(ct.y,{domain:u.domain,entityFqn:null!=R?R:"",entityId:null!=z?z:"",entityType:X.py.TEAM,hasPermission:O}),s.createElement(st.Z,{type:"vertical"}),s.createElement(ut.V,{className:"text-sm",hasPermission:P,owner:A,onUpdate:B}),s.createElement(st.Z,{type:"vertical"}),J,s.createElement(st.Z,{type:"vertical"}),s.createElement(ft,{hasEditPermission:G,subscription:null===(t=u.profile)||void 0===t?void 0:t.subscription,updateTeamSubscription:function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var t,n,a;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return u?(t=(0,i.pi)((0,i.pi)({},u),{profile:{subscription:(0,l.isEmpty)(e)?void 0:(n={},n[null!==(a=null==e?void 0:e.webhook)&&void 0!==a?a:""]={endpoint:null==e?void 0:e.endpoint},n)}}),[4,m(t)]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))}}),Y)},yt=n(54566),ht=n(45366),bt=n(802),Et=n(23313),gt=n(22334),Mt=n(40734),Ct=n(45633),Nt=n(34115),Tt=function(e){var t,n,a=e.permission,r=e.currentTeam,u=e.onAddUser,d=e.onRemoveUser,p=(0,o.$)().t,f=(0,c.k6)(),v=(0,i.CR)((0,s.useState)(),2),E=v[0],g=v[1],T=(0,B.l)().showModal,I=function(e){var t,n=null===(t=r.users)||void 0===t?void 0:t.find((function(t){return t.id===e}));g(n)},w=(0,i.CR)((0,s.useState)(!0),2),x=w[0],D=w[1],A=(0,i.CR)((0,s.useState)([]),2),z=A[0],j=A[1],O=(0,i.CR)((0,s.useState)(""),2),P=O[0],G=O[1],H=(0,bt.C)(Q.Ou),J=H.currentPage,Y=H.pageSize,W=H.paging,_=H.handlePageChange,q=H.handlePageSizeChange,$=H.handlePagingChange,ee=H.showPagination,te=function(e,t){void 0===t&&(t={}),D(!0),(0,Et.Rf)((0,i.pi)({fields:"teams,roles",limit:Y,team:(0,Mt.p2)(e)},t)).then((function(e){e.data&&(j(e.data),$(e.paging))})).catch((function(){j([]),$({total:0})})).finally((function(){D(!1)}))},ne=function(e,t){D(!0),(0,ie.rg)(e,t,Y,"(teams.id:"+(null==r?void 0:r.id)+")","","",K.W.USER).then((function(e){var t=(0,gt.wB)(e.data.hits.hits);j(t),$({total:e.data.hits.total.value})})).catch((function(){j([])})).finally((function(){return D(!1)}))};(0,s.useEffect)((function(){te((0,Mt.Yd)(r.name))}),[r,Y]);var le=(0,s.useMemo)((function(){var e;return null!==(e=r.deleted)&&void 0!==e&&e}),[r]),oe=(0,s.useMemo)((function(){return(0,i.ev)((0,i.ev)([],(0,i.CR)((0,Ct.y)())),[{title:p("label.action-plural"),dataIndex:"actions",key:"actions",width:90,render:function(e,t){return s.createElement(N.Z,{align:"center",className:"w-full justify-center remove-icon",size:8},s.createElement(M.Z,{placement:"bottomRight",title:a.EditAll?p("label.remove"):p("message.no-permission-for-action")},s.createElement(C.Z,{"data-testid":"remove-user-btn",disabled:!a.EditAll,icon:s.createElement(yt.ReactComponent,{height:16,name:p("label.remove"),width:16}),type:"text",onClick:function(){return I(t.id)}})))}}]).filter((function(e){return"actions"!==e.key||!le}))}),[I,a,le]),ue=(0,s.useMemo)((function(){return(0,l.orderBy)(z,["name"],"asc")}),[z]),de=(0,s.useCallback)((function(){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){return(null==r?void 0:r.name)&&T({name:r.name,onExport:re.hh}),[2]}))}))}),[r,re.hh]),me=(0,s.useCallback)((function(){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){return f.push({pathname:(0,ce.Ec)(F.CZ.MEMBERS,F.lx.TEAMS,r.name,X.uk.IMPORT),search:k().stringify({type:ae.x.USERS})}),[2]}))}))}),[]),pe=(0,s.useMemo)((function(){var e=[{label:s.createElement(U.v,{description:p("message.export-entity-help",{entity:p("label.user-lowercase-plural")}),icon:s.createElement(R.ReactComponent,{width:"18px"}),id:"export",name:p("label.export")}),onClick:de,key:"export-button"}];return a.EditAll&&e.push({label:s.createElement(U.v,{description:p("message.import-entity-help",{entity:p("label.team-lowercase-t")}),icon:s.createElement(L.ReactComponent,{width:"20px"}),id:"import-button",name:p("label.import")}),onClick:me,key:"import-button"}),e}),[de,me,a]),fe=(0,s.useMemo)((function(){return le?p("message.this-action-is-not-allowed-for-deleted-entities"):a.EditAll?p("label.add-new-entity-m",{entity:p("label.user-r")}):p("message.no-permission-for-action")}),[a,le]);return!(0,l.isEmpty)(z)||P||x?s.createElement(h.Z,{className:"p-md",gutter:[16,16]},s.createElement(b.Z,{span:24},s.createElement(h.Z,{justify:"space-between"},s.createElement(b.Z,{span:8},s.createElement(Ce.Z,{removeMargin:!0,placeholder:p("label.search-for-type",{type:p("label.user-lowercase")}),searchValue:P,typingInterval:500,onSearch:function(e){var t;G(e),t=Q.j2,_(null!=t?t:Q.j2),e?ne(e,Q.j2):te(r.name)}})),!r.deleted&&s.createElement(b.Z,null,s.createElement(N.Z,null,z.length>0&&a.EditAll&&s.createElement(ht.l,{hasPermission:!0,selectedUsers:null!==(n=r.users)&&void 0!==n?n:[],onUpdate:u},s.createElement(C.Z,{"data-testid":"add-new-user",type:"primary"},p("label.add-entity",{entity:p("label.user-r")}))),s.createElement(Me.Z,{canDelete:!1,entityName:r.name,entityType:X.py.USER,extraDropdownContent:pe}))))),s.createElement(b.Z,{span:24},s.createElement(Le.Z,{bordered:!0,className:"teams-list-table",columns:oe,dataSource:ue,loading:x,locale:{emptyText:s.createElement(Re.Z,null)},pagination:!1,rowKey:"name",size:"small"})),s.createElement(b.Z,{span:24},ee&&s.createElement(Nt.Z,{currentPage:J,isNumberBased:Boolean(P),pageSize:Y,paging:W,pagingHandler:function(e){var t,n=e.cursorType,a=e.currentPage;P?(_(a),ne(P,a)):n&&(_(a),te(r.name,((t={})[n]=W[n],t)))},onShowSizeChange:q})),s.createElement(Z.Z,{cancelText:p("label.cancel"),"data-testid":"confirmation-modal",okText:p("label.confirm"),open:Boolean(E),title:p("label.removing-user"),onCancel:function(){return g(void 0)},onOk:function(){(null==E?void 0:E.id)&&d(E.id).then((function(){g(void 0)}))}},p("message.are-you-sure-want-to-text",{text:p("label.remove-entity",{entity:(0,se.C_)(E)})}))):s.createElement(m.Z,{button:s.createElement(N.Z,null,s.createElement(ht.l,{hasPermission:!0,selectedUsers:null!==(t=r.users)&&void 0!==t?t:[],onUpdate:u},s.createElement(M.Z,{placement:"topRight",title:fe},s.createElement(C.Z,{ghost:!0,className:S()({"p-x-lg":a.EditAll&&!le}),"data-testid":"add-new-user",disabled:!a.EditAll||le,icon:s.createElement(y.Z,null),type:"primary"},p("label.add")))),!le&&s.createElement(Me.Z,{canDelete:!1,entityName:r.name,entityType:X.py.USER,extraDropdownContent:pe})),className:"mt-0-important",heading:p("label.user"),permission:a.EditAll,type:V.Wx.ASSIGN})},It=function(e){var t,n=e.assetsCount,u=e.currentTeam,D=e.isDescriptionEditable,A=e.isTeamMemberLoading,de=e.childTeams,me=e.onTeamExpand,pe=e.handleAddTeam,fe=e.updateTeamHandler,he=e.onDescriptionUpdate,be=e.descriptionHandler,Ie=e.showDeletedTeam,we=e.onShowDeletedTeamChange,xe=e.handleJoinTeamClick,Ze=e.handleLeaveTeamClick,De=e.handleAddUser,Ae=e.removeUserFromTeam,ke=e.afterDeleteAction,ze=e.parentTeams,je=e.entityPermissions,Re=e.isFetchingAdvancedDetails,Le=e.isFetchingAllTeamAdvancedDetails,Oe=(0,o.$)().t,Pe=(0,c.k6)(),Ge=(0,c.TH)(),Ue=(0,te.a)().isAdminUser,Be=(0,d.Eu)(),He=Be.currentUser,Je=Be.isAuthDisabled,Ye=(0,s.useMemo)((function(){var e=Ge.search;return k().parse(e.startsWith("?")?e.substring(1):e)}),[Ge.search]).activeTab,Qe=u.name===ee.C.Organization,We=u.teamType===ee.C.Group,Fe={user:void 0,state:!1,leave:!1},_e=(0,f.BL)().permissions,Ve=(0,s.useMemo)((function(){return Ye||(We?a.USERS:a.TEAMS)}),[Ye,We]),Xe=(0,i.CR)((0,s.useState)(Fe),2),Ke=Xe[0],$e=Xe[1],et=(0,i.CR)((0,s.useState)(""),2),tt=et[0],nt=et[1],at=(0,i.CR)((0,s.useState)([]),2),rt=at[0],lt=at[1],st=(0,i.CR)((0,s.useState)([]),2),ot=st[0],ct=st[1],ut=(0,i.CR)((0,s.useState)(),2),dt=ut[0],mt=ut[1],pt=(0,i.CR)((0,s.useState)(),2),ft=pt[0],yt=pt[1],ht=(0,i.CR)((0,s.useState)(!1),2),bt=ht[0],Et=ht[1],gt=(0,i.CR)((0,s.useState)(),2),Mt=gt[0],Ct=gt[1],Nt=(0,B.l)().showModal,It=Oe("label.add-entity",{entity:Oe("label.policy-v")}),wt=Oe("label.add-entity",{entity:Oe("label.role")}),xt=Oe("label.add-entity",{entity:Oe("label.team-v")}),Zt=(0,s.useMemo)((function(){var e;return null!==(e=u.deleted)&&void 0!==e&&e}),[u]),Dt=(0,s.useMemo)((function(){return Qe&&u&&u.childrenCount?u.childrenCount+1:rt.length}),[rt,Qe,u.childrenCount]),St=(0,s.useMemo)((function(){return!(0,l.isEmpty)(_e)&&(0,oe.P_)($.OX.Create,v.A.TEAM,_e)}),[_e]),At=(0,s.useCallback)((function(e,t){void 0===t&&(t=!1);var n=(0,i.ev)([],(0,i.CR)(null==u?void 0:u.users)).find((function(t){return t.id===e}));$e({user:n,state:!0,leave:t})}),[u,$e]),kt=(0,s.useCallback)((function(e){var t=e.permission,n=e.onClick,a=e.heading,i=e.doc,r=e.button,l=e.children,o=e.type,c=void 0===o?V.Wx.CREATE:o;return s.createElement(m.Z,{button:r,className:"mt-0-important",doc:i,heading:a,permission:t,type:c,onClick:n},l)}),[]),zt=function(){if(u){var e=(0,i.pi)((0,i.pi)({},u),{isJoinable:!u.isJoinable});fe(e,!1)}},jt=(0,s.useCallback)((function(){var e;if(He&&u){var t=(0,l.cloneDeep)(null!==(e=He.teams)&&void 0!==e?e:[]);t.push({id:u.id,type:q.jc.TEAM,name:u.name});var n=(0,i.pi)((0,i.pi)({},He),{teams:t}),a=(0,r.qu)(He,n);xe(He.id,a)}}),[He,u,xe]),Rt=function(e){var t;nt(e),e?(t=e,(0,i.mG)(void 0,void 0,void 0,(function(){var e,n;return(0,i.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(0,ie.vt)(t,K.W.TEAM)];case 1:return e=a.sent(),n=e.data.suggest["metadata-suggest"][0].options.map((function(e){return e._source})),lt(n),[3,3];case 2:return a.sent(),lt([]),[3,3];case 3:return[2]}}))}))):lt(ve(null!=de?de:[],Ie))},Lt=function(){return(0,i.mG)(void 0,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,re.kt)(u.id)];case 1:if(!t.sent())throw Oe("message.entity-restored-error",{entity:Oe("label.team")});return ke(!0),(0,Ee.XA)(Oe("message.entity-restored-success",{entity:Oe("label.team")})),[3,3];case 2:return e=t.sent(),(0,Ee.Eo)(e,Oe("message.entity-restored-error",{entity:Oe("label.team")})),[3,3];case 3:return[2]}}))}))};(0,s.useEffect)((function(){if(u){var e=ze&&!Qe?ze.map((function(e){var t,n;return{name:(0,se.C_)(e),url:(0,ce.KH)(null!==(n=null!==(t=e.name)&&void 0!==t?t:e.fullyQualifiedName)&&void 0!==n?n:"")}})):[],t=(0,i.ev)((0,i.ev)([],(0,i.CR)(e)),[{name:(0,se.C_)(u),url:""}]);ct(t)}}),[u,ze,Ie]),(0,s.useEffect)((function(){lt(ve(null!=de?de:[],Ie)),nt("")}),[de,Ie]);var Ot=(0,s.useMemo)((function(){return s.createElement(O.ReactComponent,(0,i.pi)({},_.$,{name:Oe("label.restore")}))}),[u.isJoinable]),Pt=(0,s.useCallback)((function(){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){return(null==u?void 0:u.name)&&Nt({name:null==u?void 0:u.name,onExport:re._9}),[2]}))}))}),[u]),Gt=(0,s.useCallback)((function(){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){return Pe.push({pathname:(0,ce.Ec)(F.CZ.MEMBERS,F.lx.TEAMS,u.name,X.uk.IMPORT),search:k().stringify({type:ae.x.TEAMS})}),[2]}))}))}),[]),Ut=(0,s.useMemo)((function(){var e=[{label:s.createElement(U.v,{description:Oe("message.export-entity-help",{entity:Oe("label.team-plural-lowercase")}),icon:s.createElement(R.ReactComponent,{width:"18px"}),id:"export",name:Oe("label.export")}),onClick:Pt,key:"export-button"}];return je.Create&&e.push({label:s.createElement(U.v,{description:Oe("message.import-entity-help",{entity:Oe("label.team-lowercase-t")}),icon:s.createElement(L.ReactComponent,{width:"20px"}),id:"import-button",name:Oe("label.import")}),onClick:Gt,key:"import-button"}),e}),[Gt,Pt,je]),Bt=(0,s.useMemo)((function(){var e,t;return(0,i.ev)((0,i.ev)((0,i.ev)([],(0,i.CR)(We||Zt?[]:Ut)),(0,i.CR)(!(null===(t=null===(e=u.parents)||void 0===e?void 0:e[0])||void 0===t?void 0:t.deleted)&&Zt?[{label:s.createElement(U.v,{description:Oe("message.restore-deleted-team"),icon:Ot,id:"restore-team-dropdown",name:Oe("label.restore-entity",{entity:Oe("label.team-v")})}),onClick:Lt,key:"restore-team-dropdown"}]:[])),(0,i.CR)(Zt?[]:[{label:s.createElement(U.v,{description:Oe("message.access-to-collaborate"),icon:s.createElement(P.ReactComponent,(0,i.pi)({},_.$)),id:"open-group-dropdown",name:s.createElement(h.Z,null,s.createElement(b.Z,{span:21},s.createElement(E.Z.Text,{className:"font-medium","data-testid":"open-group-label"},Oe("label.public-team"))),s.createElement(b.Z,{span:3},s.createElement(g.Z,{checked:u.isJoinable,size:"small"})))}),onClick:zt,key:"open-group-dropdown"}]))}),[je,u,Zt,de,Ie,Pt]),Ht=(0,s.useMemo)((function(){var e;return Boolean(null===(e=null==He?void 0:He.teams)||void 0===e?void 0:e.find((function(e){return e.id===u.id})))}),[u.id,He]),Jt=(0,s.useCallback)((function(){return pe(!0)}),[pe]),Yt=(0,s.useMemo)((function(){var e=St?Oe("label.add-entity",{entity:Oe("label.team")}):Oe("message.no-permission-for-action");return Zt&&(e=Oe("message.this-action-is-not-allowed-for-deleted-entities")),0!==u.childrenCount||tt?s.createElement(h.Z,{className:"team-list-container",gutter:[8,16],justify:"space-between"},s.createElement(b.Z,{span:8},s.createElement(Ce.Z,{removeMargin:!0,placeholder:Oe("label.search-entity",{entity:Oe("label.team-d")}),searchValue:tt,typingInterval:500,onSearch:Rt})),s.createElement(b.Z,null,s.createElement(N.Z,{align:"center"},s.createElement("span",null,s.createElement(g.Z,{checked:Ie,"data-testid":"show-deleted",onClick:we}),s.createElement(E.Z.Text,{className:"m-l-xs"},Oe("label.deleted"))),St&&!Zt&&s.createElement(C.Z,{"data-testid":"add-team",type:"primary",onClick:Jt},xt))),s.createElement(b.Z,{span:24},s.createElement(qe,{currentTeam:u,data:rt,isFetchingAllTeamAdvancedDetails:Le,onTeamExpand:me}))):s.createElement(m.Z,{icon:s.createElement(z.ReactComponent,{className:"h-32 w-32"}),type:V.Wx.CUSTOM},s.createElement(E.Z.Paragraph,{style:{marginBottom:"0"}},Oe("message.adding-new-entity-is-easy-just-give-it-a-spin",{entity:Oe("label.team")})),s.createElement(E.Z.Paragraph,null,s.createElement(le.u1,{i18nKey:"message.refer-to-our-doc",renderElement:s.createElement("a",{href:W.cK,rel:"noreferrer",target:"_blank"}),values:{doc:Oe("label.doc-plural-lowercase")}})),s.createElement(M.Z,{placement:"top",title:e},s.createElement(C.Z,{ghost:!0,"data-testid":"add-placeholder-button",disabled:!St||Zt,icon:s.createElement(y.Z,null),type:"primary",onClick:Jt},Oe("label.add"))))}),[xt,tt,Zt,u,rt,Ie,St,Le,me,Jt,Rt,we]),Qt=(0,s.useMemo)((function(){return s.createElement(Tt,{currentTeam:u,permission:je,onAddUser:De,onRemoveUser:Ae})}),[u,A,je,De,Ae]),Wt=(0,s.useMemo)((function(){return s.createElement(J.Z,{isSummaryPanelOpen:!0,assetCount:n,isEntityDeleted:Zt,permissions:je,type:Y.V.TEAM,onAddAsset:function(){return Pe.push(Q.dt.EXPLORE)},onAssetClick:Ct})}),[je,n,Ct,Zt]),Ft=(0,s.useMemo)((function(){var e,t;return(0,l.isEmpty)(null!==(e=u.defaultRoles)&&void 0!==e?e:[])?kt({permission:je.EditAll,heading:Oe("label.role"),doc:W._F,children:Oe("message.assigning-team-entity-description",{entity:Oe("label.role"),name:u.name}),type:V.Wx.ASSIGN,button:s.createElement(M.Z,{placement:"bottomRight",title:Zt?Oe("message.this-action-is-not-allowed-for-deleted-entities"):Oe("label.add-entity",{entity:Oe("label.role")})},s.createElement(C.Z,{ghost:!0,className:S()({"p-x-lg":je.EditAll&&!Zt}),"data-testid":"add-placeholder-button",disabled:Zt,icon:s.createElement(y.Z,null),type:"primary",onClick:function(){var e;return mt({type:X.py.ROLE,selectedData:null!==(e=u.defaultRoles)&&void 0!==e?e:[]})}},Oe("label.add")))}):s.createElement(h.Z,{className:"roles-and-policy p-md",gutter:[0,10]},je.EditAll&&!Zt&&s.createElement(b.Z,{className:"d-flex justify-end",span:24},s.createElement(C.Z,{"data-testid":"add-role",type:"primary",onClick:function(){var e;return mt({type:X.py.ROLE,selectedData:null!==(e=u.defaultRoles)&&void 0!==e?e:[]})}},wt)),s.createElement(b.Z,{span:24},s.createElement(Se,{hasAccess:je.EditAll,isTeamDeleted:Zt,list:null!==(t=u.defaultRoles)&&void 0!==t?t:[],type:X.py.ROLE,onDelete:function(e){return yt({record:e,attribute:"defaultRoles"})}})))}),[u,je,wt,Zt]),_t=(0,s.useMemo)((function(){var e;return(0,l.isEmpty)(u.policies)?kt({permission:je.EditAll,children:Oe("message.assigning-team-entity-description",{entity:Oe("label.policy-plural"),name:u.name}),type:V.Wx.ASSIGN,button:s.createElement(M.Z,{placement:"bottomRight",title:Zt?Oe("message.this-action-is-not-allowed-for-deleted-entities"):Oe("label.add-entity",{entity:Oe("label.policy")})},s.createElement(C.Z,{ghost:!0,className:S()({"p-x-lg":je.EditAll&&!Zt}),"data-testid":"add-placeholder-button",disabled:Zt,icon:s.createElement(y.Z,null),type:"primary",onClick:function(){var e;return mt({type:X.py.POLICY,selectedData:null!==(e=u.policies)&&void 0!==e?e:[]})}},Oe("label.add")))}):s.createElement(h.Z,{className:"roles-and-policy p-md",gutter:[0,10]},je.EditAll&&!Zt&&s.createElement(b.Z,{className:"d-flex justify-end",span:24},s.createElement(C.Z,{"data-testid":"add-policy",title:je.EditAll?It:Oe("message.no-permission-for-action"),type:"primary",onClick:function(){var e;return mt({type:X.py.POLICY,selectedData:null!==(e=u.policies)&&void 0!==e?e:[]})}},It)),s.createElement(b.Z,{span:24},s.createElement(Se,{hasAccess:je.EditAll,isTeamDeleted:Zt,list:null!==(e=u.policies)&&void 0!==e?e:[],type:X.py.POLICY,onDelete:function(e){return yt({record:e,attribute:"policies"})}})))}),[u,je,It,Zt]),Vt=(0,s.useMemo)((function(){return!Qe&&!(0,l.isUndefined)(He)&&(Ht?s.createElement(C.Z,{ghost:!0,"data-testid":"leave-team-button",type:"primary",onClick:function(){return At(He.id,!0)}},Oe("label.leave-team")):(Boolean(u.isJoinable)||Je||Ue)&&s.createElement(C.Z,{"data-testid":"join-teams",type:"primary",onClick:jt},Oe("label.join-team")))}),[He,Ht,Je,Ue,jt,At]),Xt=(0,s.useMemo)((function(){var e,t,n,a;return s.createElement(s.Fragment,null,s.createElement(N.Z,{wrap:!0,className:"w-full justify-between"},s.createElement(N.Z,{className:"w-full",size:"middle"},s.createElement(T.C,{className:"teams-profile",size:40},s.createElement(G.ReactComponent,{className:"text-primary",width:20})),s.createElement(N.Z,{direction:"vertical",size:3},!Qe&&s.createElement(Ne.Z,{titleLinks:ot}),s.createElement(it,{currentTeam:u,entityPermissions:je,updateTeamHandler:fe}))),s.createElement(N.Z,{align:"center"},Vt,Qe?s.createElement(Me.Z,{canDelete:!1,entityName:null!==(a=u.fullyQualifiedName)&&void 0!==a?a:u.name,entityType:X.py.TEAM,extraDropdownContent:(0,i.ev)([],(0,i.CR)(Ut))}):je.EditAll&&s.createElement(Me.Z,{isRecursiveDelete:!0,afterDeleteAction:ke,allowSoftDelete:!u.deleted,canDelete:je.EditAll,entityId:u.id,entityName:null!==(e=u.fullyQualifiedName)&&void 0!==e?e:u.name,entityType:X.py.TEAM,extraDropdownContent:Bt,hardDeleteMessagePostFix:ye(null!==(t=u.fullyQualifiedName)&&void 0!==t?t:u.name,Oe("label.permanently-lowercase")),softDeleteMessagePostFix:ye(null!==(n=u.fullyQualifiedName)&&void 0!==n?n:u.name,Oe("label.soft-lowercase"))}))),s.createElement("div",{className:"p-t-md p-l-xss"},s.createElement(vt,{childTeamsCount:de.length,currentTeam:u,entityPermissions:je,isGroupType:We,isTeamDeleted:Zt,parentTeams:ze,updateTeamHandler:fe})))}),[Zt,We,ze,de,u,Qe,ot,je,Vt,Bt,fe,ke,ye]),Kt=(0,s.useCallback)((function(e){switch(e){case a.ASSETS:return Wt;case a.POLICIES:return _t;case a.ROLES:return Ft;case a.TEAMS:return Yt;case a.USERS:return Qt}}),[Wt,_t,Ft,Yt,Qt]),qt=(0,s.useCallback)((function(e){return s.createElement(h.Z,{className:"teams-tabs-content-container"},s.createElement(b.Z,{className:"teams-scroll-component",span:Mt?18:24},Re?s.createElement(p.Z,null):Kt(e)),Mt&&s.createElement(b.Z,{className:"border-left team-assets-right-panel",span:6},s.createElement(H.Z,{entityDetails:Mt,handleClosePanel:function(){return Ct(void 0)}})))}),[Mt,Re,Kt]),$t=(0,s.useMemo)((function(){return function(e,t,n,r,l){var s,o,c,u,d={teams:{name:(0,ue.t)("label.team-plural"),count:r,key:a.TEAMS},users:{name:(0,ue.t)("label.user-plural"),count:null!==(o=null===(s=e.users)||void 0===s?void 0:s.length)&&void 0!==o?o:0,key:a.USERS},assets:{name:(0,ue.t)("label.asset-plural"),count:l,key:a.ASSETS},roles:{name:(0,ue.t)("label.role-plural"),count:null===(c=null==e?void 0:e.defaultRoles)||void 0===c?void 0:c.length,key:a.ROLES},policies:{name:(0,ue.t)("label.policy-plural"),count:null===(u=null==e?void 0:e.policies)||void 0===u?void 0:u.length,key:a.POLICIES}},m=[d.roles,d.policies];return n?(0,i.ev)([d.teams],(0,i.CR)(m)):t?(0,i.ev)([d.users,d.assets],(0,i.CR)(m)):(0,i.ev)([d.teams,d.users],(0,i.CR)(m))}(u,We,Qe,Dt,n).map((function(e){return(0,i.pi)((0,i.pi)({},e),{label:s.createElement(Te.Z,{count:e.count,id:e.key,isActive:Ve===e.key,name:e.name}),children:qt(e.key)})}))}),[u,tt,Dt,Ve,n,Kt,qt]),en=(0,s.useMemo)((function(){return(je.EditDescription||je.EditAll)&&!Zt}),[je,Zt]);return A>0?s.createElement(p.Z,null):(0,l.isEmpty)(u)?kt({onClick:function(){return pe(!0)},permission:St,heading:Oe("label.team-plural"),doc:W.E6}):s.createElement("div",{className:"teams-layout"},s.createElement(h.Z,{className:"h-full","data-testid":"team-details-container"},s.createElement(b.Z,{className:"teams-profile-container","data-testid":"team-detail-header",span:24},s.createElement(I.Z,{accordion:!0,bordered:!1,className:"header-collapse-custom-collapse",expandIconPosition:"end"},s.createElement(I.Z.Panel,{className:"header-collapse-custom-panel",collapsible:"icon","data-testid":"team-details-collapse",header:Xt,key:"1"},s.createElement(h.Z,null,s.createElement(b.Z,{className:"border-top",span:24},s.createElement(w.Z,{className:"ant-card-feed card-body-border-none card-padding-y-0 p-y-sm","data-testid":"teams-description",title:s.createElement(N.Z,{align:"center"},s.createElement(E.Z.Text,{className:"right-panel-label font-normal"},Oe("label.description")),en&&s.createElement(j.ReactComponent,(0,i.pi)({className:"cursor-pointer align-middle",color:Q.MJ,"data-testid":"edit-description"},Q.K$,{onClick:function(){return be(!0)}})))},s.createElement(ge.Z,{description:null!==(t=u.description)&&void 0!==t?t:"",entityName:(0,se.C_)(u),isEdit:D,onCancel:function(){return be(!1)},onDescriptionUpdate:he}))))))),s.createElement(b.Z,{className:"m-t-sm",span:24},s.createElement(x.Z,{destroyInactiveTabPane:!0,activeKey:Ve,className:"entity-details-page-tabs",items:$t,onChange:function(e){Pe.push({search:k().stringify({activeTab:e})})}})),s.createElement(Z.Z,{cancelText:Oe("label.cancel"),okText:Oe("label.confirm"),open:Ke.state,title:Ke.leave?Oe("label.leave-team"):Oe("label.removing-user"),onCancel:function(){return $e(Fe)},onOk:function(){var e;Ke.leave?(0,i.mG)(void 0,void 0,void 0,(function(){var e,t,n,a;return(0,i.Jh)(this,(function(s){switch(s.label){case 0:return He&&u?(e=(e=(0,l.cloneDeep)(null!==(a=He.teams)&&void 0!==a?a:[])).filter((function(e){return e.id!==u.id})),t=(0,i.pi)((0,i.pi)({},He),{teams:e}),n=(0,r.qu)(He,t),[4,Ze(He.id,n)]):[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}}))})).then((function(){$e(Fe)})):Ae(null===(e=Ke.user)||void 0===e?void 0:e.id).then((function(){$e(Fe)}))}},function(e){var t,n,a,i,r=e?Oe("message.leave-the-team-team-name",{teamName:null!==(t=null==u?void 0:u.displayName)&&void 0!==t?t:null==u?void 0:u.name}):Oe("label.remove-entity",{entity:null!==(a=null===(n=Ke.user)||void 0===n?void 0:n.displayName)&&void 0!==a?a:null===(i=Ke.user)||void 0===i?void 0:i.name});return Oe("message.are-you-sure-want-to-text",{text:r})}(Ke.leave)),dt&&s.createElement(ne.Z,{isModalLoading:bt,isOpen:!(0,l.isUndefined)(dt),selectedKeys:dt.selectedData.map((function(e){return e.id})),title:Oe("label.add")+" "+dt.type,type:dt.type,onCancel:function(){return mt(void 0)},onSave:function(e){return t=e,(0,i.mG)(void 0,void 0,void 0,(function(){var e,n;return(0,i.Jh)(this,(function(a){switch(a.label){case 0:if(!dt)return[3,2];switch(Et(!0),e=(0,i.pi)({},u),n=t.map((function(e){var t=dt.selectedData.find((function(t){return t.id===e}));return null!=t?t:{id:e,type:dt.type}})),dt.type){case X.py.ROLE:e=(0,i.pi)((0,i.pi)({},e),{defaultRoles:n});break;case X.py.POLICY:e=(0,i.pi)((0,i.pi)({},e),{policies:n})}return[4,fe(e)];case 1:a.sent(),mt(void 0),Et(!1),a.label=2;case 2:return[2]}}))}));var t}}),ft&&s.createElement(Z.Z,{centered:!0,closable:!1,confirmLoading:bt,maskClosable:!1,okText:Oe("label.confirm"),open:!(0,l.isUndefined)(ft.record),title:Oe("label.remove-entity",{entity:(0,se.C_)(null==ft?void 0:ft.record)})+" "+Oe("label.from-lowercase")+" "+(0,se.C_)(u),onCancel:function(){return yt(void 0)},onOk:function(){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return[4,(t=ft.record,n=ft.attribute,(0,i.mG)(void 0,void 0,void 0,(function(){var e,a,r,l,s;return(0,i.Jh)(this,(function(o){switch(o.label){case 0:return Et(!0),e=null!==(s=u[n])&&void 0!==s?s:[],a=e.filter((function(e){return e.id!==t.id})),r=(0,i.pi)((0,i.pi)({},u),((l={})[n]=a,l)),[4,fe(r)];case 1:return o.sent(),Et(!1),[2]}}))})))];case 1:return e.sent(),yt(void 0),[2]}var t,n}))}))}},s.createElement(E.Z.Text,null,Oe("message.are-you-sure-you-want-to-remove-child-from-parent",{child:(0,se.C_)(ft.record),parent:(0,se.C_)(u)})))))},wt=n(19793),xt=n(18927),Zt=function(e){var t=e.visible,n=e.onCancel,a=e.onSave,r=e.isLoading,c=e.parentTeamType,u=(0,o.$)().t,d=(0,i.CR)((0,s.useState)(""),2),m=d[0],p=d[1],f=(0,i.CR)((0,s.useState)([]),2),v=f[0],y=f[1],h=(0,s.useRef)(),b=(0,s.useMemo)((function(){return be(c).map((function(e){return{label:e,value:e}}))}),[c]);return(0,s.useEffect)((function(){t&&(0,i.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,re.LK)()];case 1:return e=n.sent().data,y(e),[3,3];case 2:return t=n.sent(),(0,Ee.Eo)(t,u("server.unexpected-response")),[3,3];case 3:return[2]}}))}))}),[t]),s.createElement(Z.Z,{centered:!0,closable:!1,confirmLoading:r,maskClosable:!1,okButtonProps:{form:"add-team-form",type:"primary",htmlType:"submit"},open:t,title:u("label.add-entity",{entity:u("label.team-v")}),width:750,onCancel:n},s.createElement(lt.Z,{id:"add-team-form",initialValues:{teamType:ee.C.Group},layout:"vertical",name:"add-team-nest-messages",validateMessages:Q.NG,onFinish:function(e){e=(0,i.pi)((0,i.pi)({},e),{name:(0,l.trim)(e.name),displayName:(0,l.trim)(e.displayName),description:m}),a(e)}},s.createElement(lt.Z.Item,{label:u("label.name"),name:"name",rules:[{required:!0,type:"string",min:1,max:128,whitespace:!0},{pattern:ot.$Q,message:u("message.entity-name-validation")},{validator:function(e,t){return v.some((function(e){return(0,l.toLower)(e.name)===(0,l.toLower)(t)}))?Promise.reject(u("message.entity-already-exists",{entity:u("label.name")})):Promise.resolve()}}]},s.createElement(at.Z,{"data-testid":"name",placeholder:u("label.enter-entity",{entity:u("label.name")})})),s.createElement(lt.Z.Item,{label:u("label.display-name"),name:"displayName",rules:[{required:!0,type:"string",whitespace:!0,min:1,max:128}]},s.createElement(at.Z,{"data-testid":"display-name",placeholder:u("message.enter-display-name")})),s.createElement(lt.Z.Item,{label:u("label.email"),name:"email",rules:[{type:"email"}]},s.createElement(at.Z,{"data-testid":"email",placeholder:u("label.enter-entity",{entity:u("label.email-lowercase")})})),s.createElement(lt.Z.Item,{label:u("label.team-type"),name:"teamType"},s.createElement(dt.Z,{"data-testid":"team-selector",options:b,placeholder:u("message.select-team")})),s.createElement(lt.Z.Item,{label:u("label.description"),name:"description",style:{marginBottom:0}},s.createElement(xt.Z,{"data-testid":"description",initialValue:"",ref:h,onTextChange:function(e){return p(e)}}))))},Dt=function(){var e=(0,c.k6)(),t=(0,o.$)().t,n=(0,f.BL)().getEntityPermissionByFqn,a=(0,c.UO)().fqn,y=(0,i.CR)((0,s.useState)(""),2),h=y[0],b=y[1],E=(0,i.CR)((0,s.useState)([]),2),g=E[0],M=E[1],C=(0,i.CR)((0,s.useState)({}),2),N=C[0],T=C[1],I=(0,i.CR)((0,s.useState)(0),2),w=I[0],x=I[1],Z=(0,i.CR)((0,s.useState)(!1),2),D=Z[0],S=Z[1],A=(0,i.CR)((0,s.useState)(!0),2),k=A[0],z=A[1],j=(0,i.CR)((0,s.useState)(!1),2),R=j[0],L=j[1],O=(0,i.CR)((0,s.useState)(!1),2),P=O[0],G=O[1],U=(0,i.CR)((0,s.useState)(!1),2),B=U[0],H=U[1],J=(0,i.CR)((0,s.useState)(0),2),Y=J[0],Q=J[1],W=(0,i.CR)((0,s.useState)([]),2),F=W[0],_=W[1],X=(0,d.Eu)().updateCurrentUser,q=(0,i.CR)((0,s.useState)(oe.Bd),2),$=q[0],ee=q[1],te=(0,i.CR)((0,s.useState)(!1),2),ne=te[0],ae=te[1],le=(0,i.CR)((0,s.useState)(!1),2),se=le[0],ue=le[1],de=(0,s.useMemo)((function(){return N.teamType===Ae.Group}),[N]),me=(0,s.useMemo)((function(){return $.ViewAll||$.ViewBasic}),[$]),pe=function(e){L(e)},fe=function(e){G(e)},ve=function(e,t,n){var a,r;try{for(var l=(0,i.XA)(e),s=l.next();!s.done;s=l.next()){var o=s.value;if(o.fullyQualifiedName===t){o.children=n;break}o.children&&o.children.length>0&&ve(o.children,t,n)}}catch(e){a={error:e}}finally{try{s&&!s.done&&(r=l.return)&&r.call(l)}finally{if(a)throw a.error}}},ye=function(e,n,a){return void 0===e&&(e=!0),void 0===a&&(a=!1),(0,i.mG)(void 0,void 0,void 0,(function(){var r,s,o,c,u;return(0,i.Jh)(this,(function(d){switch(d.label){case 0:e&&x((function(e){return++e})),d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,(0,re.LK)(["userCount","childrenCount","owns","parents"],{parentTeam:null!==(u=decodeURIComponent(null!=n?n:""))&&void 0!==u?u:"organization",include:"all"})];case 2:return r=d.sent().data,s=r.map((function(e){return(0,i.pi)((0,i.pi)({},e),{key:e.fullyQualifiedName,children:e.childrenCount&&e.childrenCount>0?[]:void 0})})),a?(o=(0,l.cloneDeep)(g),ve(o,n||"",s),M(o)):M(s),[3,5];case 3:return c=d.sent(),(0,Ee.Eo)(c,t("server.unexpected-response")),[3,5];case 4:return ue(!1),[7];case 5:return e&&x((function(e){return--e})),[2]}}))}))},he=function(e,n,a){return void 0===n&&(n=!1),void 0===a&&(a=!0),(0,i.mG)(void 0,void 0,void 0,(function(){var r,s,o;return(0,i.Jh)(this,(function(c){switch(c.label){case 0:z(a),c.label=1;case 1:return c.trys.push([1,7,,8]),[4,(0,re.Xv)(e,["parents"],"all")];case 2:return(r=c.sent())?(_((function(e){return n?[r]:(0,i.ev)([r],(0,i.CR)(e))})),(0,l.isEmpty)(r.parents)||!(null===(o=r.parents)||void 0===o?void 0:o[0].name)?[3,4]:[4,he(r.parents[0].name,!1,a)]):[3,5];case 3:c.sent(),c.label=4;case 4:return[3,6];case 5:throw t("server.unexpected-response");case 6:return[3,8];case 7:return s=c.sent(),(0,Ee.Eo)(s,t("server.unexpected-response")),[3,8];case 8:return[2]}}))}))},be=function(e,n){return void 0===n&&(n=!1),(0,i.mG)(void 0,void 0,void 0,(function(){var a,r,s;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:z(n),i.label=1;case 1:return i.trys.push([1,5,6,7]),[4,(0,re.Xv)(e,["owner","parents","profile"],"all")];case 2:return a=i.sent(),T(a),(0,l.isEmpty)(a.parents)||!(null===(s=a.parents)||void 0===s?void 0:s[0].name)?[3,4]:[4,he(a.parents[0].name,!0,n)];case 3:i.sent(),i.label=4;case 4:return[3,7];case 5:return r=i.sent(),(0,Ee.Eo)(r,t("server.unexpected-response")),[3,7];case 6:return z(!1),[7];case 7:return[2]}}))}))};return(0,s.useEffect)((function(){me&&h!==a&&(a&&be(a,!0),b(a))}),[$,a]),(0,s.useEffect)((function(){var e;e=a,(0,i.mG)(void 0,void 0,void 0,(function(){var t,a;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:z(!0),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,n(v.A.TEAM,e)];case 2:return t=i.sent(),ee(t),[3,5];case 3:return a=i.sent(),(0,Ee.Eo)(a),[3,5];case 4:return z(!1),[7];case 5:return[2]}}))}))}),[a]),(0,s.useEffect)((function(){var e,n;!k&&me&&a&&(n=a,(0,i.mG)(void 0,void 0,void 0,(function(){var e,a;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:ae(!0),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,(0,re.Xv)(n,["users","defaultRoles","policies","childrenCount","domain"],"all")];case 2:return e=r.sent(),T((function(t){return(0,i.pi)((0,i.pi)({},t),e)})),(0,i.mG)(void 0,void 0,void 0,(function(){var e,t,n,a,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:if(!N.id||!de)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,ie.rg)("",0,0,"owner.id:"+N.id,"","",K.W.ALL)];case 2:return e=i.sent(),t=null!==(r=null===(a=null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.hits)||void 0===a?void 0:a.total.value)&&void 0!==r?r:0,Q(t),[3,4];case 3:return i.sent(),[3,4];case 4:return[2]}}))})),[3,5];case 3:return a=r.sent(),(0,Ee.Eo)(a,t("server.unexpected-response")),[3,5];case 4:return ae(!1),[7];case 5:return[2]}}))})),e=a,(0,i.mG)(void 0,void 0,void 0,(function(){var n,a,r,l;return(0,i.Jh)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,(0,re.LK)(void 0,{parentTeam:null!==(l=decodeURIComponent(null!=e?e:""))&&void 0!==l?l:"organization",include:"all"})];case 1:return n=s.sent().data,a=n.map((function(e){return(0,i.pi)((0,i.pi)({},e),{key:e.fullyQualifiedName,children:e.childrenCount&&e.childrenCount>0?[]:void 0})})),M(a),ue(!0),[3,3];case 2:return r=s.sent(),(0,Ee.Eo)(r,t("server.unexpected-response")),[3,3];case 3:return[2]}}))})))}),[k,$,a]),(0,s.useEffect)((function(){se&&a&&ye(!1,a)}),[se,a]),k?s.createElement(p.Z,null):me?(0,l.isEmpty)(N)?s.createElement(m.Z,null):s.createElement(s.Fragment,null,s.createElement(It,{afterDeleteAction:function(t){t?(T((function(e){return e?(0,i.pi)((0,i.pi)({},e),{deleted:!(null==e?void 0:e.deleted)}):e})),M((function(e){return e.map((function(e){return(0,i.pi)((0,i.pi)({},e),{deleted:!(null==e?void 0:e.deleted)})}))}))):e.push((0,ce.si)((0,ce.KH)(Ae.Organization)))},assetsCount:Y,childTeams:g,currentTeam:N,descriptionHandler:pe,entityPermissions:$,handleAddTeam:fe,handleAddUser:function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var n,a,s,o;return(0,i.Jh)(this,(function(c){switch(c.label){case 0:if((0,l.isUndefined)(N)||(0,l.isUndefined)(N.users))return[3,4];n=(0,i.pi)((0,i.pi)({},N),{users:e}),a=(0,r.qu)(N,n),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,(0,re.Cp)(N.id,a)];case 2:return s=c.sent(),T((function(e){return(0,i.pi)((0,i.pi)({},e),s)})),[3,4];case 3:return o=c.sent(),(0,Ee.Eo)(o,t("server.entity-updating-error",{entity:t("label.team")})),[3,4];case 4:return[2]}}))}))},handleJoinTeamClick:function(e,n){(0,Et.f_)(e,n).then((function(e){if(!e)throw t("server.join-team-error");X(e),u.Z.updateUserDetails(e),T((function(t){return(0,i.pi)((0,i.pi)({},t),e)})),(0,Ee.XA)(t("server.join-team-success"),2e3)})).catch((function(e){(0,Ee.Eo)(e,t("server.join-team-error"))}))},handleLeaveTeamClick:function(e,n){return new Promise((function(a){(0,Et.f_)(e,n).then((function(e){if(!e)throw t("server.leave-team-error");X(e),u.Z.updateUserDetails(e),T((function(t){return(0,i.pi)((0,i.pi)({},t),e)})),(0,Ee.XA)(t("server.leave-team-success"),2e3),a()})).catch((function(e){(0,Ee.Eo)(e,t("server.leave-team-error"))}))}))},isDescriptionEditable:R,isFetchingAdvancedDetails:ne,isFetchingAllTeamAdvancedDetails:se,isTeamMemberLoading:w,parentTeams:F,removeUserFromTeam:function(e){var n,a=null===(n=null==N?void 0:N.users)||void 0===n?void 0:n.filter((function(t){return t.id!==e})),l=(0,i.pi)((0,i.pi)({},N),{users:a}),s=(0,r.qu)(N,l);return new Promise((function(e){(0,re.Cp)(N.id,s).then((function(e){if(!e)throw t("server.unexpected-response");T((function(t){return(0,i.pi)((0,i.pi)({},t),e)}))})).catch((function(e){(0,Ee.Eo)(e,t("server.entity-updating-error",{entity:t("label.team")}))})).finally((function(){e()}))}))},showDeletedTeam:D,updateTeamHandler:function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var n,a,l;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:n=(0,r.qu)(N,e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,re.Cp)(N.id,n)];case 2:return a=i.sent(),T(a),[3,4];case 3:return l=i.sent(),(0,Ee.Eo)(l,t("server.entity-updating-error",{entity:t("label.team")})),[3,4];case 4:return[2]}}))}))},onDescriptionUpdate:function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var n,a,l,s;return(0,i.Jh)(this,(function(o){switch(o.label){case 0:if(N.description===e)return[3,6];n=(0,i.pi)((0,i.pi)({},N),{description:e}),a=(0,r.qu)(N,n),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,(0,re.Cp)(N.id,a)];case 2:if(!(l=o.sent()))throw t("server.unexpected-response");return T((function(e){return(0,i.pi)((0,i.pi)({},e),l)})),[3,5];case 3:return s=o.sent(),(0,Ee.Eo)(s),[3,5];case 4:return pe(!1),[7];case 5:return[3,7];case 6:pe(!1),o.label=7;case 7:return[2]}}))}))},onShowDeletedTeamChange:function(){S((function(e){return!e}))},onTeamExpand:ye}),N.teamType&&s.createElement(Zt,{isLoading:B,parentTeamType:N.teamType,visible:P,onCancel:function(){return G(!1)},onSave:function(e){return function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var n,r,l;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,3,4]),H(!0),n={name:e.name,displayName:e.displayName,description:e.description,teamType:e.teamType,parents:a?[N.id]:void 0,email:e.email||void 0},[4,(0,re.Cm)(n)];case 1:return i.sent()&&(be(N.name,!0),fe(!1)),[3,4];case 2:return r=i.sent(),(null===(l=r.response)||void 0===l?void 0:l.status)===wt.NL.CONFLICT?(0,Ee.Eo)(t("server.entity-already-exist",{entity:t("label.team"),entityPlural:t("label.team-plural-lowercase"),name:e.name})):(0,Ee.Eo)(r,t("server.create-entity-error",{entity:t("label.team-lowercase")})),[3,4];case 3:return H(!1),[7];case 4:return[2]}}))}))}(e)}})):s.createElement(m.Z,{type:V.Wx.PERMISSION})}}}]);