"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[2154],{62270:function(e,t,n){var r=n(75263).default,i=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(81670)),l=i(n(10434)),s=i(n(36228)),o=i(n(50132)),u=r(n(67294)),c=n(31929),d=n(51130),f=(i(n(13594)),n(58338)),v=i(n(93319)),p=function(e,t){var n,r,i=e.prefixCls,p=e.className,h=e.children,m=e.indeterminate,y=void 0!==m&&m,b=e.style,E=e.onMouseEnter,g=e.onMouseLeave,C=e.skipGroup,w=void 0!==C&&C,A=e.disabled,D=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]),T=u.useContext(c.ConfigContext),x=T.getPrefixCls,S=T.direction,R=u.useContext(f.GroupContext),O=(0,u.useContext)(d.FormItemInputContext).isFormItemInput,k=(0,u.useContext)(v.default),N=null!==(r=(null==R?void 0:R.disabled)||A)&&void 0!==r?r:k,M=u.useRef(D.value);u.useEffect((function(){null==R||R.registerValue(D.value)}),[]),u.useEffect((function(){if(!w)return D.value!==M.current&&(null==R||R.cancelValue(M.current),null==R||R.registerValue(D.value),M.current=D.value),function(){return null==R?void 0:R.cancelValue(D.value)}}),[D.value]);var P=x("checkbox",i),G=(0,l.default)({},D);R&&!w&&(G.onChange=function(){D.onChange&&D.onChange.apply(D,arguments),R.toggleOption&&R.toggleOption({label:h,value:D.value})},G.name=R.name,G.checked=R.value.includes(D.value));var F=(0,s.default)((n={},(0,a.default)(n,"".concat(P,"-wrapper"),!0),(0,a.default)(n,"".concat(P,"-rtl"),"rtl"===S),(0,a.default)(n,"".concat(P,"-wrapper-checked"),G.checked),(0,a.default)(n,"".concat(P,"-wrapper-disabled"),N),(0,a.default)(n,"".concat(P,"-wrapper-in-form-item"),O),n),p),U=(0,s.default)((0,a.default)({},"".concat(P,"-indeterminate"),y)),Z=y?"mixed":void 0;return u.createElement("label",{className:F,style:b,onMouseEnter:E,onMouseLeave:g},u.createElement(o.default,(0,l.default)({"aria-checked":Z},G,{prefixCls:P,className:U,disabled:N,ref:t})),void 0!==h&&u.createElement("span",null,h))},h=u.forwardRef(p);t.default=h},58338:function(e,t,n){var r=n(75263).default,i=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GroupContext=void 0;var a=i(n(10434)),l=i(n(81670)),s=i(n(861)),o=i(n(27424)),u=i(n(36228)),c=i(n(18475)),d=r(n(67294)),f=n(31929),v=i(n(62270)),p=d.createContext(null);t.GroupContext=p;var h=function(e,t){var n=e.defaultValue,r=e.children,i=e.options,h=void 0===i?[]:i,m=e.prefixCls,y=e.className,b=e.style,E=e.onChange,g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["defaultValue","children","options","prefixCls","className","style","onChange"]),C=d.useContext(f.ConfigContext),w=C.getPrefixCls,A=C.direction,D=d.useState(g.value||n||[]),T=(0,o.default)(D,2),x=T[0],S=T[1],R=d.useState([]),O=(0,o.default)(R,2),k=O[0],N=O[1];d.useEffect((function(){"value"in g&&S(g.value||[])}),[g.value]);var M=function(){return h.map((function(e){return"string"==typeof e||"number"==typeof e?{label:e,value:e}:e}))},P=w("checkbox",m),G="".concat(P,"-group"),F=(0,c.default)(g,["value","disabled"]);h&&h.length>0&&(r=M().map((function(e){return d.createElement(v.default,{prefixCls:P,key:e.value.toString(),disabled:"disabled"in e?e.disabled:g.disabled,value:e.value,checked:x.includes(e.value),onChange:e.onChange,className:"".concat(G,"-item"),style:e.style},e.label)})));var U={toggleOption:function(e){var t=x.indexOf(e.value),n=(0,s.default)(x);-1===t?n.push(e.value):n.splice(t,1),"value"in g||S(n);var r=M();null==E||E(n.filter((function(e){return k.includes(e)})).sort((function(e,t){return r.findIndex((function(t){return t.value===e}))-r.findIndex((function(e){return e.value===t}))})))},value:x,disabled:g.disabled,name:g.name,registerValue:function(e){N((function(t){return[].concat((0,s.default)(t),[e])}))},cancelValue:function(e){N((function(t){return t.filter((function(t){return t!==e}))}))}},Z=(0,u.default)(G,(0,l.default)({},"".concat(G,"-rtl"),"rtl"===A),y);return d.createElement("div",(0,a.default)({className:Z,style:b},F,{ref:t}),d.createElement(p.Provider,{value:U},r))},m=d.forwardRef(h),y=d.memo(m);t.default=y},3460:function(e,t,n){n.d(t,{w:function(){return l}});var r=n(70655),i=n(67294),a=n(33994),l=function(e){return function(t){return i.createElement(a.ZP,null,i.createElement(e,(0,r.pi)({},t)))}}},3511:function(e,t,n){n.d(t,{x:function(){return o}});var r=n(70655),i=n(28682),a=n(62270),l=n(96486),s=n(67294),o=function(e){var t=e.setSelectedKeys,n=e.selectedKeys,o=e.confirm,u=e.filters,c=function(e){var i=e.target.value;n.indexOf(i)>-1?t(n.filter((function(e){return e!==i}))):t((0,r.ev)((0,r.ev)([],(0,r.CR)(n)),[i])),o()};return s.createElement(i.Z,{items:null==u?void 0:u.map((function(e){return{key:e.value,label:s.createElement(a.default,{checked:n.indexOf(e.value)>-1,value:e.value,onChange:c},(0,l.startCase)(e.text))}}))})}},52154:function(e,t,n){n.r(t),n.d(t,{default:function(){return re}});var r=n(70655),i=n(34901),a=n(96486),l=n(67294),s=n(68432),o=n(15137),u=n(95137),c=n(83716),d=n(56256),f=n(71230),v=n(15746),p=n(25213),h=n(19650),m=n(25499),y=n(49795),b=n(33994),E=n(75642),g=n(3460),C=n(113),w=n(9600),A=n(33873),D=n(16177),T=n(80646),x=n(3511),S=n(61289),R=n(55608),O=n(67167),k=n(71406),N=n(1727),M=n(62761),P=n(64632),G=n(31615),F=n(36775),U=n(30314),Z=n(93895),H=n(24671),B=n(31982),I=n(39570),J=n(40734),V=n(80539),L=n(38333),_=n(73553),q=n(46321),j=n(19521),K=n(76597),Q=n(59136),Y=n(8752),$=n(79839),z=(0,g.w)((function(e){var t,n=e.updateDashboardDetailsState,g=e.charts,z=e.dashboardDetails,W=e.fetchDashboard,X=e.followDashboardHandler,ee=e.unFollowDashboardHandler,te=e.chartDescriptionUpdateHandler,ne=e.chartTagUpdateHandler,re=e.versionHandler,ie=e.createThread,ae=e.onUpdateVote,le=e.onDashboardUpdate,se=e.handleToggleDelete,oe=(0,s.$)().t,ue=(0,u.Eu)().currentUser,ce=(0,o.k6)(),de=(0,o.UO)(),fe=de.fqn,ve=de.tab,pe=void 0===ve?P.M8.DETAILS:ve,he=(0,b.$J)(),me=he.postFeed,ye=he.deleteFeed,be=he.updateFeed,Ee=(0,r.CR)((0,l.useState)(!1),2),ge=Ee[0],Ce=Ee[1],we=(0,r.CR)((0,l.useState)(),2),Ae=we[0],De=we[1],Te=(0,r.CR)((0,l.useState)(0),2),xe=Te[0],Se=Te[1],Re=(0,r.CR)((0,l.useState)(""),2),Oe=Re[0],ke=Re[1],Ne=(0,r.CR)((0,l.useState)(G.Th.Conversation),2),Me=Ne[0],Pe=Ne[1],Ge=(0,r.CR)((0,l.useState)(I.Bd),2),Fe=Ge[0],Ue=Ge[1],Ze=(0,r.CR)((0,l.useState)([]),2),He=Ze[0],Be=Ze[1],Ie=(0,l.useMemo)((function(){return(0,J.p2)(fe)}),[fe]),Je=(0,l.useMemo)((function(){var e=z.tags,t=void 0===e?[]:e;return(0,r.pi)((0,r.pi)({},z),{tier:(0,L.Zk)(t),dashboardTags:(0,L.nD)(t),entityName:(0,H.C_)(z)})}),[z]),Ve=Je.owner,Le=Je.description,_e=Je.entityName,qe=Je.followers,je=void 0===qe?[]:qe,Ke=Je.deleted,Qe=Je.dashboardTags,Ye=Je.tier,$e=(0,l.useMemo)((function(){return{isFollowing:null==je?void 0:je.some((function(e){return e.id===(null==ue?void 0:ue.id)}))}}),[je,ue]).isFollowing,ze=(0,Y.BL)().getEntityPermission,We=(0,l.useCallback)((function(){return(0,r.mG)(void 0,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,ze($.A.DASHBOARD,z.id)];case 1:return e=t.sent(),Ue(e),[3,3];case 2:return t.sent(),(0,q.Eo)(oe("server.fetch-entity-permissions-error",{entity:oe("label.dashboard")})),[3,3];case 3:return[2]}}))}))}),[z.id,ze,Ue]);(0,l.useEffect)((function(){z.id&&We()}),[z.id]);var Xe=(0,l.useCallback)((function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,ze($.A.CHART,e)];case 1:return[2,t.sent()];case 2:return t.sent(),[2,I.Bd];case 3:return[2]}}))}))}),[]),et=function(){return(0,Z.Aq)(P.py.DASHBOARD,Ie,Se)};(0,l.useEffect)((function(){et()}),[fe]);var tt=(0,l.useCallback)((function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:t=[],n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Promise.all(e.map((function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,Xe(e.id)];case 1:return n=r.sent(),t.push({id:e.id,permissions:n}),[2]}}))}))})))];case 2:return n.sent(),Be(t),[3,4];case 3:return n.sent(),(0,q.Eo)(oe("server.fetch-entity-permissions-error",{entity:oe("label.chart")})),[3,4];case 4:return[2]}}))}))}),[z]);(0,l.useEffect)((function(){g&&tt(g)}),[g]);var nt=function(){Ce(!0)},rt=function(){Ce(!1)},it=function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t,n;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:if(Le===e)return[3,6];t=(0,r.pi)((0,r.pi)({},z),{description:e}),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,le(t,"description")];case 2:return i.sent(),[3,5];case 3:return n=i.sent(),(0,q.Eo)(n),[3,5];case 4:return Ce(!1),[7];case 5:return[3,7];case 6:Ce(!1),i.label=7;case 7:return[2]}}))}))},at=(0,l.useCallback)((function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return t=(0,r.pi)((0,r.pi)({},z),{owner:e?(0,r.pi)((0,r.pi)({},Ve),e):void 0}),[4,le(t,"owner")];case 1:return n.sent(),[2]}}))}))}),[Ve]),lt=function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return[4,le((0,r.pi)((0,r.pi)({},z),{extension:e.extension}),"extension")];case 1:return t.sent(),[2]}}))}))},st=function(e,t){De({chart:e,index:t})},ot=function(e,t){return(0,r.mG)(void 0,void 0,void 0,(function(){var n,a,l,s,o;return(0,r.Jh)(this,(function(u){switch(u.label){case 0:return e&&t?(n=null===(o=t.tags)||void 0===o?void 0:o.filter((function(t){return e.some((function(e){return e.tagFQN===t.tagFQN}))})),a=(0,_.eY)(e.filter((function(e){var n;return!(null===(n=t.tags)||void 0===n?void 0:n.some((function(t){return t.tagFQN===e.tagFQN})))}))),l=(0,r.pi)((0,r.pi)({},t),{tags:(0,r.ev)((0,r.ev)([],(0,r.CR)(n)),(0,r.CR)(a))}),s=(0,i.qu)(t,l),[4,ne(t.id,s)]):[3,2];case 1:u.sent(),u.label=2;case 2:return[2]}}))}))},ut=function(e,t){ke(e),t&&Pe(t)},ct=function(e){var t,n=null===(t=null==He?void 0:He.find((function(t){return t.id===e.id})))||void 0===t?void 0:t.permissions;return!(0,a.isUndefined)(n)&&(n.EditTags||n.EditAll)},dt=function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t,n;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return(0,_.eY)(e)&&z?(t=(0,r.ev)((0,r.ev)([],(0,r.CR)(Ye?[Ye]:[])),(0,r.CR)(e)),n=(0,r.pi)((0,r.pi)({},z),{tags:t}),[4,le(n,"tags")]):[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},ft=(0,l.useCallback)((function(e,t){return e?se(t):ce.push("/")}),[]),vt=(0,l.useMemo)((function(){var e=(0,V.Ys)(g);return(0,a.groupBy)((0,a.uniqBy)(e,"value"),(function(e){return e.source}))}),[g]),pt=(0,l.useMemo)((function(){return[{title:oe("label.chart-entity",{entity:oe("label.name")}),dataIndex:"chartName",key:"chartName",width:220,fixed:"left",render:function(e,t){var n=(0,H.C_)(t);return t.sourceUrl?l.createElement("div",{className:"d-flex items-center"},l.createElement(d.Z.Link,{href:t.sourceUrl,target:"_blank"},l.createElement("span",{className:"break-all"},n),l.createElement(y.ReactComponent,{className:"m-l-xs flex-none",height:14,width:14}))):l.createElement(d.Z.Text,{className:"w-full"},n)}},{title:oe("label.chart-entity",{entity:oe("label.type")}),dataIndex:"chartType",key:"chartType",width:120},{title:oe("label.description"),dataIndex:"description",key:"description",width:350,render:function(e,t,n){var r,i,s=null===(r=null==He?void 0:He.find((function(e){return e.id===t.id})))||void 0===r?void 0:r.permissions,o=!(0,a.isUndefined)(s)&&(s.EditDescription||s.EditAll);return l.createElement(S.Z,{columnData:{fqn:null!==(i=t.fullyQualifiedName)&&void 0!==i?i:"",field:t.description},entityFqn:Ie,entityType:P.py.DASHBOARD,hasEditPermission:o,index:n,isReadOnly:Ke,onClick:function(){return st(t,n)},onThreadLinkSelect:ut})}},{title:oe("label.tag-plural"),dataIndex:"tags",key:"tags",accessor:"tags",width:300,filterIcon:(0,L.zT)("tag-filter"),render:function(e,t,n){return l.createElement(R.Z,{entityFqn:Ie,entityType:P.py.DASHBOARD,handleTagSelection:ot,hasTagEditAccess:ct(t),index:n,isReadOnly:Ke,record:t,tags:e,type:F.c6.Classification,onThreadLinkSelect:ut})},filters:vt.Classification,filterDropdown:x.x,onFilter:V.n5},{title:oe("label.glossary-term-plural"),dataIndex:"tags",key:"glossary",accessor:"tags",width:300,filterIcon:(0,L.zT)("glossary-filter"),render:function(e,t,n){return l.createElement(R.Z,{entityFqn:Ie,entityType:P.py.DASHBOARD,handleTagSelection:ot,hasTagEditAccess:ct(t),index:n,isReadOnly:Ke,record:t,tags:e,type:F.c6.Glossary,onThreadLinkSelect:ut})},filters:vt.Glossary,filterDropdown:x.x,onFilter:V.n5}]}),[Ke,He,ut,ct,st,ot,B.S$]),ht=(0,l.useMemo)((function(){return{editTagsPermission:(Fe.EditTags||Fe.EditAll)&&!Ke,editDescriptionPermission:(Fe.EditDescription||Fe.EditAll)&&!Ke,editCustomAttributePermission:(Fe.EditAll||Fe.EditCustomFields)&&!Ke,editAllPermission:Fe.EditAll&&!Ke,editLineagePermission:(Fe.EditAll||Fe.EditLineage)&&!Ke,viewAllPermission:Fe.ViewAll}}),[Fe,Ke]),mt=ht.editTagsPermission,yt=ht.editDescriptionPermission,bt=ht.editCustomAttributePermission,Et=ht.editAllPermission,gt=ht.editLineagePermission,Ct=ht.viewAllPermission,wt=(0,l.useMemo)((function(){var e,t;return[{label:l.createElement(O.Z,{id:P.M8.DETAILS,name:oe("label.detail-plural")}),key:P.M8.DETAILS,children:l.createElement(f.Z,{gutter:[0,16],wrap:!1},l.createElement(v.Z,{className:"p-t-sm m-x-lg",flex:"auto"},l.createElement("div",{className:"d-flex flex-col gap-4"},l.createElement(C.Z,{description:z.description,entityFqn:Ie,entityName:_e,entityType:P.py.DASHBOARD,hasEditAccess:yt,isEdit:ge,owner:z.owner,showActions:!Ke,onCancel:rt,onDescriptionEdit:nt,onDescriptionUpdate:it,onThreadLinkSelect:ut}),(0,a.isEmpty)(g)?l.createElement(c.Z,null):l.createElement(p.Z,{bordered:!0,columns:pt,"data-testid":"charts-table",dataSource:g,pagination:!1,rowKey:"id",scroll:{x:1200},size:"small"}))),l.createElement(v.Z,{className:"entity-tag-right-panel-container","data-testid":"entity-right-panel",flex:"320px"},l.createElement(h.Z,{className:"w-full",direction:"vertical",size:"large"},l.createElement(A.Z,{activeDomain:null==z?void 0:z.domain,dataProducts:null!==(e=null==z?void 0:z.dataProducts)&&void 0!==e?e:[],hasPermission:!1}),l.createElement(k.Z,{displayType:N.F.READ_MORE,entityFqn:Ie,entityType:P.py.DASHBOARD,permission:mt,selectedTags:Qe,tagType:F.c6.Classification,onSelectionChange:dt,onThreadLinkSelect:ut}),l.createElement(k.Z,{displayType:N.F.READ_MORE,entityFqn:Ie,entityType:P.py.DASHBOARD,permission:mt,selectedTags:Qe,tagType:F.c6.Glossary,onSelectionChange:dt,onThreadLinkSelect:ut}))))},{label:l.createElement(O.Z,{count:xe,id:P.M8.ACTIVITY_FEED,isActive:pe===P.M8.ACTIVITY_FEED,name:oe("label.activity-feed-and-task-plural")}),key:P.M8.ACTIVITY_FEED,children:l.createElement(E.K,{entityType:P.py.DASHBOARD,fqn:null!==(t=null==z?void 0:z.fullyQualifiedName)&&void 0!==t?t:"",onFeedUpdate:et,onUpdateEntityDetails:W})},{label:l.createElement(O.Z,{id:P.M8.LINEAGE,name:oe("label.lineage")}),key:P.M8.LINEAGE,children:l.createElement(D.Z,{deleted:Ke,entity:z,entityType:P.py.DASHBOARD,hasEditAccess:gt})},{label:l.createElement(O.Z,{id:P.M8.CUSTOM_PROPERTIES,name:oe("label.custom-property-plural")}),key:P.M8.CUSTOM_PROPERTIES,children:l.createElement(K.t,{entityType:P.py.DASHBOARD,handleExtensionUpdate:lt,hasEditAccess:bt,hasPermission:Ct})}]}),[xe,pe,ge,pt,z,g,Ke,_e,Qe,B.S$,rt,nt,it,ut,dt,mt,gt,yt,bt,Et,Ct]);return l.createElement(T.Z,{className:"bg-white",pageTitle:oe("label.entity-detail-plural",{entity:oe("label.dashboard")}),title:"Table details"},l.createElement(f.Z,{gutter:[0,12]},l.createElement(v.Z,{className:"p-x-lg",span:24},l.createElement(w.U$,{isRecursiveDelete:!0,afterDeleteAction:ft,afterDomainUpdateAction:n,dataAsset:z,entityType:P.py.DASHBOARD,permissions:Fe,onDisplayNameUpdate:function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return t=(0,r.pi)((0,r.pi)({},z),{displayName:e.displayName}),[4,le(t,"displayName")];case 1:return n.sent(),[2]}}))}))},onFollowClick:function(){return(0,r.mG)(void 0,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return $e?[4,ee()]:[3,2];case 1:return e.sent(),[3,4];case 2:return[4,X()];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))},onOwnerUpdate:at,onRestoreDataAsset:function(){return(0,r.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,U.Fg)(z.id)];case 1:return e=n.sent().version,(0,q.XA)(oe("message.restore-entities-success",{entity:oe("label.dashboard")}),2e3),se(e),[3,3];case 2:return t=n.sent(),(0,q.Eo)(t,oe("message.restore-entities-error",{entity:oe("label.dashboard")})),[3,3];case 3:return[2]}}))}))},onTierUpdate:function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t,n,i;return(0,r.Jh)(this,(function(a){switch(a.label){case 0:return t=(0,_.Jf)(null!==(i=null==z?void 0:z.tags)&&void 0!==i?i:[],e),n=(0,r.pi)((0,r.pi)({},z),{tags:t}),[4,le(n,"tags")];case 1:return a.sent(),[2]}}))}))},onUpdateVote:ae,onVersionClick:re})),l.createElement(v.Z,{span:24},l.createElement(m.Z,{activeKey:null!=pe?pe:P.M8.SCHEMA,className:"entity-details-page-tabs","data-testid":"tabs",items:wt,onChange:function(e){e!==pe&&ce.push((0,M.pB)(Ie,e))}}))),Ae&&l.createElement(Q.p,{header:oe("label.edit-chart-name",{name:(0,H.C_)(Ae.chart)}),placeholder:oe("label.enter-field-description",{field:oe("label.chart")}),value:null!==(t=Ae.chart.description)&&void 0!==t?t:"",visible:Boolean(Ae),onCancel:function(){De(void 0)},onSave:function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t,n,a;return(0,r.Jh)(this,(function(l){switch(l.label){case 0:if(!Ae)return[3,6];t=(0,r.pi)((0,r.pi)({},Ae.chart),{description:e}),n=(0,i.qu)(g[Ae.index],t),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,te(Ae.index,Ae.chart.id,n)];case 2:return l.sent(),[3,5];case 3:return a=l.sent(),(0,q.Eo)(a),[3,5];case 4:return De(void 0),[7];case 5:return[3,7];case 6:De(void 0),l.label=7;case 7:return[2]}}))}))}}),Oe?l.createElement(j.Z,{createThread:ie,deletePostHandler:ye,open:Boolean(Oe),postFeedHandler:me,threadLink:Oe,threadType:Me,updateThreadHandler:be,onCancel:function(){ke("")}}):null)})),W=n(69523),X=n(61105),ee=n(46470),te=n(76373),ne=n(13932),re=function(){var e,t=(0,s.$)().t,n=(0,u.Eu)().currentUser,d=null!==(e=null==n?void 0:n.id)&&void 0!==e?e:"",f=(0,o.k6)(),v=(0,Y.BL)().getEntityPermissionByFqn,p=(0,o.UO)().fqn,h=(0,r.CR)((0,l.useState)({}),2),m=h[0],y=h[1],b=(0,r.CR)((0,l.useState)(!1),2),E=b[0],g=b[1],C=(0,r.CR)((0,l.useState)([]),2),w=C[0],A=C[1],D=(0,r.CR)((0,l.useState)(!1),2),T=D[0],x=D[1],S=(0,r.CR)((0,l.useState)(I.Bd),2),R=S[0],O=S[1],k=m.id,N=m.version,G=(0,l.useMemo)((function(){return R.ViewAll||R.ViewUsage}),[R]),F=function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var n,i,a,l,s,o,u,c;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:g(!0),r.label=1;case 1:return r.trys.push([1,3,4,5]),n=ne.he,G&&(n+=","+P.GB.USAGE_SUMMARY),[4,(0,U.qK)(e,n)];case 2:return i=r.sent(),a=i.id,l=i.fullyQualifiedName,s=i.charts,o=i.serviceType,y(i),(0,Z.nk)({displayName:(0,H.C_)(i),entityType:P.py.DASHBOARD,fqn:null!=l?l:"",serviceType:o,timestamp:0,id:a}),(0,ne.Mn)(s).then((function(e){A(e)})).catch((function(e){(0,q.Eo)(e,t("server.entity-fetch-error",{entity:t("label.chart-plural")}))})),g(!1),[3,5];case 3:return u=r.sent(),404===(null===(c=u.response)||void 0===c?void 0:c.status)?x(!0):(0,q.Eo)(u,t("server.entity-details-fetch-error",{entityType:t("label.dashboard"),entityName:e})),[3,5];case 4:return g(!1),[7];case 5:return[2]}}))}))},B=(0,l.useCallback)((function(e){var t=e;y((function(e){return(0,r.pi)((0,r.pi)({},null!=e?e:t),{version:t.version})}))}),[]);return(0,l.useEffect)((function(){(R.ViewAll||R.ViewBasic)&&F(p)}),[p,R]),(0,l.useEffect)((function(){var e;e=p,(0,r.mG)(void 0,void 0,void 0,(function(){var n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:g(!0),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,v($.A.DASHBOARD,e)];case 2:return n=r.sent(),O(n),[3,5];case 3:return r.sent(),(0,q.Eo)(t("server.fetch-entity-permissions-error",{entity:e})),[3,5];case 4:return g(!1),[7];case 5:return[2]}}))}))}),[p]),E?l.createElement(W.Z,null):T?l.createElement(c.Z,null,(0,Z.mW)("dashboard",p)):R.ViewAll||R.ViewBasic?l.createElement(z,{chartDescriptionUpdateHandler:function(e,t,n){return(0,r.mG)(void 0,void 0,void 0,(function(){var i,a;return(0,r.Jh)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,(0,ee.L)(t,n)];case 1:return i=l.sent(),A((function(t){var n=(0,r.ev)([],(0,r.CR)(t));return n[e]=i,n})),[3,3];case 2:return a=l.sent(),(0,q.Eo)(a),[3,3];case 3:return[2]}}))}))},chartTagUpdateHandler:function(e,n){return(0,r.mG)(void 0,void 0,void 0,(function(){var i,a;return(0,r.Jh)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,(0,ee.L)(e,n)];case 1:return i=l.sent(),A((function(t){var n=(0,r.ev)([],(0,r.CR)(t)).map((function(t){return t.id===e?i:t}));return(0,ne.QM)(n)})),[3,3];case 2:return a=l.sent(),(0,q.Eo)(a,t("server.entity-updating-error",{entity:t("label.chart-plural")})),[3,3];case 3:return[2]}}))}))},charts:w,createThread:function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,te.Kl)(e)];case 1:return r.sent(),[3,3];case 2:return n=r.sent(),(0,q.Eo)(n,t("server.create-entity-error",{entity:t("label.conversation")})),[3,3];case 3:return[2]}}))}))},dashboardDetails:m,fetchDashboard:function(){return F(p)},followDashboardHandler:function(){return(0,r.mG)(void 0,void 0,void 0,(function(){var e,n,i;return(0,r.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(0,U.vs)(k,d)];case 1:return e=a.sent(),n=e.changeDescription.fieldsAdded[0].newValue,y((function(e){var t;return(0,r.pi)((0,r.pi)({},e),{followers:(0,r.ev)((0,r.ev)([],(0,r.CR)(null!==(t=null==e?void 0:e.followers)&&void 0!==t?t:[])),(0,r.CR)(n))})})),[3,3];case 2:return i=a.sent(),(0,q.Eo)(i,t("server.entity-follow-error",{entity:(0,H.C_)(m)})),[3,3];case 3:return[2]}}))}))},handleToggleDelete:function(e){y((function(t){return t?(0,r.pi)((0,r.pi)((0,r.pi)({},t),{deleted:!(null==t?void 0:t.deleted)}),e?{version:e}:{}):t}))},unFollowDashboardHandler:function(){return(0,r.mG)(void 0,void 0,void 0,(function(){var e,n,i;return(0,r.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(0,U.mM)(k,d)];case 1:return e=a.sent(),n=e.changeDescription.fieldsDeleted[0].oldValue,y((function(e){var t,i;return(0,r.pi)((0,r.pi)({},e),{followers:null!==(i=null===(t=e.followers)||void 0===t?void 0:t.filter((function(e){return e.id!==n[0].id})))&&void 0!==i?i:[]})})),[3,3];case 2:return i=a.sent(),(0,q.Eo)(i,t("server.entity-unfollow-error",{entity:(0,H.C_)(m)})),[3,3];case 3:return[2]}}))}))},updateDashboardDetailsState:B,versionHandler:function(){N&&f.push((0,M.h4)(P.py.DASHBOARD,p,(0,a.toString)(N)))},onDashboardUpdate:function(e,t){return(0,r.mG)(void 0,void 0,void 0,(function(){var n,l;return(0,r.Jh)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,(o=e,u=(0,i.qu)((0,a.omitBy)(m,a.isUndefined),o),(0,U.oH)(k,u))];case 1:return n=s.sent(),y((function(e){var i,a;return(0,r.pi)((0,r.pi)({},e),((i={version:n.version})[t]="tags"===t?(0,Z.ch)(null!==(a=n[t])&&void 0!==a?a:[]):n[t],i))})),[3,3];case 2:return l=s.sent(),(0,q.Eo)(l),[3,3];case 3:return[2]}var o,u}))}))},onUpdateVote:function(e,t){return(0,r.mG)(void 0,void 0,void 0,(function(){var n,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,(0,U.tr)(t,e)];case 1:return r.sent(),[4,(0,U.qK)(p,ne.he)];case 2:return n=r.sent(),y(n),[3,4];case 3:return i=r.sent(),(0,q.Eo)(i),[3,4];case 4:return[2]}}))}))}}):l.createElement(c.Z,{type:X.Wx.PERMISSION})}}}]);