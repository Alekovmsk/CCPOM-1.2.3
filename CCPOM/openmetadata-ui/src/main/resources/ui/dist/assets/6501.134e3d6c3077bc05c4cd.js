"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[6501],{96501:function(e,t,a){a.r(t);var l=a(70655),n=a(56256),i=a(49409),r=a(4107),c=a(27049),s=a(19650),m=a(71577),d=a(23031),o=a(96486),u=a(67294),p=a(15137),y=a(79686),b=a(18927),f=a(26387),h=a(96162),E=a(62761),v=a(16139),g=a(85303),Z=a(80897),w=a(93895),x=a(96840),k=a(46321),C=a(87684),N=(0,x.DW)(h.lx.POLICIES),P=[{name:(0,d.t)("label.setting-plural"),url:(0,x.si)()},{name:(0,d.t)("label.policy-plural"),url:N},{name:(0,d.t)("label.add-new-entity",{entity:(0,d.t)("label.policy-v")}),url:""}];t.default=function(){var e=(0,p.k6)(),t=(0,l.CR)((0,u.useState)(""),2),a=t[0],h=t[1],T=(0,l.CR)((0,u.useState)(""),2),I=T[0],R=T[1],S=(0,l.CR)((0,u.useState)({name:"",description:"",resources:[],operations:[],condition:"",effect:g.Q.Allow}),2),D=S[0],Q=S[1];return u.createElement(y.Z,{firstPanel:{children:u.createElement("div",{className:"max-width-md w-9/10 service-form-container","data-testid":"add-policy-container"},u.createElement(f.Z,{titleLinks:P}),u.createElement("div",{className:"m-t-md"},u.createElement(n.Z.Paragraph,{className:"text-base","data-testid":"form-title"},(0,d.t)("label.add-new-entity",{entity:(0,d.t)("label.policy-v")})),u.createElement(i.Z,{"data-testid":"policy-form",id:"policy-form",initialValues:{ruleEffect:D.effect},layout:"vertical",onFinish:function(){return(0,l.mG)(void 0,void 0,void 0,(function(){var t,n,i,r,c,s;return(0,l.Jh)(this,(function(m){switch(m.label){case 0:t=(0,l.pi)((0,l.pi)({},D),{name:(0,o.trim)(D.name)}),n=t.condition,i=(0,l._T)(t,["condition"]),r={name:(0,o.trim)(a),description:I,rules:[n?(0,l.pi)((0,l.pi)({},i),{condition:n}):i]},m.label=1;case 1:return m.trys.push([1,3,,4]),[4,(0,Z.u$)(r)];case 2:return(c=m.sent())&&e.push((0,x.Hr)(c.fullyQualifiedName||"")),[3,4];case 3:return s=m.sent(),(0,k.Eo)((0,w.B)(s,E.c9.alreadyExist)?(0,d.t)("server.entity-already-exist",{entity:(0,d.t)("label.policy"),entityPlural:(0,d.t)("label.policy-lowercase-plural"),name:r.name}):s),[3,4];case 4:return[2]}}))}))}},u.createElement(i.Z.Item,{label:(0,d.t)("label.name")+":",name:"name",rules:[{required:!0,max:128,min:1,message:""+(0,d.t)("message.entity-size-in-between",{entity:""+(0,d.t)("label.name"),max:"128",min:"1"})},{pattern:v.$Q,message:(0,d.t)("message.entity-name-validation")}]},u.createElement(r.Z,{"data-testid":"policy-name",placeholder:(0,d.t)("label.policy-name"),type:"text",value:a,onChange:function(e){return h(e.target.value)}})),u.createElement(i.Z.Item,{label:(0,d.t)("label.description")+":",name:"description"},u.createElement(b.Z,{height:"200px",initialValue:I,placeHolder:(0,d.t)("message.write-your-description"),style:{margin:0},onTextChange:function(e){return R(e)}})),u.createElement(c.Z,{"data-testid":"add-rule-divider"},(0,d.t)("label.add-entity",{entity:(0,d.t)("label.rule")})),u.createElement(C.Z,{ruleData:D,setRuleData:Q}),u.createElement(s.Z,{align:"center",className:"w-full justify-end"},u.createElement(m.Z,{"data-testid":"cancel-btn",type:"link",onClick:function(){e.push(N)}},(0,d.t)("label.cancel")),u.createElement(m.Z,{"data-testid":"submit-btn",form:"policy-form",htmlType:"submit",type:"primary"},(0,d.t)("label.submit")))))),minWidth:700,flex:.7},pageTitle:(0,d.t)("label.add-entity",{entity:(0,d.t)("label.policy-v")}),secondPanel:{children:u.createElement(u.Fragment,null,u.createElement(n.Z.Paragraph,{className:"text-base font-medium"},(0,d.t)("label.add-entity",{entity:(0,d.t)("label.policy-v")})),u.createElement(n.Z.Text,null,(0,d.t)("message.add-policy-message"))),className:"p-md service-doc-panel",minWidth:60,overlay:{displayThreshold:200,header:(0,d.t)("label.setup-guide"),rotation:"counter-clockwise"}}})}}}]);