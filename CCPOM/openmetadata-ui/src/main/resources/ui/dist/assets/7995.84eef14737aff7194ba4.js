"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[7995],{27995:function(e,t,n){n.r(t),n.d(t,{default:function(){return G}});var r=n(70655),l=n(67294),a=n(80646),i=n(62761),u=n(90108),c=n(46321),s=n(71230),o=n(15746),m=n(56256),d=n(71577),f=n(34041),E=n(68432),C=n(15137),v=n(73276),p=n(57599),h=n(88816),N=n(8752),y=n(79839),b=n(19586),I=n(96486),g=n(97638),T=n(72972),Z=function(e){var t=e.loading,n=e.children;return t?l.createElement("div",{className:"m-b-md p-md"},l.createElement(b.Z,{active:!0,paragraph:{rows:0}}),l.createElement(s.Z,{gutter:32,justify:"space-between"},l.createElement(o.Z,{span:24},l.createElement(T.Z,null)),l.createElement(o.Z,{className:"m-t-md",span:24},l.createElement(T.Z,null)),l.createElement(o.Z,{className:"m-t-md",span:24},(0,g.kK)().map((function(){return l.createElement(T.Z,{className:"p-xs",key:(0,I.uniqueId)()})}))))):n},R=n(72819),w=n(24671),A=n(59291),_=n(39570),S=n(96840),L=function(e){var t=e.clientCenters,n=(0,E.$)().t,a=(0,N.BL)().permissions,u=(0,C.UO)().fqn,c=u?decodeURIComponent(u):null,b=(0,C.k6)(),I=(0,l.useMemo)((function(){return(0,_.P_)(R.OX.Create,y.A.CLIENT_CENTER,a)}),[a]),g=(0,l.useMemo)((function(){return c?A.Z.split(c)[0]:t[0].fullyQualifiedName}),[c]),T=(0,l.useMemo)((function(){return t.reduce((function(e,t){var n;return(0,r.ev)((0,r.ev)([],(0,r.CR)(e)),[{key:null!==(n=t.fullyQualifiedName)&&void 0!==n?n:"",label:(0,w.C_)(t),icon:l.createElement(v.ReactComponent,{height:16,width:16})}])}),[])}),[t]),L=(0,l.useMemo)((function(){return t.reduce((function(e,t){var n;return(0,r.ev)((0,r.ev)([],(0,r.CR)(e)),[{value:null!==(n=t.fullyQualifiedName)&&void 0!==n?n:"",label:(0,w.C_)(t)}])}),[])}),[t]);return l.createElement(h.Z,{id:"clientCenter"},l.createElement(Z,{loading:0===t.length},l.createElement(s.Z,{className:"p-y-xs",gutter:[0,16]},l.createElement(o.Z,{className:"p-x-sm",span:24},l.createElement(m.Z.Text,{strong:!0,className:"m-b-0"},n("label.client-center"))),I&&l.createElement(o.Z,{className:"p-x-sm",span:24},l.createElement(d.Z,{block:!0,className:"text-primary","data-testid":"add-clientCenter",onClick:function(){b.push(i.dt.ADD_CLIENT_CENTER)}},l.createElement("div",{className:"flex-center"},l.createElement(p.ReactComponent,{className:"anticon m-r-xss"}),n("label.add")))),l.createElement(o.Z,{span:24},T.length?l.createElement(l.Fragment,null,l.createElement(f.Z,{showSearch:!0,options:L,style:{width:"100%",padding:5},onChange:function(e){console.log(e),b.push((0,S.CM)(e))},defaultValue:g})):l.createElement("p",{className:"text-grey-muted text-center"},l.createElement("span",null,n("label.no-client-center-found")))))))},V=n(34901),M=n(83716),k=n(39958),x=n(69523),D=n(73213),O=n(92693),Q=n(61105),P=function(e){var t=e.isDoc,n=e.headerVisible,a=void 0===n||n,s=(0,E.$)().t,o=(0,N.BL)().permissions,m=(0,C.UO)().fqn,d=t&&decodeURIComponent(m)?decodeURIComponent(m):A.Z.split(decodeURIComponent(m))[0],f=(0,C.k6)(),v=(0,r.CR)((0,l.useState)([]),2),p=v[0],h=v[1],b=(0,r.CR)((0,l.useState)(!0),2),I=b[0],g=b[1],T=(0,r.CR)((0,l.useState)(Q.Vu.INITIAL),2),Z=T[0],w=T[1],L=(0,r.CR)((0,l.useState)(),2),P=L[0],U=L[1],G=(0,r.CR)((0,l.useState)(!0),2),J=G[0],W=G[1],X=(0,r.CR)((0,l.useState)(),2),q=X[0],F=X[1],B=(0,l.useMemo)((function(){return W(!0),U(void 0),!d||1===A.Z.split(d).length}),[d]),j=(0,l.useMemo)((function(){return(0,_.P_)(R.OX.Create,B?y.A.CLIENT_CENTER:y.A.CLIENT_CENTER_CLIENT,o)}),[o,B]),$=(0,l.useMemo)((function(){return(0,_.P_)(R.OX.ViewBasic,B?y.A.CLIENT_CENTER:y.A.CLIENT_CENTER_CLIENT,o)}),[o,B]),z=(0,l.useMemo)((function(){return(0,_.P_)(R.OX.ViewAll,B?y.A.CLIENT_CENTER:y.A.CLIENT_CENTER_CLIENT,o)}),[o,B]),K=function(){return(0,r.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:W(!0),g(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,(0,u.ui)({fields:"owner,tags,reviewers,votes,domain",limit:i.SF})];case 2:return e=n.sent().data,h(e),[3,5];case 3:return t=n.sent(),(0,c.Eo)(t),[3,5];case 4:return g(!1),W(!1),[7];case 5:return[2]}}))}))};(0,l.useEffect)((function(){K()}),[]);var H=function(){return(0,r.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:W(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,(0,u.kV)(d,"relatedClients,reviewers,tags,owner,children,votes,domain")];case 2:return e=n.sent(),U(e),[3,5];case 3:return t=n.sent(),(0,c.Eo)(t),[3,5];case 4:return W(!1),[7];case 5:return[2]}}))}))};(0,l.useEffect)((function(){W(!0),p.length&&(B?(U(p.find((function(e){return e.fullyQualifiedName===d}))||p[0]),!d&&p[0].fullyQualifiedName&&f.replace((0,S.CM)(p[0].fullyQualifiedName)),W(!1)):H())}),[B,d,p]);var Y=(0,l.useCallback)((function(e){F(e)}),[]);return I?l.createElement(x.Z,null):$||z?0!==p.length||I?l.createElement(l.Fragment,null,J?l.createElement(x.Z,null):l.createElement(k.Z,{deleteStatus:Z,isClientCenterActive:B,isSummaryPanelOpen:Boolean(q),isVersionsView:!1,refreshActiveClientCenterClient:H,selectedData:P,updateClientCenter:function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t,n,l;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:t=(0,V.qu)(P,e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,u.fS)(null==P?void 0:P.id,t)];case 2:return n=r.sent(),h((function(e){return e.map((function(e){return e.name===n.name?n:e}))})),(null==P?void 0:P.name)!==e.name&&(f.push((0,S.CM)(n.fullyQualifiedName)),K()),[3,4];case 3:return l=r.sent(),(0,c.Eo)(l),[3,4];case 4:return[2]}}))}))},updateVote:function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t,n,l;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),A.Z.split(null==P?void 0:P.fullyQualifiedName).length<=1?[4,(0,u.mz)(null!==(n=null==P?void 0:P.id)&&void 0!==n?n:"",e)]:[3,2];case 1:return r.sent(),K(),[3,4];case 2:return[4,(0,u.aT)(null!==(l=null==P?void 0:P.id)&&void 0!==l?l:"",e)];case 3:r.sent(),H(),r.label=4;case 4:return[3,6];case 5:return t=r.sent(),(0,c.Eo)(t),[3,6];case 6:return[2]}}))}))},onAssetClick:Y,onClientCenterDelete:function(e){w(Q.Vu.WAITING),(0,u.O5)(e).then((function(){w(Q.Vu.SUCCESS),(0,c.XA)(s("server.entity-deleted-successfully",{entity:s("label.client-center")})),g(!0);var t=p.filter((function(t){return t.id!==e})),n=t.length>0?(0,S.CM)(t[0].fullyQualifiedName):(0,S.CM)();f.push(n),K()})).catch((function(e){(0,c.Eo)(e,s("server.delete-entity-error",{entity:s("label.client-center")}))})).finally((function(){return w(Q.Vu.INITIAL)}))},onClientCenterClientDelete:function(e){w(Q.Vu.WAITING),(0,u.OL)(e).then((function(){var e;if(w(Q.Vu.SUCCESS),(0,c.XA)(s("server.entity-deleted-successfully",{entity:s("label.client-center-client")})),d){var t=A.Z.split(d);t.pop(),e=t.join(D.o)}g(!0),f.push((0,S.CM)(e)),K()})).catch((function(e){(0,c.Eo)(e,s("server.delete-entity-error",{entity:s("label.client-center-client")}))})).finally((function(){return w(Q.Vu.INITIAL)}))},onClientCenterClientUpdate:function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t,n,l;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:t=(0,V.qu)(P,e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,u.NJ)(null==P?void 0:P.id,t)];case 2:if(!(n=r.sent()))throw s("server.entity-updating-error",{entity:s("label.client-center-client")});return U(n),(null==P?void 0:P.name)!==e.name&&(f.push((0,S.CM)(n.fullyQualifiedName)),K()),[3,4];case 3:return l=r.sent(),(0,c.Eo)(l),[3,4];case 4:return[2]}}))}))},headerVisible:a})):l.createElement(M.Z,{buttonId:"add-clientCenter",className:"mt-0-important",doc:O.Cs,heading:s("label.client-center"),permission:j,type:j?Q.Wx.CREATE:Q.Wx.NO_DATA,onClick:function(){f.push(i.dt.ADD_CLIENT_CENTER)}}):l.createElement(M.Z,{type:Q.Wx.PERMISSION})},U=n(23031),G=function(){var e=(0,r.CR)((0,l.useState)([]),2),t=e[0],n=e[1],m=(0,r.CR)((0,l.useState)(!1),2),d=m[0],f=m[1];return(0,l.useEffect)((function(){(0,r.mG)(void 0,void 0,void 0,(function(){var e,t,l;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:e=!1,r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,(0,u.ui)({fields:"owner,tags,reviewers,votes,domain",limit:i.SF})];case 2:return t=r.sent().data,n(t),e=t.length>0,[3,5];case 3:return l=r.sent(),(0,c.Eo)(l),[3,5];case 4:return e&&f(!0),[7];case 5:return[2]}}))}))}),[]),l.createElement(a.Z,{className:"client-center-page-layout",pageTitle:(0,U.t)("label.client-center"),leftPanelWidth:400,leftPanel:d&&l.createElement(l.Fragment,null,l.createElement(L,{clientCenters:t}),l.createElement(o.Z,{span:24},l.createElement(P,{isDoc:!1,headerVisible:!1}))),rightPanelWidth:400},l.createElement(s.Z,{gutter:[0,8]},l.createElement(o.Z,{span:24},l.createElement(P,{isDoc:!0}))))}}}]);