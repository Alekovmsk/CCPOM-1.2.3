"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[2438],{38105:function(e,t,n){n.d(t,{bX:function(){return x},CT:function(){return T},ZP:function(){return k}});var a=n(53014),r=n(27049),l=n(19650),i=n(56256),s=n(71230),c=n(15746),u=n(71577),o=n(96486),m=n(67294),d=n(68432),p=n(75111),f=n(8642),E=n(24053),v=n(22835),y=n(64632),h=n(23031),g=n(49795),b=n(58369),Z=n(24671),N=n(902),S=n(87078),C=n(40734),w=n(26387),x=function(e){var t=e.label,n=e.value;return m.createElement(m.Fragment,null,m.createElement(r.Z,{className:"self-center m-x-sm",type:"vertical"}),m.createElement(l.Z,{align:"center"},m.createElement(i.Z.Text,{className:"self-center text-xs whitespace-nowrap"},!(0,o.isEmpty)(t)&&m.createElement("span",{className:"text-grey-muted"},t+": ")),m.createElement(i.Z.Text,{className:"self-center text-xs whitespace-nowrap font-medium"},(0,C.hl)(n))))},T=function(e){var t=e.value,n=e.href;return m.createElement(m.Fragment,null,m.createElement(r.Z,{className:"self-center m-x-sm",type:"vertical"}),m.createElement("div",{className:"d-flex items-center text-xs"},m.createElement(i.Z.Link,{href:n,style:{fontSize:"12px"}},(0,C.hl)(t))))},k=function(e){var t,n,C,k=e.breadcrumbLinks,R=e.version,A=e.deleted,D=e.displayName,P=e.currentVersionData,M=e.ownerDisplayName,O=e.tierDisplayName,V=e.ownerRef,I=e.onVersionClick,z=e.entityType,_=e.serviceName,H=e.domainDisplayName,U=(0,d.$)().t,B=(0,m.useMemo)((function(){return function(e,t){var n,a=null!==(n=t.changeDescription)&&void 0!==n?n:{};switch(e){case y.py.TOPIC:var l=t,s=(0,N._Y)(a,b.Sn.PARTITIONS,(0,o.toString)(l.partitions)),c=(0,N._Y)(a,b.Sn.REPLICATION_FACTOR,(0,o.toString)(l.replicationFactor));return m.createElement(m.Fragment,null,!(0,o.isEmpty)(s)&&m.createElement(x,{label:(0,h.t)("label.partition-plural"),value:s}),!(0,o.isEmpty)(c)&&m.createElement(x,{label:(0,h.t)("label.replication-factor"),value:c}));case y.py.PIPELINE:case y.py.DASHBOARD:return function(e,t){var n=e,a=(0,N._Y)(t,b.Sn.SOURCE_URL,(0,o.toString)(n.sourceUrl)),l=(0,N.gY)(b.Sn.SOURCE_URL,t,!0),s=(0,N.Ez)(l);return(0,o.isEmpty)(a)?null:m.createElement(m.Fragment,null,(0,o.isUndefined)(s)?m.createElement(m.Fragment,null,m.createElement(r.Z,{className:"self-center m-x-sm",type:"vertical"}),m.createElement("div",{className:"d-flex items-center text-xs"},m.createElement(i.Z.Link,{href:n.sourceUrl,style:{fontSize:"12px"}},(0,Z.C_)(n)," "),m.createElement(g.ReactComponent,{className:"m-l-xss ",width:14})," ")):m.createElement(T,{href:n.sourceUrl,value:a}))}(t,a);default:return null}}(z,P)}),[z,P]),F=(0,m.useMemo)((function(){var e;return S.Z.getServiceTypeLogo(null!==(e=P.serviceType)&&void 0!==e?e:"")}),[P.serviceType]);return m.createElement(s.Z,{className:"p-x-lg",gutter:[8,12],justify:"space-between"},m.createElement(c.Z,{className:"self-center",span:21},m.createElement(s.Z,{gutter:[16,12]},m.createElement(c.Z,{span:24},m.createElement(w.Z,{titleLinks:k})),m.createElement(c.Z,{span:24},m.createElement(v.Z,{deleted:A,displayName:D,icon:P.serviceType&&m.createElement("img",{className:"h-9",src:F}),name:null==P?void 0:P.name,serviceName:null!=_?_:""})),m.createElement(c.Z,{span:24},m.createElement("div",{className:"d-flex no-wrap"},z!==y.py.METADATA_SERVICE&&m.createElement(m.Fragment,null,m.createElement(f.y,{domain:P.domain,domainDisplayName:H,entityFqn:null!==(t=P.fullyQualifiedName)&&void 0!==t?t:"",entityId:null!==(n=P.id)&&void 0!==n?n:"",entityType:z,hasPermission:!1}),m.createElement(r.Z,{className:"self-center m-x-sm",type:"vertical"})),m.createElement(E.V,{owner:null!==(C=null==P?void 0:P.owner)&&void 0!==C?C:V,ownerDisplayName:M}),m.createElement(r.Z,{className:"self-center m-x-sm",type:"vertical"}),m.createElement(l.Z,null,O?m.createElement("span",{className:"font-medium text-xs","data-testid":"Tier"},O):m.createElement("span",{className:"font-medium text-xs","data-testid":"Tier"},U("label.no-entity",{entity:U("label.tier")}))),B)))),m.createElement(c.Z,{span:3},m.createElement(s.Z,{justify:"end"},m.createElement(c.Z,null,m.createElement(u.Z,{className:"w-16 p-0","data-testid":"version-button",icon:m.createElement(a.Z,{component:p.ReactComponent}),onClick:I},m.createElement(i.Z.Text,null,R))))))}},33873:function(e,t,n){n.d(t,{Z:function(){return P}});var a=n(70655),r=n(60331),l=n(56256),i=n(19650),s=n(71230),c=n(15746),u=n(96486),o=n(67294),m=n(68432),d=n(15137),p=n(38780),f=n(28999),E=n(54549),v=n(79508),y=n(71577),h=n(34041),g=n(94199),b=n(69523),Z=n(24671),N=n(73553),S=n(46321),C=(0,o.forwardRef)((function(e,t){var n=e.mode,r=(e.onChange,e.fetchOptions),s=e.debounceTimeout,c=void 0===s?800:s,m=e.defaultValue,d=(0,a._T)(e,["mode","onChange","fetchOptions","debounceTimeout","defaultValue"]),p=(0,o.useRef)(null),f=(0,a.CR)((0,o.useState)(!1),2),E=f[0],v=f[1],y=(0,a.CR)((0,o.useState)(!1),2),C=y[0],w=y[1],x=(0,a.CR)((0,o.useState)([]),2),T=x[0],k=x[1],R=(0,a.CR)((0,o.useState)(""),2),A=R[0],D=R[1],P=(0,a.CR)((0,o.useState)({}),2),M=P[0],O=P[1],V=(0,a.CR)((0,o.useState)(1),2),I=V[0],z=V[1],_=(0,a.CR)((0,o.useState)([]),2),H=_[0],U=_[1],B=(0,o.useCallback)((function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){var t,n;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:k([]),v(!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,r(e,1)];case 2:return t=a.sent(),k(t.data),O(t.paging),D(e),z(1),[3,5];case 3:return n=a.sent(),(0,S.Eo)(n),[3,5];case 4:return v(!1),[7];case 5:return[2]}}))}))}),[r]),F=(0,o.useMemo)((function(){return(0,u.debounce)(B,c)}),[B,c]),J=(0,o.useMemo)((function(){return T.map((function(e){return{label:e.label,displayName:o.createElement(i.Z,{className:"w-full",direction:"vertical",size:0},o.createElement(l.Z.Paragraph,{ellipsis:!0,className:"text-grey-muted m-0 p-0"},(0,Z.C_)(e.value.domain)),o.createElement(l.Z.Text,{ellipsis:!0},(0,Z.C_)(e.value))),value:e.value.fullyQualifiedName}}))}),[T]);return(0,o.useImperativeHandle)(t,(function(){return{getSelectValue:function(){return H}}})),o.createElement(h.Z,(0,a.pi)({autoFocus:!0,showSearch:!0,className:"w-full","data-testid":"data-product-selector",defaultValue:m,dropdownRender:function(e){return o.createElement(o.Fragment,null,e,C?o.createElement(b.Z,{size:"small"}):null)},filterOption:!1,mode:n,notFoundContent:E?o.createElement(b.Z,{size:"small"}):null,optionLabelProp:"label",ref:p,tagRender:N.lR,onChange:function(e){var t=e.reduce((function(e,t){var n=T.find((function(e){return e.label===t}));return n&&e.push(n.value),e}),[]);U(t)},onFocus:function(){return B("")},onPopupScroll:function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){var t,n,l;return(0,a.Jh)(this,(function(i){switch(i.label){case 0:if((t=e.currentTarget).scrollTop+t.offsetHeight!==t.scrollHeight)return[3,5];if(!(T.length<M.total))return[3,5];i.label=1;case 1:return i.trys.push([1,3,4,5]),w(!0),[4,r(A,I+1)];case 2:return n=i.sent(),k((function(e){return(0,a.ev)((0,a.ev)([],(0,a.CR)(e)),(0,a.CR)(n.data))})),O(n.paging),z((function(e){return e+1})),[3,5];case 3:return l=i.sent(),(0,S.Eo)(l),[3,5];case 4:return w(!1),[7];case 5:return[2]}}))}))},onSearch:F},d),J.map((function(e){var t=e.label,n=e.value,a=e.displayName;return o.createElement(h.Z.Option,{"data-testid":"tag-"+n,key:t,value:n},o.createElement(g.Z,{destroyTooltipOnHide:!0,mouseEnterDelay:1.5,placement:"leftTop",title:t,trigger:"hover"},a))})))})),w=function(e){var t=e.fetchApi,n=e.defaultValue,r=e.placeholder,l=e.onSubmit,u=e.onCancel,m=(0,a.CR)((0,o.useState)(!1),2),d=m[0],p=m[1],f=(0,o.useRef)(null);return o.createElement(s.Z,{gutter:[0,8]},o.createElement(c.Z,{className:"gutter-row d-flex justify-end",span:24},o.createElement(i.Z,{align:"center"},o.createElement(y.Z,{className:"p-x-05","data-testid":"cancelAssociatedTag",disabled:d,icon:o.createElement(E.Z,{size:12}),size:"small",onClick:u}),o.createElement(y.Z,{className:"p-x-05","data-testid":"saveAssociatedTag",icon:o.createElement(v.Z,{size:12}),loading:d,size:"small",type:"primary",onClick:function(){var e,t;p(!0);var n=null!==(t=null===(e=f.current)||void 0===e?void 0:e.getSelectValue())&&void 0!==t?t:[];l(n)}}))),o.createElement(c.Z,{className:"gutter-row",span:24},o.createElement(C,{defaultValue:n,fetchOptions:t,mode:"multiple",placeholder:r,ref:f})))},x=n(54027),T=n(62761),k=n(43939),R=n(25349),A=n(96840),D=n(40734),P=function(e){var t=e.showHeader,n=void 0===t||t,E=e.hasPermission,v=e.dataProducts,y=e.activeDomain,h=e.onSave,g=(0,m.$)().t,b=(0,d.k6)(),N=(0,a.CR)((0,o.useState)(!1),2),S=N[0],C=N[1],P=function(){C(!0)},M=(0,o.useCallback)((function(e,t){var n=e,a=y?'(domain.fullyQualifiedName:"'+y.name+'")':"";return n=(0,u.isEmpty)(n)?a:n+" "+((0,u.isEmpty)(a)?"":"AND "+a)+" ",(0,R.FH)(n,t)}),[y]),O=(0,o.useCallback)((function(e){b.push((0,A.Jo)((0,D.Yd)(e)))}),[]),V=function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(t){switch(t.label){case 0:return[4,null==h?void 0:h(e)];case 1:return t.sent(),C(!1),[2]}}))}))},I=function(){C(!1)},z=(0,o.useMemo)((function(){return o.createElement(w,{defaultValue:(null!=v?v:[]).map((function(e){var t;return null!==(t=e.fullyQualifiedName)&&void 0!==t?t:""})),fetchApi:M,placeholder:g("label.data-product-plural"),onCancel:I,onSubmit:V})}),[I,V,v,M]),_=(0,o.useMemo)((function(){return E&&(0,u.isEmpty)(v)}),[E,v]),H=(0,o.useMemo)((function(){return(0,u.isEmpty)(v)?T.lH:v.map((function(e){return o.createElement(r.Z,{className:"tag-chip tag-chip-content",key:"dp-tags-"+e.fullyQualifiedName,onClick:function(){return O(e.fullyQualifiedName)}},o.createElement("div",{className:"d-flex w-full"},o.createElement("div",{className:"d-flex items-center p-x-xs w-full gap-1"},o.createElement(f.ReactComponent,{className:"align-middle",height:12,width:12}),o.createElement(l.Z.Paragraph,{ellipsis:!0,className:"m-0 tags-label","data-testid":"data-product-"+e.fullyQualifiedName},(0,Z.C_)(e)))))}))}),[v]),U=(0,o.useMemo)((function(){return n&&o.createElement(i.Z,{align:"center",className:"m-b-xss w-full",size:"middle"},o.createElement(l.Z.Text,{className:"right-panel-label"},g("label.data-product-plural")),E&&o.createElement(s.Z,{gutter:12},!(0,u.isEmpty)(v)&&o.createElement(c.Z,null,o.createElement(p.ReactComponent,{className:"cursor-pointer",color:T.MJ,"data-testid":"edit-button",width:"14px",onClick:P}))))}),[n,v,E]),B=(0,o.useMemo)((function(){return _?o.createElement(c.Z,{className:"m-t-xss",onClick:P},o.createElement(x.Z,{startWith:k.w.PLUS,tag:k.i})):null}),[_]);return o.createElement("div",{className:"w-full","data-testid":"data-products-container"},U,!S&&o.createElement(s.Z,{"data-testid":"data-products-list"},o.createElement(c.Z,null,B,H)),S&&z)}},82507:function(e,t,n){n.d(t,{m:function(){return T}});var a=n(70655),r=n(71230),l=n(15746),i=n(12028),s=n(56256),c=n(23031),u=n(96486),o=n(80129),m=n.n(o),d=n(67294),p=n(15137),f=n(62761),E=n(22653),v=n(34530),y=n(802),h=n(16909),g=n(17888),b=n(88679),Z=n(40734),N=n(46321),S=n(83716),C=n(34115),w=n(59817),x=n(37565),T=function(e){var t=e.isDatabaseDeleted,n=(0,p.UO)().fqn,o=(0,p.k6)(),T=(0,p.TH)(),k=(0,a.CR)((0,d.useState)([]),2),R=k[0],A=k[1],D=(0,a.CR)((0,d.useState)(!0),2),P=D[0],M=D[1],O=(0,a.CR)((0,d.useState)(!1),2),V=O[0],I=O[1],z=(0,d.useMemo)((function(){return(0,Z.p2)(n)}),[n]),_=(0,d.useMemo)((function(){var e=T.search;return m().parse(e.startsWith("?")?e.substring(1):e).schema}),[T.search]),H=(0,y.C)(),U=H.currentPage,B=H.handlePageChange,F=H.pageSize,J=H.handlePageSizeChange,L=H.paging,j=H.handlePagingChange,G=H.showPagination,q=(0,d.useCallback)((function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){var t,n,r,l;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:if((0,u.isEmpty)(z))return[2];a.label=1;case 1:return a.trys.push([1,3,4,5]),M(!0),[4,(0,h.M_)({databaseName:z,limit:F,after:null==e?void 0:e.after,before:null==e?void 0:e.before,include:V?v.y.Deleted:v.y.NonDeleted,fields:["owner","usageSummary"]})];case 2:return t=a.sent(),n=t.data,r=t.paging,A(n),j(r),[3,5];case 3:return l=a.sent(),(0,N.Eo)(l),[3,5];case 4:return M(!1),[7];case 5:return[2]}}))}))}),[F,z,V]),K=function(e,t){return void 0===t&&(t=f.j2),(0,a.mG)(void 0,void 0,void 0,(function(){var r,l,i,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:M(!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,(0,g.w4)({query:"(name.keyword:*"+e+"*) OR (description.keyword:*"+e+"*)",pageNumber:t,pageSize:f.IV,queryFilter:{query:{bool:{must:[{term:{"database.fullyQualifiedName":n}}]}}},searchIndex:E.W.DATABASE_SCHEMA,includeDeleted:V,trackTotalHits:!0})];case 2:return r=a.sent(),l=r.hits.hits.map((function(e){return e._source})),i=r.hits.total.value,A(l),j({total:i}),[3,5];case 3:return s=a.sent(),(0,N.Eo)(s),[3,5];case 4:return M(!1),[7];case 5:return[2]}}))}))},Q=(0,d.useCallback)((function(e){I(e),B(f.j2)}),[]),Y=(0,d.useCallback)((function(e){var t,n=e.currentPage,a=e.cursorType;_?K(_,n):a&&q(((t={})[a]=L[a],t)),B(n)}),[L,q,K,_]);return(0,d.useEffect)((function(){q()}),[n,F,V,t]),d.createElement(r.Z,{gutter:[16,16]},d.createElement(l.Z,{span:12},d.createElement(w.Z,{removeMargin:!0,placeholder:(0,c.t)("label.search-for-type",{type:(0,c.t)("label.schema")}),searchValue:_,typingInterval:500,onSearch:function(e){o.push({search:m().stringify({schema:(0,u.isEmpty)(e)?void 0:e})}),e?K(e):q()}})),d.createElement(l.Z,{className:"flex items-center justify-end",span:12},d.createElement(i.Z,{checked:V,"data-testid":"show-deleted",onClick:Q}),d.createElement(s.Z.Text,{className:"m-l-xs"},(0,c.t)("label.deleted"))," "),d.createElement(l.Z,{span:24},d.createElement(x.Z,{bordered:!0,columns:b.n,"data-testid":"database-databaseSchemas",dataSource:R,loading:P,locale:{emptyText:d.createElement(S.Z,{className:"m-y-md"})},pagination:!1,rowKey:"id",size:"small"})),d.createElement(l.Z,{span:24},G&&d.createElement(C.Z,{currentPage:U,isNumberBased:Boolean(_),pageSize:F,paging:L,pagingHandler:Y,onShowSizeChange:J})))}},45102:function(e,t,n){var a=n(54549),r=n(79508),l=n(19650),i=n(71577),s=n(94184),c=n.n(s),u=n(67294);t.Z=function(e){var t=e.children,n=e.onCancel,s=e.onSave,o=e.direction,m=e.className;return u.createElement(l.Z,{className:c()(m,"w-full"),"data-testid":"inline-edit-container",direction:o},t,u.createElement(l.Z,{className:"w-full justify-end","data-testid":"buttons",size:4},u.createElement(i.Z,{"data-testid":"inline-cancel-btn",icon:u.createElement(a.Z,null),size:"small",type:"primary",onClick:n}),u.createElement(i.Z,{"data-testid":"inline-save-btn",icon:u.createElement(r.Z,null),size:"small",type:"primary",onClick:s})))}},76597:function(e,t,n){n.d(t,{t:function(){return M}});var a=n(70655),r=n(19586),l=n(56256),i=n(96486),s=n(67294),c=n(68432),u=n(15137),o=n(58369),m=n(61105),d=n(226),p=n(85861),f=n(24671),E=n(902),v=n(40734),y=n(46321),h=n(8752),g=n(79839),b=n(83716),Z=n(37565),N=n(25213),S=n(24135),C=function(e){var t=e.extension,n=(0,c.$)().t,a=(0,s.useMemo)((function(){return(0,i.map)(t,(function(e,t){return{name:t,value:e}}))}),[t]),r=(0,s.useMemo)((function(){return[{title:n("label.name"),dataIndex:"name",key:"name",width:200,render:function(e){return e}},{title:n("label.value"),dataIndex:"value",key:"value",render:function(e){return(0,i.isString)(e)?s.createElement(S.Z,{markdown:e||""}):s.createElement(l.Z.Text,{className:"break-all","data-testid":"value"},e)}}]}),[]);return s.createElement(N.Z,{bordered:!0,className:"m-md",columns:r,"data-testid":"custom-properties-table",dataSource:a,pagination:!1,rowKey:"name",size:"small"})},w=n(16165),x=n(23031),T=n(38780),k=n(59136),R=n(4107),A=n(45102),D=function(e){var t=e.value,n=e.onCancel,r=e.type,l=e.propertyName,i=e.onSave,c=(0,a.CR)((0,s.useState)(t),2),u=c[0],o=c[1];return s.createElement(A.Z,{onCancel:n,onSave:function(){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,i(u)];case 1:return e.sent(),[2]}}))}))}},s.createElement(R.Z,{className:"w-64","data-testid":"value-input",id:"value",name:l,placeholder:"value",type:r,value:u,onChange:function(e){var t=e.target.value;o(t)}}))},P=function(e){var t,n=e.isVersionView,r=e.versionDataKeys,c=e.propertyName,u=e.extension,o=e.propertyType,m=e.onExtensionUpdate,d=e.hasEditPermissions,p=null==u?void 0:u[c],f=(0,a.CR)((0,s.useState)(!1),2),E=f[0],v=f[1],y=function(){v(!1)},h=function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){var t,n;return(0,a.Jh)(this,(function(r){switch(r.label){case 0:return t=(0,a.pi)((0,a.pi)({},u||{}),((n={})[c]="integer"===o.name?(0,i.toNumber)(e||0):e,n)),[4,m(t)];case 1:return r.sent(),v(!1),[2]}}))}))};return s.createElement("div",null,E?function(){switch(o.name){case"string":case"integer":return s.createElement(D,{propertyName:c,type:"integer"===o.name?"number":"text",value:p,onCancel:y,onSave:h});case"markdown":return s.createElement(k.p,{header:(0,x.t)("label.edit-entity-name",{entityType:(0,x.t)("label.property"),entityName:c}),placeholder:(0,x.t)("label.enter-property-value"),value:p||"",visible:E,onCancel:y,onSave:h});default:return null}}():s.createElement(s.Fragment,null,s.createElement("div",{className:"d-flex gap-2 items-center"},(t=function(){if(n){var e=null==r?void 0:r.includes(c);return s.createElement(S.Z,{className:e?"diff-added":"",markdown:String(p)||""})}return"markdown"===o.name?s.createElement(S.Z,{markdown:p||""}):s.createElement(l.Z.Text,{className:"break-all","data-testid":"value"},p)}(),"integer"===o.name?(0,i.isUndefined)(p)?s.createElement("span",{className:"text-grey-muted","data-testid":"no-data"},(0,x.t)("message.no-data")):t:p?t:s.createElement("span",{className:"text-grey-muted","data-testid":"no-data"},(0,x.t)("message.no-data"))),d&&s.createElement(w.Z,{component:T.ReactComponent,"data-testid":"edit-icon",onClick:function(){v(!0)}}))))},M=function(e){var t,n=e.handleExtensionUpdate,N=e.entityType,S=e.hasEditAccess,w=e.className,x=e.isVersionView,T=e.hasPermission,k=e.entityDetails,R=(0,c.$)().t,A=(0,h.BL)().getEntityPermissionByFqn,D=(0,a.CR)((0,s.useState)(),2),M=D[0],O=D[1],V=(0,a.CR)((0,s.useState)({}),2),I=V[0],z=V[1],_=(0,a.CR)((0,s.useState)(!1),2),H=_[0],U=_[1],B=(0,u.UO)().fqn,F=(0,v.p2)(B);(0,s.useEffect)((function(){(0,a.mG)(void 0,void 0,void 0,(function(){var e;return(0,a.Jh)(this,(function(t){switch(t.label){case 0:return[4,(0,p.p)(N,F)];case 1:return e=t.sent(),O(e),[2]}}))}))}),[F]);var J=(0,a.CR)((0,s.useState)(),2),L=J[0],j=J[1],G=null!=k?k:M,q=(0,s.useCallback)((function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){var t;return(0,a.Jh)(this,(function(r){switch(r.label){case 0:return(0,i.isUndefined)(n)||!G?[3,2]:(t=(0,a.pi)((0,a.pi)({},G),{extension:e}),[4,n(t)]);case 1:r.sent(),O(t),r.label=2;case 2:return[2]}}))}))}),[G,n]),K=(0,s.useMemo)((function(){if(x){var e=null==G?void 0:G.changeDescription,t=(0,E.gY)(o.Sn.EXTENSION,e),n=(0,E.r9)(t);if(t.added){var a=JSON.parse(n||[])[0];if(a)return{extensionObject:null==G?void 0:G.extension,addedKeysList:Object.keys(a)}}if(G&&t.updated)return(0,E.xq)(G,t)}return{extensionObject:null==G?void 0:G.extension}}),[x,G]),Q=(0,s.useMemo)((function(){return[{title:R("label.name"),dataIndex:"name",key:"name",width:200,render:function(e,t){return(0,f.C_)(t)}},{title:R("label.value"),dataIndex:"value",key:"value",render:function(e,t){return s.createElement(P,{extension:K.extensionObject,hasEditPermissions:S,isVersionView:x,propertyName:t.name,propertyType:t.propertyType,versionDataKeys:K.addedKeysList,onExtensionUpdate:q})}}]}),[null==G?void 0:G.extension,S,K,x,q]);return(0,s.useEffect)((function(){((null==L?void 0:L.ViewAll)||(null==L?void 0:L.ViewBasic))&&(0,a.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:U(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,(0,d.ov)(N)];case 2:return e=n.sent(),z(e),[3,5];case 3:return t=n.sent(),(0,y.Eo)(t),[3,5];case 4:return U(!1),[7];case 5:return[2]}}))}))}),[L]),(0,s.useEffect)((function(){!function(e){(0,a.mG)(void 0,void 0,void 0,(function(){var t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:U(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,A(g.A.TYPE,e)];case 2:return t=n.sent(),j(t),[3,5];case 3:return n.sent(),(0,y.Eo)(R("server.fetch-entity-permissions-error",{entity:R("label.resource-permission-lowercase")})),[3,5];case 4:return U(!1),[7];case 5:return[2]}}))}))}(N)}),[N]),H?s.createElement(r.Z,{active:!0}):T?(0,i.isEmpty)(I.customProperties)&&(0,i.isUndefined)(null==G?void 0:G.extension)?s.createElement("div",{className:"flex-center tab-content-height"},s.createElement(b.Z,{className:w},s.createElement(l.Z.Paragraph,null,R("message.adding-new-entity-is-easy-just-give-it-a-spin",{entity:R("label.custom-property-plural")})))):(0,i.isEmpty)(I.customProperties)&&!(0,i.isUndefined)(null==G?void 0:G.extension)?s.createElement(C,{extension:null==G?void 0:G.extension}):s.createElement(Z.Z,{bordered:!0,className:"m-md",columns:Q,"data-testid":"custom-properties-table",dataSource:null!==(t=I.customProperties)&&void 0!==t?t:[],loading:H,pagination:!1,rowKey:"name",size:"small"}):s.createElement("div",{className:"flex-center tab-content-height"},s.createElement(b.Z,{type:m.Wx.PERMISSION}))}},72438:function(e,t,n){n.r(t);var a=n(70655),r=n(71230),l=n(15746),i=n(19650),s=n(25499),c=n(94184),u=n.n(c),o=n(96486),m=n(67294),d=n(68432),p=n(15137),f=n(76597),E=n(113),v=n(83716),y=n(38105),h=n(82507),g=n(33873),b=n(45270),Z=n(69523),N=n(80646),S=n(8752),C=n(79839),w=n(67167),x=n(71406),T=n(1727),k=n(62761),R=n(61105),A=n(64632),D=n(34530),P=n(90058),M=n(16909),O=n(24671),V=n(902),I=n(39570),z=n(40734);t.default=function(){var e=this,t=(0,d.$)().t,n=(0,p.k6)(),c=(0,S.BL)().getEntityPermissionByFqn,_=(0,p.UO)(),H=_.fqn,U=_.version,B=_.tab,F=(0,a.CR)((0,m.useState)(I.Bd),2),J=F[0],L=F[1],j=(0,a.CR)((0,m.useState)(!0),2),G=j[0],q=j[1],K=(0,a.CR)((0,m.useState)(!0),2),Q=K[0],Y=K[1],W=(0,a.CR)((0,m.useState)(""),2),$=W[0],X=W[1],ee=(0,a.CR)((0,m.useState)({}),2),te=ee[0],ne=ee[1],ae=(0,a.CR)((0,m.useState)({}),2),re=ae[0],le=ae[1],ie=(0,m.useMemo)((function(){return(0,V.Jf)(te,A.py.DATABASE)}),[te]),se=ie.tier,ce=ie.owner,ue=ie.breadcrumbLinks,oe=ie.changeDescription,me=ie.deleted,de=ie.domain,pe=(0,m.useMemo)((function(){return J.ViewAll||J.ViewBasic}),[J]),fe=(0,m.useMemo)((function(){return(0,z.p2)(H)}),[H]),Ee=(0,m.useMemo)((function(){return(0,V.KW)(te.changeDescription,ce,se,de)}),[te.changeDescription,ce,se,de]),ve=Ee.ownerDisplayName,ye=Ee.ownerRef,he=Ee.tierDisplayName,ge=Ee.domainDisplayName,be=(0,m.useCallback)((function(){return(0,a.mG)(e,void 0,void 0,(function(){var e;return(0,a.Jh)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,,2,3]),q(!0),[4,c(C.A.DATABASE,H)];case 1:return e=t.sent(),L(e),[3,3];case 2:return q(!1),[7];case 3:return[2]}}))}))}),[H,c,L]),Ze=(0,m.useCallback)((function(){return(0,a.mG)(e,void 0,void 0,(function(){var e,t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,,3,4]),q(!0),[4,(0,M.o6)(H,"",D.y.All)];case 1:return e=n.sent().id,X(null!=e?e:""),[4,(0,M.Wl)(null!=e?e:"")];case 2:return t=n.sent(),le(t),[3,4];case 3:return q(!1),[7];case 4:return[2]}}))}))}),[pe,H]),Ne=(0,m.useCallback)((function(t){return(0,a.mG)(e,void 0,void 0,(function(){var e;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,,3,4]),Y(!0),pe?[4,(0,M.ZE)(t,U)]:[3,2];case 1:e=n.sent(),ne(e),n.label=2;case 2:return[3,4];case 3:return Y(!1),[7];case 4:return[2]}}))}))}),[pe,U]),Se=(0,m.useMemo)((function(){return{versionHandler:function(e){void 0===e&&(e=U),n.push((0,k.dj)(A.py.DATABASE,H,e,B))},backHandler:function(){n.push((0,k.aY)(fe))}}}),[H,fe,B]),Ce=Se.versionHandler,we=Se.backHandler,xe=function(e){n.push((0,k.dj)(A.py.DATABASE,H,String(U),e))},Te=(0,m.useMemo)((function(){return(0,V.rI)(te,oe)}),[te,oe]),ke=Te.displayName,Re=Te.tags,Ae=Te.description,De=(0,m.useMemo)((function(){var e;return[{label:m.createElement(w.Z,{id:A.M8.SCHEMA,name:t("label.schema-plural")}),key:A.M8.SCHEMA,children:m.createElement(r.Z,{gutter:[0,16],wrap:!1},m.createElement(l.Z,{className:"p-t-sm m-x-lg",flex:"auto"},m.createElement(r.Z,{gutter:[16,16]},m.createElement(l.Z,{"data-testid":"description-container",span:24},m.createElement(E.Z,{description:Ae,entityType:A.py.DATABASE,showActions:!1})),m.createElement(l.Z,{span:24},m.createElement(h.m,null)))),m.createElement(l.Z,{className:"entity-tag-right-panel-container","data-testid":"entity-right-panel",flex:"220px"},m.createElement(i.Z,{className:"w-full",direction:"vertical",size:"large"},m.createElement(g.Z,{activeDomain:de,dataProducts:null!==(e=te.dataProducts)&&void 0!==e?e:[],hasPermission:!1}),Object.keys(P.c6).map((function(e){return m.createElement(x.Z,{displayType:T.F.READ_MORE,entityType:A.py.DATABASE,key:e,permission:!1,selectedTags:Re,showTaskHandler:!1,tagType:P.c6[e]})})))))},{key:A.M8.CUSTOM_PROPERTIES,label:m.createElement(w.Z,{id:A.M8.CUSTOM_PROPERTIES,name:t("label.custom-property-plural")}),children:m.createElement(f.t,{isVersionView:!0,entityDetails:te,entityType:A.py.DATABASE,hasEditAccess:!1,hasPermission:pe})}]}),[Re,Ae]),Pe=(0,m.useMemo)((function(){return G?m.createElement(Z.Z,null):pe?m.createElement(m.Fragment,null,Q?m.createElement(Z.Z,null):m.createElement("div",{className:u()("version-data")},m.createElement(r.Z,{gutter:[0,12]},m.createElement(l.Z,{span:24},m.createElement(y.ZP,{breadcrumbLinks:ue,currentVersionData:te,deleted:me,displayName:ke,domainDisplayName:ge,entityType:A.py.DATABASE,ownerDisplayName:ve,ownerRef:ye,tierDisplayName:he,version:U,onVersionClick:we})),m.createElement(l.Z,{span:24},m.createElement(s.Z,{className:"entity-details-page-tabs","data-testid":"tabs",defaultActiveKey:null!=B?B:A.M8.SCHEMA,items:De,onChange:xe})))),m.createElement(b.Z,{currentVersion:(0,o.toString)(U),versionHandler:Ce,versionList:re,onBack:we})):m.createElement(v.Z,{type:R.Wx.PERMISSION})}),[G,pe,Q,ue,te,me,ke,ve,ye,he,U,we,De,Ce,re,ge]);return(0,m.useEffect)((function(){(0,o.isEmpty)(H)||be()}),[H]),(0,m.useEffect)((function(){pe&&Ze()}),[H,pe]),(0,m.useEffect)((function(){$&&Ne($)}),[U,$]),m.createElement(N.Z,{className:"version-page-container",pageTitle:t("label.entity-version-detail-plural",{entity:(0,O.C_)(te)})},Pe)}}}]);