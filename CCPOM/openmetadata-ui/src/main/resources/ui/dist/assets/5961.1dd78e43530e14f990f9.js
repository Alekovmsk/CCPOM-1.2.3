"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[5961],{71927:function(e,t,n){var i=n(8081),r=n.n(i),a=n(23645),s=n.n(a)()(r());s.push([e.id,'/*\n *  Copyright 2023 Collate.\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.stepper-container .ant-steps-item-content {\n  width: 120px;\n}\n',""]),t.Z=s},41539:function(e,t,n){var i=n(71230),r=n(56256),a=n(67294);t.Z=function(e){var t=e.data;return a.createElement(i.Z,null,a.createElement(r.Z.Paragraph,{"data-testid":"right-panel-header"},t.title),a.createElement(r.Z.Paragraph,null,t.body))}},78736:function(e,t,n){n.d(t,{hY:function(){return s},j$:function(){return a},nA:function(){return l}});var i=[{title:"Создайте тест кейс",body:"Для создания тест кейса добавьте уникальное наименование. Выберите тип теста из выпадающего списка. Заполните сведения о параметрах, которые отображаются для выбранного типа теста. Введите описание (необязательно)."},{title:"Тест кейс создан успешно",body:"Тест кейс создан успешно. Просмотрите набор тестов, чтобы проверить детали нового созданного тестового кейса. Это будет учтено при следующем запуске."},{title:"Набор тестов и Тест кейс созданы успешно",body:"Набор тестов и Тест кейс созданы успешно. На следующем этапе вы можете запланировать прием метаданных с желаемым расписанием. На следующем этапе вы можете запланировать прием метаданных с желаемой частотой. Вы также можете просмотреть набор тестов, чтобы проверить детали нового созданного тест кейса."}],r=[{title:"Создайте набор тестов",body:"Набор тестов - это контейнер, состоящий из нескольких связанных между собой тест кейсов. С помощью Набора тестов вы можете легко развернуть конвейер для выполнения тест кейсов. Начните с выбора существующего набора тестов или создайте новый набор тестов, чтобы создать тест на уровне таблицы или столбца для сущности."},{title:"Выберите тест кейсы",body:"Свяжите существующие тест кейсы с вновь созданным набором тестов. Вы можете добавить несколько тест кейсов."},{title:"Набор тестов создан успешно",body:"Набор тестов создан успешно. На следующем этапе вы можете запланировать прием метаданных с желаемым расписанием. Вы также можете просмотреть набор тестов, чтобы проверить детали нового созданного тест кейса."}],a={title:"Расписание для Тестов",body:"Тесты качества данных можно запланировать для запуска с желаемым расписанием. Часовой пояс в UTC."},s=function(e,t,n){var r=i[e-1];if(3===e)if(t){var a=(r=i[e]).body.replace("{testSuite}",(null==n?void 0:n.testSuite)||"Test Suite").replace("{testCase}",(null==n?void 0:n.testCase)||"Test Case");r.body=a}else a=r.body.replace("{testCase}",(null==n?void 0:n.testCase)||"Test Case"),r.body=a;return r},l=function(e,t){var n=r[e-1];return 3===e&&(n.body=n.body.replace("{testSuite}",t)),n}},45747:function(e,t,n){n.d(t,{S:function(){return w}});var i=n(70655),r=n(71230),a=n(15746),s=n(38272),l=n(19650),u=n(56256),c=n(9676),o=n(71577),d=n(7606),m=n(67294),f=n(68432),v=n(76),p=n(69523),h=n(62761),b=n(22653),g=n(17888),y=n(93895),E=n(24671),Z=n(40734),S=n(38333),C=n(59817),w=function(e){var t=e.onCancel,n=e.existingTest,w=e.onSubmit,T=e.cancelText,x=e.submitText,P=(0,f.$)().t,k=(0,i.CR)((0,m.useState)(""),2),N=k[0],R=k[1],I=(0,i.CR)((0,m.useState)([]),2),A=I[0],L=I[1],J=(0,i.CR)((0,m.useState)(),2),G=J[0],_=J[1],F=(0,i.CR)((0,m.useState)(1),2),V=F[0],j=F[1],D=(0,i.CR)((0,m.useState)(0),2),Y=D[0],M=D[1],O=(0,i.CR)((0,m.useState)(!1),2),W=O[0],z=O[1],U=(0,m.useCallback)((function(e){var t=e.searchText,n=void 0===t?"":t,r=e.page,a=void 0===r?1:r;return(0,i.mG)(void 0,void 0,void 0,(function(){var e,t,r;return(0,i.Jh)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,3,4]),z(!0),[4,(0,g.w4)({pageNumber:a,pageSize:h.IV,searchIndex:b.W.TEST_CASE,query:n})];case 1:return e=s.sent(),t=e.hits.hits,M(null!==(r=e.hits.total.value)&&void 0!==r?r:0),L(1===a?t:function(e){return(0,i.ev)((0,i.ev)([],(0,i.CR)(e)),(0,i.CR)(t))}),j(a),[3,4];case 2:return s.sent(),[3,4];case 3:return z(!1),[7];case 4:return[2]}}))}))}),[n]),H=(0,m.useCallback)((function(e){e.currentTarget.scrollHeight-e.currentTarget.scrollTop==500&&A.length<Y&&!W&&U({searchText:N,page:V+1})}),[N,Y,A,W]);return(0,m.useEffect)((function(){U({searchText:N})}),[N]),m.createElement(r.Z,{gutter:[0,16]},m.createElement(a.Z,{span:24},m.createElement(C.Z,{removeMargin:!0,showClearSearch:!0,showLoadingStatus:!0,placeholder:P("label.search-entity",{entity:P("label.test-case-plural")}),searchValue:N,onSearch:function(e){R(e)}})),m.createElement(a.Z,{span:24},m.createElement(s.ZP,{loading:{spinning:!1,indicator:m.createElement(p.Z,null)}},m.createElement(d.Z,{data:A,height:500,itemKey:"id",onScroll:H},(function(e){var t,n,i=e._source,r=(0,S.lW)(i.entityLink),a=(0,y.AY)(r),s=i.entityLink.includes("::columns::");return m.createElement(l.Z,{className:"m-b-md border rounded-4 p-sm cursor-pointer",direction:"vertical",onClick:function(){var e;(e=i.id)&&((null==G?void 0:G.has(null!=e?e:""))?_((function(t){var n=new Map;return null==t||t.forEach((function(t){return t.id!==e&&n.set(t.id,t)})),n})):_((function(t){var n,i=new Map;return null==t||t.forEach((function(e){return i.set(e.id,e)})),i.set(e,null===(n=A.find((function(t){return t._source.id===e})))||void 0===n?void 0:n._source),i})))}},m.createElement(l.Z,{className:"justify-between w-full"},m.createElement(u.Z.Paragraph,{className:"m-0 font-medium text-base w-max-500","data-testid":i.name,ellipsis:{tooltip:!0}},(0,E.C_)(i)),m.createElement(c.Z,{checked:null==G?void 0:G.has(null!==(t=i.id)&&void 0!==t?t:"")})),m.createElement(u.Z.Paragraph,{className:"m-0 w-max-500",ellipsis:{tooltip:!0}},(0,E.C_)(i.testDefinition)),m.createElement(u.Z.Paragraph,{className:"m-0"},m.createElement(v.Link,{"data-testid":"table-link",to:(0,h.DV)(r,"profiler"),onClick:function(e){return e.stopPropagation()}},a)),s&&m.createElement(l.Z,null,m.createElement(u.Z.Text,{className:"font-medium text-xs"},P("label.column")+":"),m.createElement(u.Z.Text,{className:"text-grey-muted text-xs"},null!==(n=(0,y.AY)((0,Z.YH)((0,S.lW)(i.entityLink,s))))&&void 0!==n?n:"--")))})))),m.createElement(a.Z,{className:"d-flex justify-end items-center p-y-xss",span:24},m.createElement(o.Z,{"data-testid":"cancel",type:"link",onClick:t},null!=T?T:P("label.cancel")),m.createElement(o.Z,{"data-testid":"submit",loading:W,type:"primary",onClick:function(){return(0,i.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,i.Jh)(this,(function(n){return z(!0),e=(0,i.ev)([],(0,i.CR)(null!==(t=null==G?void 0:G.values())&&void 0!==t?t:[])).map((function(e){var t;return null!==(t=e.id)&&void 0!==t?t:""})),w(e),z(!1),[2]}))}))}},null!=x?x:P("label.submit"))))}},56091:function(e,t,n){n.d(t,{Z:function(){return Z}});var i=n(75899),r=n(94184),a=n.n(r),s=n(67294),l=n(93379),u=n.n(l),c=n(7795),o=n.n(c),d=n(90569),m=n.n(d),f=n(3565),v=n.n(f),p=n(19216),h=n.n(p),b=n(44589),g=n.n(b),y=n(71927),E={};E.styleTagTransform=g(),E.setAttributes=v(),E.insert=m().bind(null,"head"),E.domAPI=o(),E.insertStyleElement=h(),u()(y.Z,E),y.Z&&y.Z.locals&&y.Z.locals;var Z=function(e){var t=e.steps,n=e.activeStep,r=e.excludeSteps,l=void 0===r?[]:r,u=(0,s.useMemo)((function(){return t.filter((function(e){return!l.includes(e.step)})).map((function(e){return{icon:s.createElement("span",{className:a()("ingestion-rounder self-center",{active:e.step===n},{completed:e.step<n}),"data-testid":"step-icon-"+e.step}),key:e.name,title:e.name}}))}),[t,n,l]);return s.createElement("div",{className:"stepper-container p-x-24","data-testid":"stepper-container"},s.createElement(i.Z,{current:n,items:u,labelPlacement:"vertical",size:"small"}))}},72446:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var i=n(70655),r=n(19650),a=n(71230),s=n(15746),l=n(56256),u=n(67294),c=n(68432),o=n(15137),d=n(41539),m=n(78736),f=n(45747),v=n(56091),p=n(79686),h=n(15689),b=n(19793),g=n(31968),y=n(55546),E=n(78802),Z=n(96840),S=n(40734),C=n(46321),w=n(95137),T=n(59842),x=n(26387),P=n(49409),k=n(4107),N=n(71577),R=n(18927),I=n(69523),A=n(62761),L=n(16139),J=n(61284),G=function(e){var t,n=e.onSubmit,a=e.testSuite,s=(0,c.$)().t,l=(0,i.CR)(P.Z.useForm(),1)[0],d=(0,i.CR)((0,u.useState)([]),2),m=d[0],f=d[1],v=(0,i.CR)((0,u.useState)(!1),2),p=v[0],h=v[1],b=(0,o.k6)();return(0,u.useEffect)((function(){(0,i.mG)(void 0,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,3,4]),h(!0),[4,(0,E.eL)({fields:"owner,tests",limit:A.Ou})];case 1:return e=t.sent(),f(e.data),[3,4];case 2:return t.sent(),f([]),[3,4];case 3:return h(!1),[7];case 4:return[2]}}))}))}),[]),p?u.createElement(I.Z,null):u.createElement(P.Z,{"data-testid":"test-suite-form",form:l,initialValues:a,layout:"vertical",name:"selectTestSuite",validateMessages:A.NG,onFinish:n},u.createElement(P.Z.Item,{label:s("label.name"),name:"name",rules:[{required:!0},{pattern:L.$Q,message:s("message.entity-name-validation")},{min:1,max:256,message:""+s("message.entity-size-in-between",{entity:""+s("label.name"),max:"256",min:"1"})},{validator:function(e,t){return m.some((function(e){return e.name===t}))?Promise.reject(s("message.entity-already-exists",{entity:s("label.name")})+"!"):Promise.resolve()}}]},u.createElement(k.Z,{"data-testid":"test-suite-name",placeholder:s("label.enter-entity",{entity:s("label.test-suite")+" "+s("label.name")})})),u.createElement(P.Z.Item,{label:s("label.description"),name:"description"},u.createElement(R.Z,{"data-testid":"test-suite-description",height:"200px",initialValue:null!==(t=null==a?void 0:a.description)&&void 0!==t?t:"",onTextChange:function(e){return l.setFieldsValue({description:e})}})),u.createElement(P.Z.Item,{noStyle:!0},u.createElement(r.Z,{className:"w-full justify-end",size:16},u.createElement(N.Z,{"data-testid":"cancel-button",onClick:function(){b.push((0,Z.p_)(J.R.TEST_SUITES))}},s("label.cancel")),u.createElement(N.Z,{"data-testid":"submit-button",htmlType:"submit",type:"primary"},s("label.next")))))},_=function(){var e=(0,c.$)().t,t=(0,o.k6)(),n=(0,w.Eu)().currentUser,P=(0,i.CR)((0,u.useState)(1),2),k=P[0],N=P[1],R=(0,i.CR)((0,u.useState)(),2),I=R[0],A=R[1],L=function(){var e;t.push((0,Z.nn)((0,S.Yd)(null!==(e=null==I?void 0:I.fullyQualifiedName)&&void 0!==e?e:"")))},J=function(e){A(e),N(2)},_=function(t){return(0,i.mG)(void 0,void 0,void 0,(function(){var r,a,s,l,u,c,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),r={id:null!==(l=null==n?void 0:n.id)&&void 0!==l?l:"",type:y.jc.USER},[4,(0,E.H6)({name:null!==(u=null==I?void 0:I.name)&&void 0!==u?u:"",description:null==I?void 0:I.description,owner:r})];case 1:return a=i.sent(),A(a),[4,(0,E.AM)({testCaseIds:t,testSuiteId:null!==(c=a.id)&&void 0!==c?c:""})];case 2:return i.sent(),N(3),[3,4];case 3:return s=i.sent(),(null===(o=s.response)||void 0===o?void 0:o.status)===b.NL.CONFLICT?(0,C.Eo)(e("server.entity-already-exist",{entity:e("label.test-suite"),entityPlural:e("label.test-suite-lowercase-plural"),name:null==I?void 0:I.name})):(0,C.Eo)(s,e("server.create-entity-error",{entity:e("label.test-suite-lowercase")})),[3,4];case 4:return[2]}}))}))},F=(0,u.useCallback)((function(){return 2===k?u.createElement(f.S,{cancelText:e("label.back"),onCancel:function(){return N(1)},onSubmit:_}):3===k?u.createElement(T.Z,{handleViewServiceClick:L,name:(null==I?void 0:I.name)||"",showIngestionButton:!1,state:g.Y.ADD,viewServiceText:"Посмотреть набор тестов"}):u.createElement(G,{testSuite:I,onSubmit:J})}),[k,I,J]);return u.createElement(p.Z,{firstPanel:{children:u.createElement("div",{className:"max-width-md w-9/10 service-form-container","data-testid":"test-suite-stepper-container"},u.createElement(x.Z,{titleLinks:h.VQ}),u.createElement(r.Z,{className:"m-t-md",direction:"vertical",size:"middle"},u.createElement(a.Z,{className:"p-sm",gutter:[16,16]},u.createElement(s.Z,{span:24},u.createElement(l.Z.Title,{className:"heading","data-testid":"header",level:5},e("label.add-entity",{entity:e("label.test-suite")}))),u.createElement(s.Z,{span:24},u.createElement(v.Z,{activeStep:k,steps:h.HZ})),u.createElement(s.Z,{span:24},F())))),minWidth:700,flex:.7},pageTitle:e("label.add-entity",{entity:e("label.test-suite")}),secondPanel:{children:u.createElement(d.Z,{data:(0,m.nA)(k,(null==I?void 0:I.name)||"")}),className:"p-md service-doc-panel",minWidth:60,overlay:{displayThreshold:200,header:e("label.setup-guide"),rotation:"counter-clockwise"}}})}},19894:function(e,t,n){n.d(t,{w:function(){return s}});var i=n(70655),r=n(67294),a=n(97354),s=function(){var e=(0,i.CR)((0,r.useState)(!1),2),t=e[0],n=e[1],s=(0,i.CR)((0,r.useState)(!1),2),l=s[0],u=s[1],c=(0,i.CR)((0,r.useState)(),2),o=c[0],d=c[1],m=(0,i.CR)((0,r.useState)(),2),f=m[0],v=m[1],p=(0,i.CR)((0,r.useState)("unknown"),2),h=p[0],b=p[1],g=function(){return(0,i.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:n(!0),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,(0,a.Ef)()];case 2:return e=i.sent(),u(200===e.code),v(e.reason),b(e.platform),[3,5];case 3:return t=i.sent(),d(t),u(!1),[3,5];case 4:return n(!1),[7];case 5:return[2]}}))}))};return(0,r.useEffect)((function(){g()}),[]),{isFetchingStatus:t,isAirflowAvailable:l,error:o,fetchAirflowStatus:g,reason:f,platform:h}}},97354:function(e,t,n){n.d(t,{E0:function(){return o},Ef:function(){return b},FD:function(){return m},MX:function(){return E},Pj:function(){return d},XZ:function(){return u},aw:function(){return f},cB:function(){return p},fT:function(){return y},g6:function(){return v},ne:function(){return c},tr:function(){return h},ut:function(){return g},z8:function(){return Z}});var i=n(70655),r=n(80129),a=n.n(r),s=n(22334),l=n(2598),u=function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,l.Z.post("/services/ingestionPipelines",e)];case 1:return[2,t.sent().data]}}))}))},c=function(e,t){return(0,i.mG)(void 0,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=(0,s.JP)("/services/ingestionPipelines/name/"+e,t),[4,l.Z.get(n)];case 1:return[2,i.sent().data]}}))}))},o=function(e,t){return(0,i.mG)(void 0,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=(0,s.JP)("/services/ingestionPipelines/name/"+e,t),[4,l.Z.get(n)];case 1:return[2,i.sent().data]}}))}))},d=function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var t,n,r,u,c,o,d,m,f;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return t=e.arrQueryFields,n=e.serviceFilter,r=e.paging,u=e.pipelineType,c=e.testSuite,o=e.serviceType,d=e.limit,m=a().stringify({service:n,testSuite:c,pipelineType:(null==u?void 0:u.length)?u.join(","):void 0,serviceType:o,limit:d}),f=""+(0,s.JP)("/services/ingestionPipelines",t,m)+(r||""),[4,l.Z.get(f)];case 1:return[2,i.sent().data]}}))}))},m=function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,l.Z.post("/services/ingestionPipelines/trigger/"+e)];case 1:return[2,t.sent().data]}}))}))},f=function(e){return l.Z.post("/services/ingestionPipelines/deploy/"+e)},v=function(e){return l.Z.post("/services/ingestionPipelines/toggleIngestion/"+e)},p=function(e){return l.Z.delete("/services/ingestionPipelines/"+e+"?hardDelete=true")},h=function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,l.Z.put("/services/ingestionPipelines",e)];case 1:return[2,t.sent().data]}}))}))},b=function(){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return[4,l.Z.get("/services/ingestionPipelines/status")];case 1:return[2,e.sent().data]}}))}))},g=function(){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return[4,l.Z.get("/services/ingestionPipelines/ip")];case 1:return[2,e.sent()]}}))}))},y=function(e,t){return l.Z.get("/services/ingestionPipelines/logs/"+e+"/last",{params:{after:t}})},E=function(e){return l.Z.post("/services/ingestionPipelines/kill/"+e)},Z=function(e,t){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,l.Z.get("/services/ingestionPipelines/"+e+"/pipelineStatus",{params:t})];case 1:return[2,n.sent().data]}}))}))}}}]);