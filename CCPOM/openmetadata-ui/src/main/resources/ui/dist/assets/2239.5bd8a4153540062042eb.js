"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[2239],{92496:function(e,t,a){var n;a.d(t,{x:function(){return n}}),function(e){e.USERS="users",e.TEAMS="teams"}(n||(n={}))},72239:function(e,t,a){a.r(t),a.d(t,{default:function(){return q}});var n=a(70655),r=a(56256),l=a(71230),i=a(15746),s=a(96486),u=a(80129),c=a.n(u),d=a(67294),o=a(68432),m=a(15137),p=a(17588),f=a(83716),h=a(26387),y=a(69523),E=a(8752),v=a(79839),b=a(19650),g=a(16798),x=a(60715),w=a(86442),Z=a(37565),R=a(61843),k=a(37310),S=function(e){var t=e.csvImportResult,a=(0,g.vE)().readString,l=(0,o.$)().t,i=(0,n.CR)((0,d.useState)([]),2),s=i[0],u=i[1],c=(0,n.CR)((0,d.useState)(!0),2),m=c[0],p=c[1],f=(0,d.useMemo)((function(){return[{title:l("label.status"),dataIndex:"status",key:"status",fixed:!0,render:function(e,t){return d.createElement(b.Z,{align:"start","data-testid":"status-container",style:{maxWidth:200}},e===R.q.Success&&d.createElement(w.ReactComponent,{className:"m-t-xss","data-testid":"success-badge",height:16,width:16}),e===R.q.Failure&&d.createElement(d.Fragment,null,d.createElement(x.ReactComponent,{className:"m-t-xss","data-testid":"failure-badge",height:16,width:16}),t.details))}},{title:l("label.name"),dataIndex:"name*",key:"name",fixed:!0,render:function(e){return d.createElement(r.Z.Paragraph,{style:{width:200}},e)}},{title:l("label.display-name"),dataIndex:"displayName",key:"displayName",render:function(e){return d.createElement(r.Z.Paragraph,{style:{width:200}},e||"--")}},{title:l("label.description"),dataIndex:"description",key:"description",width:300,render:function(e){return d.createElement(r.Z.Paragraph,{ellipsis:{rows:2},style:{width:300},title:e},e||"--")}},{title:l("label.team-type"),dataIndex:"teamType*",key:"parent",render:function(e){return d.createElement(r.Z.Paragraph,{style:{width:200}},e||"--")}},{title:l("label.parent"),dataIndex:"parents*",key:"parent",render:function(e){return d.createElement(r.Z.Paragraph,{style:{width:200}},e||"--")}},{title:l("label.owner"),dataIndex:"Owner",key:"Owner",render:function(e){return d.createElement(r.Z.Paragraph,{style:{width:200}},e||"--")}},{title:l("label.joinable"),dataIndex:"isJoinable",key:"isJoinable",render:function(e){return d.createElement(r.Z.Paragraph,{style:{width:200}},e||"--")}},{title:l("label.role-plural"),dataIndex:"defaultRoles",key:"defaultRoles",render:function(e){return d.createElement(r.Z.Paragraph,null,e||"--")}},{title:l("label.policy-plural"),dataIndex:"policies",key:"policies",render:function(e){return d.createElement(r.Z.Paragraph,null,e||"--")}}]}),[s]);return(0,d.useEffect)((function(){p(!0),t.importResultsCsv?a(t.importResultsCsv,{worker:!0,complete:function(e){u((0,k.b)(e.data).map((function(e){return(0,n.pi)((0,n.pi)({},e),{key:e["name*"]})}))),p(!1)}}):p(!1)}),[t.importResultsCsv]),d.createElement(Z.Z,{bordered:!0,columns:f,"data-testid":"import-result-table",dataSource:s,loading:m,pagination:!1,rowKey:"name*",scroll:{x:!0},size:"small"})},C=function(e){var t=e.csvImportResult,a=(0,g.vE)().readString,l=(0,o.$)().t,i=(0,n.CR)((0,d.useState)([]),2),s=i[0],u=i[1],c=(0,n.CR)((0,d.useState)(!0),2),m=c[0],p=c[1],f=(0,d.useMemo)((function(){return[{title:l("label.status"),dataIndex:"status",key:"status",fixed:!0,render:function(e,t){return d.createElement(b.Z,{align:"start","data-testid":"status-container",style:{maxWidth:200}},e===R.q.Success&&d.createElement(w.ReactComponent,{className:"m-t-xss","data-testid":"success-badge",height:16,width:16}),e===R.q.Failure&&d.createElement(d.Fragment,null,d.createElement(x.ReactComponent,{className:"m-t-xss","data-testid":"failure-badge",height:16,width:16}),t.details))}},{title:l("label.name"),dataIndex:"name*",key:"name",fixed:!0,render:function(e){return d.createElement(r.Z.Paragraph,{style:{width:200}},e)}},{title:l("label.display-name"),dataIndex:"displayName",key:"displayName",render:function(e){return d.createElement(r.Z.Paragraph,{style:{width:200}},e||"--")}},{title:l("label.description"),dataIndex:"description",key:"description",width:300,render:function(e){return d.createElement(r.Z.Paragraph,{ellipsis:{rows:2},style:{width:300},title:e},e||"--")}},{title:l("label.email"),dataIndex:"email*",key:"email",render:function(e){return d.createElement(r.Z.Paragraph,{style:{width:200}},e||"--")}},{title:l("label.timezone"),dataIndex:"timezone",key:"timezone",render:function(e){return d.createElement(r.Z.Paragraph,{style:{width:200}},e||"--")}},{title:l("label.admin"),dataIndex:"isAdmin",key:"isAdmin",render:function(e){return d.createElement(r.Z.Paragraph,{style:{width:200}},e||"--")}},{title:l("label.team-plural"),dataIndex:"teams*",key:"teams*",render:function(e){return d.createElement(r.Z.Paragraph,{style:{width:200}},e||"--")}},{title:l("label.role-plural"),dataIndex:"Roles",key:"Roles",render:function(e){return d.createElement(r.Z.Paragraph,null,e||"--")}}]}),[s]);return(0,d.useEffect)((function(){p(!0),t.importResultsCsv?a(t.importResultsCsv,{worker:!0,complete:function(e){u((0,k.b)(e.data).map((function(e){return(0,n.pi)((0,n.pi)({},e),{key:e["name*"]})}))),p(!1)}}):p(!1)}),[t.importResultsCsv]),d.createElement(Z.Z,{bordered:!0,className:"vertical-top-align-td",columns:f,"data-testid":"import-result-table",dataSource:s,loading:m,pagination:!1,rowKey:"name*",scroll:{x:!0},size:"small"})},I=a(61105),P=a(48217),N=a(11484),M=a(24671),T=a(96840),A=a(46321),U=a(92496),q=function(){var e=(0,m.UO)().fqn,t=(0,m.k6)(),a=(0,m.TH)(),u=(0,o.$)().t,b=(0,E.BL)().getEntityPermissionByFqn,g=(0,d.useMemo)((function(){var e=a.search;return c().parse(e.startsWith("?")?e.substring(1):e)}),[a.search]).type,x=(0,n.CR)((0,d.useState)(!0),2),w=x[0],Z=x[1],R=(0,n.CR)((0,d.useState)(),2),k=R[0],q=R[1],F=(0,n.CR)((0,d.useState)(),2),z=F[0],J=F[1],O=(0,n.CR)((0,d.useState)(),2),W=O[0],G=O[1],K=(0,d.useMemo)((function(){var e;return W?[{name:(0,M.C_)(W),url:(0,T.KH)(null!==(e=W.fullyQualifiedName)&&void 0!==e?e:W.name)}]:[]}),[W]),H=(0,d.useMemo)((function(){return(0,s.isUndefined)(z)?d.createElement(d.Fragment,null):g===U.x.USERS?d.createElement(C,{csvImportResult:z}):d.createElement(S,{csvImportResult:z})}),[z,g]),$=function(){var e;W&&t.push({pathname:(0,T.KH)(null!==(e=W.fullyQualifiedName)&&void 0!==e?e:W.name),search:c().stringify({activeTab:g})})};return(0,d.useEffect)((function(){var t;e?(t=e,(0,n.mG)(void 0,void 0,void 0,(function(){var e,a;return(0,n.Jh)(this,(function(n){switch(n.label){case 0:Z(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,b(v.A.TEAM,t)];case 2:return e=n.sent(),q(e),[3,5];case 3:return a=n.sent(),(0,A.Eo)(a),[3,5];case 4:return Z(!1),[7];case 5:return[2]}}))}))):Z(!1)}),[]),(0,d.useEffect)((function(){var t;((null==k?void 0:k.Create)||(null==k?void 0:k.EditAll))&&(t=e,(0,n.mG)(void 0,void 0,void 0,(function(){var e,a;return(0,n.Jh)(this,(function(n){switch(n.label){case 0:Z(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,(0,N.Xv)(t)];case 2:return e=n.sent(),G(e),[3,5];case 3:return a=n.sent(),(0,A.Eo)(a),[3,5];case 4:return Z(!1),[7];case 5:return[2]}}))})))}),[k]),w?d.createElement(y.Z,null):(null==k?void 0:k.Create)&&(null==k?void 0:k.EditAll)?(0,s.isUndefined)(W)?d.createElement(f.Z,null):W.teamType===P.C.Group&&g===U.x.TEAMS?d.createElement(f.Z,{type:I.Wx.CUSTOM},d.createElement("div",{className:"m-t-sm text-center text-sm font-normal"},d.createElement(r.Z.Paragraph,{className:"w-80"},u("message.group-type-team-not-allowed-to-have-sub-team")))):d.createElement(l.Z,{className:"import-teams w-full","data-testid":"import-teams",gutter:[16,8]},d.createElement(i.Z,{span:24},d.createElement(h.Z,{titleLinks:K})),d.createElement(i.Z,{span:24},d.createElement(r.Z.Title,{"data-testid":"title",level:5},u("label.import-entity",{entity:g===U.x.USERS?u("label.user-plural"):u("label.team-plural")}))),d.createElement(i.Z,{span:24},d.createElement(p.v,{entityName:W.name,onCancel:$,onImport:function(e,t,a){return void 0===a&&(a=!0),(0,n.mG)(void 0,void 0,void 0,(function(){var r,l,i;return(0,n.Jh)(this,(function(n){switch(n.label){case 0:r=g===U.x.USERS?N.vi:N.sZ,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,r(e,t,a)];case 2:return l=n.sent(),J(l),[2,l];case 3:return i=n.sent(),(0,A.Eo)(i),[2];case 4:return[2]}}))}))},onSuccess:$},H))):d.createElement(f.Z,{type:I.Wx.PERMISSION})}}}]);