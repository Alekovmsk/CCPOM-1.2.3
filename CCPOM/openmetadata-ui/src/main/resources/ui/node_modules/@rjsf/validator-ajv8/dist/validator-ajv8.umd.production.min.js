!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("lodash-es/toPath"),require("lodash-es/isPlainObject"),require("lodash-es/clone"),require("@rjsf/utils"),require("lodash-es/get"),require("ajv"),require("ajv-formats"),require("lodash-es/isObject")):"function"==typeof define&&define.amd?define(["exports","lodash-es/toPath","lodash-es/isPlainObject","lodash-es/clone","@rjsf/utils","lodash-es/get","ajv","ajv-formats","lodash-es/isObject"],e):e((r="undefined"!=typeof globalThis?globalThis:r||self)["@rjsf/validator-ajv8"]={},r.toPath,r.isPlainObject,r.clone,r.utils,r.get,r.Ajv,r.addFormats,r.isObject)}(this,(function(r,e,t,a,i,o,n,s,c){"use strict";function d(r){return r&&"object"==typeof r&&"default"in r?r:{default:r}}var l=d(e),u=d(t),f=d(a),h=d(o),v=d(n),m=d(s),p=d(c);function y(){return y=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},y.apply(this,arguments)}var j={allErrors:!0,multipleOfPrecision:8,strict:!1,verbose:!0},E=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,g=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/,b=["instancePath","keyword","params","schemaPath","parentSchema"],O="__rjsf_rootSchema",P=function(){function r(r,e){this.ajv=void 0,this.localizer=void 0,this.ajv=function(r,e,t,a,o){void 0===t&&(t={}),void 0===o&&(o=v.default);var n=new o(y({},j,t));return a?m.default(n,a):!1!==a&&m.default(n),n.addFormat("data-url",g),n.addFormat("color",E),n.addKeyword(i.ADDITIONAL_PROPERTY_FLAG),n.addKeyword(i.RJSF_ADDITONAL_PROPERTIES_FLAG),Array.isArray(r)&&n.addMetaSchema(r),p.default(e)&&Object.keys(e).forEach((function(r){n.addFormat(r,e[r])})),n}(r.additionalMetaSchemas,r.customFormats,r.ajvOptionsOverrides,r.ajvFormatOptions,r.AjvClass),this.localizer=e}var e=r.prototype;return e.toErrorSchema=function(r){var e=new i.ErrorSchemaBuilder;return r.length&&r.forEach((function(r){var t=r.message,a=l.default(r.property);a.length>0&&""===a[0]&&a.splice(0,1),t&&e.addErrors(t,a)})),e.ErrorSchema},e.toErrorList=function(r,e){var t=this;if(void 0===e&&(e=[]),!r)return[];var a=[];return i.ERRORS_KEY in r&&(a=a.concat(r[i.ERRORS_KEY].map((function(r){var t="."+e.join(".");return{property:t,message:r,stack:t+" "+r}})))),Object.keys(r).reduce((function(a,o){if(o!==i.ERRORS_KEY){var n=r[o];u.default(n)&&(a=a.concat(t.toErrorList(n,[].concat(e,[o]))))}return a}),a)},e.createErrorHandler=function(r){var e=this,t={__errors:[],addError:function(r){this.__errors.push(r)}};if(Array.isArray(r))return r.reduce((function(r,t,a){var i;return y({},r,((i={})[a]=e.createErrorHandler(t),i))}),t);if(u.default(r)){var a=r;return Object.keys(a).reduce((function(r,t){var i;return y({},r,((i={})[t]=e.createErrorHandler(a[t]),i))}),t)}return t},e.unwrapErrorHandler=function(r){var e=this;return Object.keys(r).reduce((function(t,a){if("addError"===a)return t;var i,o,n=r[a];return u.default(n)?y({},t,((o={})[a]=e.unwrapErrorHandler(n),o)):y({},t,((i={})[a]=n,i))}),{})},e.transformRJSFValidationErrors=function(r,e){return void 0===r&&(r=[]),r.map((function(r){var t=r.instancePath,a=r.keyword,o=r.params,n=r.schemaPath,s=r.parentSchema,c=function(r,e){if(null==r)return{};var t,a,i={},o=Object.keys(r);for(a=0;a<o.length;a++)e.indexOf(t=o[a])>=0||(i[t]=r[t]);return i}(r,b).message,d=void 0===c?"":c,l=t.replace(/\//g,"."),u=(l+" "+d).trim();if("missingProperty"in o){var f=o.missingProperty,v=i.getUiOptions(h.default(e,""+(l=l?l+"."+o.missingProperty:o.missingProperty).replace(/^\./,""))).title;if(v)d=d.replace(f,v);else{var m=h.default(s,[i.PROPERTIES_KEY,f,"title"]);m&&(d=d.replace(f,m))}u=d}else{var p=i.getUiOptions(h.default(e,""+l.replace(/^\./,""))).title;if(p)u=("'"+p+"' "+d).trim();else{var y=null==s?void 0:s.title;y&&(u=("'"+y+"' "+d).trim())}}return{name:a,property:l,message:d,params:o,stack:u,schemaPath:n}}))},e.rawValidation=function(r,e){var t,a,i=void 0;r.$id&&(t=this.ajv.getSchema(r.$id));try{void 0===t&&(t=this.ajv.compile(r)),t(e)}catch(r){i=r}return t&&("function"==typeof this.localizer&&this.localizer(t.errors),a=t.errors||void 0,t.errors=null),{errors:a,validationError:i}},e.validateFormData=function(r,e,t,a,o){var n=this.rawValidation(e,r),s=n.validationError,c=this.transformRJSFValidationErrors(n.errors,o);s&&(c=[].concat(c,[{stack:s.message}])),"function"==typeof a&&(c=a(c,o));var d=this.toErrorSchema(c);if(s&&(d=y({},d,{$schema:{__errors:[s.message]}})),"function"!=typeof t)return{errors:c,errorSchema:d};var l=i.getDefaultFormState(this,e,r,e,!0),u=t(l,this.createErrorHandler(l),o),f=this.unwrapErrorHandler(u);return i.mergeValidationData(this,{errors:c,errorSchema:d},f)},e.withIdRefPrefixObject=function(r){for(var e in r){var t=r[e];r[e]=e===i.REF_KEY&&"string"==typeof t&&t.startsWith("#")?O+t:this.withIdRefPrefix(t)}return r},e.withIdRefPrefixArray=function(r){for(var e=0;e<r.length;e++)r[e]=this.withIdRefPrefix(r[e]);return r},e.isValid=function(r,e,t){var a,i=null!=(a=t.$id)?a:O;try{void 0===this.ajv.getSchema(i)&&this.ajv.addSchema(t,i);var o,n=this.withIdRefPrefix(r);return n.$id&&(o=this.ajv.getSchema(n.$id)),void 0===o&&(o=this.ajv.compile(n)),o(e)}catch(r){return console.warn("Error encountered compiling schema:",r),!1}finally{this.ajv.removeSchema(i)}},e.withIdRefPrefix=function(r){return Array.isArray(r)?this.withIdRefPrefixArray([].concat(r)):u.default(r)?this.withIdRefPrefixObject(f.default(r)):r},r}();function R(r,e){return void 0===r&&(r={}),new P(r,e)}var S=R();r.customizeValidator=R,r.default=S,Object.defineProperty(r,"__esModule",{value:!0})}));
//# sourceMappingURL=validator-ajv8.umd.production.min.js.map
