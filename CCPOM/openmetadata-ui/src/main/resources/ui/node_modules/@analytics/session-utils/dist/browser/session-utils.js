var utilSessions=function(n){var e;e=function(n,e){n.exports=function(n,e,t,r,o){for(e=e.split?e.split("."):e,r=0;r<e.length;r++)n=n?n[e[r]]:o;return n===o?t:n}},e({exports:{}});var t="undefined",r="object";"undefined"==typeof process||process;var o="undefined"!=typeof window;function i(n,e){return e.charAt(0)[n]()+e.slice(1)}"undefined"!=typeof Deno&&Deno,o&&"nodejs"===window.name||"undefined"!=typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"));var u=i.bind(null,"toUpperCase"),s=i.bind(null,"toLowerCase");function a(n,e){void 0===e&&(e=!0);var t=function(n){return d(n)?u("null"):"object"==typeof n?function(n){return f(n.constructor)?n.constructor.name:null}(n):Object.prototype.toString.call(n).slice(8,-1)}(n);return e?s(t):t}function c(n,e){return typeof e===n}var f=c.bind(null,"function"),l=c.bind(null,"string");function d(n){return null===n}function v(n,e){if("object"!=typeof e||d(e))return!1;if(e instanceof n)return!0;var t=a(new n(""));if(function(n){return n instanceof Error||l(n.message)&&n.constructor&&function(n){return"number"===a(n)&&!isNaN(n)}(n.constructor.stackTraceLimit)}(e))for(;e;){if(a(e)===t)return!0;e=Object.getPrototypeOf(e)}return!1}function p(n,e){var t=n instanceof Element||n instanceof HTMLDocument;return t&&e?function(n,e){return void 0===e&&(e=""),n&&n.nodeName===e.toUpperCase()}(n,e):t}function x(n){var e=[].slice.call(arguments,1);return function(){return n.apply(void 0,[].slice.call(arguments).concat(e))}}function g(){for(var n="",e=0,t=4294967295*Math.random()|0;e++<36;){var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[e-1],o=15&t;n+="-"==r||"4"==r?r:("x"==r?o:3&o|8).toString(16),t=e%8==0?4294967295*Math.random()|0:t>>4}return n}c.bind(null,"undefined"),c.bind(null,"boolean"),c.bind(null,"symbol"),v.bind(null,TypeError),v.bind(null,SyntaxError),x(p,"form"),x(p,"button"),x(p,"input"),x(p,"select");var b="__global__",m=typeof self===r&&self.self===self&&self||typeof global===r&&global.global===global&&global||void 0;function y(n){return m[b][n]}function S(n,e){return m[b][n]=e}function w(n){delete m[b][n]}function _(n,e,t){var r;try{if(j(n)){var o=window[n];r=o[e].bind(o)}}catch(n){}return r||t}m[b]||(m[b]={});var h={};function j(n){if(typeof h[n]!==t)return h[n];try{var e=window[n];e.setItem(t,t),e.removeItem(t)}catch(e){return h[n]=!1}return h[n]=!0}j.bind(null,"sessionStorage");var D=_("sessionStorage","getItem",y),I=_("sessionStorage","setItem",S);_("sessionStorage","removeItem",w);var N=function(){if(void 0!==N)return N;var n="cookiecookie";try{k(n,n),N=-1!==document.cookie.indexOf(n),T(n)}catch(n){N=!1}return N}(),O=k,A=k;function T(n){return N?k(n,"",-1):w(n)}function k(n,e,t,r,o,i){if("undefined"!=typeof window){var u=arguments.length>1;return!1===N&&(u?S(n,e):y(n)),u?document.cookie=n+"="+encodeURIComponent(e)+(t?"; expires="+new Date(+new Date+1e3*t).toUTCString()+(r?"; path="+r:"")+(o?"; domain="+o:"")+(i?"; secure":""):""):decodeURIComponent((("; "+document.cookie).split("; "+n+"=")[1]||"").split(";")[0])}}var C="__",U="session",E="page",M=["id","createdAt","created"];function L(n){var e=n?new Date(n):new Date;return[e.toISOString(),e.getTime()]}function P(){var n=L(),e=n[0],t=n[1];return{id:g(),created:t,createdAt:e}}function J(n,e){for(var t={session:[D,I],page:[y,S]}[n],r=t[0],o=t[1],i=P(),u=!1,s={},a=0;a<M.length;a++){var c=M[a],f=C+n+C+U+C+c,l=r(f);u=e||!l;var d=l&&!e?l:o(f,i[c]),v="created"!==c?d:Number(d);s[c]=v}return R(s,u)}function R(n,e){var t=Date.now();return n.elapsed=t-n.created,n.expires&&(n.remaining=Math.abs(n.expires-t)),n.isNew=e,n}function H(n,e){void 0===n&&(n=30);var t=O("__session"),r=t?JSON.parse(t):q(n);return e?r:R(r,!t)}function q(n,e,t){void 0===n&&(n=30);var r=t?H(n,!0):P(),o=60*n,i=r.created;if(t){var u=L(),s=u[0],a=u[1];r.modified=a,r.modifiedAt=s,i=a}var c=L(i+1e3*o),f=c[0];return r.expires=c[1],r.expiresAt=f,e&&(r=Object.assign(r,e)),A("__session",JSON.stringify(r),o),R(r,!t)}var z=J.bind(null,U),B=J.bind(null,U,!0),F=J.bind(null,E),G=J.bind(null,E,!0);return n.extendSession=function(n,e){return void 0===n&&(n=30),q(n||1,e,!0)},n.getPageSession=F,n.getSession=H,n.getTabSession=z,n.removeSession=function(){return T("__session")},n.sessionData=P,n.setPageSession=G,n.setSession=q,n.setTabSession=B,n}({});
//# sourceMappingURL=session-utils.js.map
