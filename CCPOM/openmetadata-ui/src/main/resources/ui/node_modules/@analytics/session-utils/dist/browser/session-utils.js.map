{"version":3,"file":"session-utils.js","sources":["../../../analytics-util-types/dist/analytics-util-types.module.js","../../../analytics-util-storage-global/dist/analytics-util-global-storage.module.js","../../../analytics-util-storage-session/dist/analytics-util-session-storage.module.js","../../../analytics-util-storage-cookie/dist/analytics-util-cookie.module.js","../../src/index.js"],"sourcesContent":["var n=\"function\",t=\"string\",e=\"undefined\",r=\"boolean\",o=\"object\",u=\"array\",i=\"number\",c=\"symbol\",f=\"null\",a=\"error\",s=\"typeError\",l=\"syntaxError\",d=\"asyncFunction\",p=\"generatorFunction\",y=\"asyncGeneratorFunction\",b=function(){},g=\"any\",m=\"*\",v=\"none\",h=\"hidden\",j=\"__\",O=\"form\",S=\"input\",w=\"button\",A=\"select\",E=\"change\",N=\"submit\",D=/^\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+([+-][0-2]\\d:[0-5]\\d|Z)$/,z=/^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Z=/^\\{[\\s\\S]*\\}$|^\\[[\\s\\S]*\\]$/,F=\"undefined\"!=typeof process?process:{},P=F.env&&F.env.NODE_ENV||\"\",x=\"production\"===P,C=\"staging\"===P,L=\"development\"===P,$=\"undefined\"!=typeof window,T=$&&\"localhost\"===window.location.hostname,_=null!=F.versions&&null!=F.versions.node,k=\"undefined\"!=typeof Deno&&void 0!==Deno.core,B=\"object\"==typeof self&&self.constructor&&\"DedicatedWorkerGlobalScope\"===self.constructor.name,G=$&&\"nodejs\"===window.name||\"undefined\"!=typeof navigator&&(navigator.userAgent.includes(\"Node.js\")||navigator.userAgent.includes(\"jsdom\"));function M(n,t){return t.charAt(0)[n]()+t.slice(1)}var U=M.bind(null,\"toUpperCase\"),H=M.bind(null,\"toLowerCase\");function J(n){return Y(n)?U(\"null\"):\"object\"==typeof n?yn(n):Object.prototype.toString.call(n).slice(8,-1)}function R(n,t){void 0===t&&(t=!0);var e=J(n);return t?H(e):e}function V(n,t){return typeof t===n}var W=V.bind(null,\"function\"),q=V.bind(null,\"string\"),I=V.bind(null,\"undefined\");function K(n){return!I(n)}var Q=V.bind(null,\"boolean\"),X=V.bind(null,\"symbol\");function Y(n){return null===n}function nn(n){return\"number\"===R(n)&&!isNaN(n)}function tn(n){return!isNaN(parseFloat(n))}function en(n){return!!W(n)&&/^class /.test(Function.prototype.toString.call(n))}function rn(n){return\"array\"===R(n)}function on(n){if(!un(n))return!1;for(var t=n;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(n)===t}function un(n){return n&&(\"object\"==typeof n||null!==n)}function cn(n){if(!q(n)||!Z.test(n))return!1;try{JSON.parse(n)}catch(n){return!1}return!0}function fn(n){if(Y(n))return!0;switch(typeof n){case\"string\":case\"number\":case\"symbol\":case\"undefined\":case\"boolean\":return!0;default:return!1}}function an(n,t){return on(n)&&W(n[t])}function sn(n){return!!n&&!!(!I(Promise)&&n instanceof Promise||n.then&&W(n.then))}function ln(n){return un(n)&&W(n.throw)&&W(n.return)&&W(n.next)}function dn(n){return\"generatorFunction\"===R(n)}function pn(n){return\"asyncFunction\"===R(n)}function yn(n){return W(n.constructor)?n.constructor.name:null}function bn(n){return n instanceof Set}function gn(n){return n instanceof Map}function mn(n){return n instanceof RegExp}function vn(n){return!(!n.constructor||!W(n.constructor.isBuffer))&&n.constructor.isBuffer(n)}function hn(n){return n instanceof Error||q(n.message)&&n.constructor&&nn(n.constructor.stackTraceLimit)}function jn(n){return un(n)&&q(n.message)&&q(n.name)}function On(n,t){if(\"object\"!=typeof t||Y(t))return!1;if(t instanceof n)return!0;var e=R(new n(\"\"));if(hn(t))for(;t;){if(R(t)===e)return!0;t=Object.getPrototypeOf(t)}return!1}var Sn=On.bind(null,TypeError),wn=On.bind(null,SyntaxError);function An(n){if(!W(n))return!1;var t=/{(\\r|\\n|\\s)*}/gm,e=b+\"\";return e===(n.toString().match(t)||[\"\"])[0].replace(t,e)}function En(n){try{if(nn(n.length)&&W(n.callee))return!0}catch(n){if(-1!==n.message.indexOf(\"callee\"))return!0}return!1}function Nn(n){return!(q(n)&&\"false\"===n.toLowerCase()||!n)}function Dn(n){return!n}function zn(n){return!0===n}function Zn(n){return!1===n}function Fn(n){return!(n.length>320)&&z.test(n)}function Pn(n){return n instanceof Date||W(n.toDateString)&&W(n.getDate)&&W(n.setDate)}function xn(n){return D.test(n)}function Cn(n){return!(!Y(n)&&(rn(n)?n.length:bn(n)||gn(n)?n.size:on(n)&&Object.keys(n).length))}function Ln(n){return NodeList.prototype.isPrototypeOf(n)}function $n(n,t){var e=n instanceof Element||n instanceof HTMLDocument;return e&&t?Tn(n,t):e}function Tn(n,t){return void 0===t&&(t=\"\"),n&&n.nodeName===t.toUpperCase()}function _n(n){var t=[].slice.call(arguments,1);return function(){return n.apply(void 0,[].slice.call(arguments).concat(t))}}var kn=_n($n,\"form\"),Bn=_n($n,\"button\"),Gn=_n($n,\"input\"),Mn=_n($n,\"select\");function Un(n,t){if(!n||\"hidden\"===getComputedStyle(n).visibility)return!0;for(;n;){if(null!=t&&n===t)return!1;if(\"none\"===getComputedStyle(n).display)return!0;n=n.parentElement}return!1}function Hn(n){return n?rn(n)?n:[n]:[]}export{m as ALL,g as ANY,u as ARRAY,d as ASYNC_FUNCTION,y as ASYNC_GENERATOR_FUNCTION,r as BOOLEAN,w as BUTTON,E as CHANGE,P as ENV,a as ERROR,O as FORM,n as FUNCTION,p as GENERATOR_FUNCTION,h as HIDDEN,S as INPUT,v as NONE,f as NULL,i as NUMBER,o as OBJECT,j as PREFIX,z as REGEX_EMAIL,D as REGEX_ISO,Z as REGEX_JSON,A as SELECT,t as STRING,N as SUBMIT,c as SYMBOL,l as SYNTAX_ERROR,s as TYPE_ERROR,e as UNDEFINED,yn as ctorName,Hn as ensureArray,R as getType,J as getTypeName,En as isArguments,rn as isArray,pn as isAsyncFunction,Q as isBoolean,$ as isBrowser,vn as isBuffer,Bn as isButton,en as isClass,Pn as isDate,K as isDefined,k as isDeno,L as isDev,$n as isElement,Fn as isEmail,Cn as isEmpty,hn as isError,jn as isErrorLike,Zn as isFalse,Dn as isFalsy,kn as isForm,W as isFunction,ln as isGenerator,dn as isGeneratorFunction,Un as isHidden,Gn as isInput,xn as isIsoDate,G as isJsDom,cn as isJson,T as isLocalHost,gn as isMap,an as isMethod,An as isNoOp,_ as isNode,Ln as isNodeList,Tn as isNodeType,Y as isNull,nn as isNumber,tn as isNumberLike,on as isObject,un as isObjectLike,fn as isPrimitive,x as isProd,sn as isPromise,mn as isRegex,Mn as isSelect,bn as isSet,C as isStaging,q as isString,X as isSymbol,wn as isSyntaxError,zn as isTrue,Nn as isTruthy,Sn as isTypeError,I as isUndefined,B as isWebWorker,b as noOp};\n//# sourceMappingURL=analytics-util-types.module.js.map\n","import{PREFIX as t,OBJECT as e,UNDEFINED as r}from\"@analytics/type-utils\";var l=\"global\",o=t+\"global\"+t,n=typeof self===e&&self.self===self&&self||typeof global===e&&global.global===global&&global||void 0;function a(t){return n[o][t]}function f(t,e){return n[o][t]=e}function i(t){delete n[o][t]}function u(t,e,r){var l;try{if(b(t)){var o=window[t];l=o[e].bind(o)}}catch(t){}return l||r}n[o]||(n[o]={});var c={};function b(t){if(typeof c[t]!==r)return c[t];try{var e=window[t];e.setItem(r,r),e.removeItem(r)}catch(e){return c[t]=!1}return c[t]=!0}export{l as GLOBAL,o as KEY,a as get,n as globalContext,b as hasSupport,i as remove,f as set,u as wrap};\n//# sourceMappingURL=analytics-util-global-storage.module.js.map\n","import{hasSupport as e,wrap as s,get as o,set as t,remove as r}from\"@analytics/global-storage-utils\";var a=\"sessionStorage\",i=e.bind(null,\"sessionStorage\"),g=s(\"sessionStorage\",\"getItem\",o),n=s(\"sessionStorage\",\"setItem\",t),l=s(\"sessionStorage\",\"removeItem\",r);export{a as SESSION_STORAGE,g as getSessionItem,i as hasSessionStorage,l as removeSessionItem,n as setSessionItem};\n//# sourceMappingURL=analytics-util-session-storage.module.js.map\n","import{remove as e,set as o,get as n}from\"@analytics/global-storage-utils\";var t=\"cookie\",i=a(),r=d,c=d;function u(o){return i?d(o,\"\",-1):e(o)}function a(){if(void 0!==i)return i;var e=\"cookiecookie\";try{d(e,e),i=-1!==document.cookie.indexOf(e),u(e)}catch(e){i=!1}return i}function d(e,t,r,c,u,a){if(\"undefined\"!=typeof window){var d=arguments.length>1;return!1===i&&(d?o(e,t):n(e)),d?document.cookie=e+\"=\"+encodeURIComponent(t)+(r?\"; expires=\"+new Date(+new Date+1e3*r).toUTCString()+(c?\"; path=\"+c:\"\")+(u?\"; domain=\"+u:\"\")+(a?\"; secure\":\"\"):\"\"):decodeURIComponent(((\"; \"+document.cookie).split(\"; \"+e+\"=\")[1]||\"\").split(\";\")[0])}}export{t as COOKIE,r as getCookie,a as hasCookies,u as removeCookie,c as setCookie};\n//# sourceMappingURL=analytics-util-cookie.module.js.map\n","// Session Utilities\nimport { uuid } from 'analytics-utils'\nimport { getSessionItem, setSessionItem } from '@analytics/session-storage-utils'\nimport { setCookie, getCookie, removeCookie } from '@analytics/cookie-utils'\nimport { set, get } from '@analytics/global-storage-utils'\n\nconst PREFIX = '__'\nconst SESSION = 'session'\nconst PAGE = 'page'\nconst KEYS = ['id', 'createdAt', 'created']\nconst TIMEOUT = 30\n\nfunction getDate(x) {\n  const d = (x) ? new Date(x) : new Date()\n  return [ d.toISOString(), d.getTime() ]\n}\n\nexport function sessionData() {\n  const [ iso, unix ] = getDate()\n  return {\n    id: uuid(),\n    created: unix,\n    createdAt: iso,\n  }\n}\n\nfunction logic(kind, isSetter) {\n  const storageMechanism = {\n    session: [ getSessionItem, setSessionItem ],\n    page: [ get, set ]\n  }\n  const [ getter, setter ] = storageMechanism[kind]\n  const data = sessionData()\n  let isNew = false\n  let info = {}\n\n  for (let i = 0; i < KEYS.length; i++) {\n    const key = KEYS[i]\n    // e.g. __page__session__createdAt\n    const k = PREFIX + kind + PREFIX + SESSION + PREFIX + key\n    const currentVal = getter(k)\n    // Triple ! sets !!!false | !!!null | !!!undefined to true\n    isNew = isSetter || !!!currentVal\n    const value = (currentVal && !isSetter) ? currentVal : setter(k, data[key])\n    const finValue = (key !== 'created') ? value : Number(value)\n    info[key] = finValue\n  }\n\n  return addContext(info, isNew)\n}\n\nfunction addContext(obj, isNew) {\n  const now = Date.now()\n  obj.elapsed = now - obj.created\n  if (obj.expires) obj.remaining = Math.abs(obj.expires - now)\n  obj.isNew = isNew\n  return obj\n}\n\nfunction getName() {\n  return PREFIX + SESSION\n}\n\nexport function getSession(minutes = TIMEOUT, persistedOnly)  {\n  const cookieData = getCookie(getName())\n  const data = (cookieData) ? JSON.parse(cookieData) : setSession(minutes)\n  return persistedOnly ? data : addContext(data, !!!cookieData)\n}\n\nexport function setSession(minutes = TIMEOUT, extra, extend) {\n  // const { extend, minutes } = opts\n  let data = extend ? getSession(minutes, true) : sessionData()\n  const exp = 60 * minutes\n  let timeExpire = data.created\n  if (extend) {\n    const [ iso, unix ] = getDate()\n    data.modified = unix\n    data.modifiedAt = iso\n    timeExpire = unix\n  }\n  const [ expiresIso, expiresUnix ] = getDate(timeExpire + (exp * 1e3))\n  data.expires = expiresUnix\n  data.expiresAt = expiresIso\n  if (extra) {\n    data = Object.assign(data, extra)\n  }\n  setCookie(getName(), JSON.stringify(data), exp)\n  return addContext(data, !extend)\n}\n\nexport const extendSession = (minutes = TIMEOUT, extra) => setSession((minutes || 1), extra, true)\n\nexport const removeSession = () => removeCookie(getName())\n\nexport const getTabSession = logic.bind(null, SESSION)\nexport const setTabSession = logic.bind(null, SESSION, true)\n\nexport const getPageSession = logic.bind(null, PAGE)\nexport const setPageSession = logic.bind(null, PAGE, true)"],"names":["UNDEFINED","OBJECT","process","isBrowser","window","text","method","s","charAt","slice","Deno","name","navigator","userAgent","includes","upper","bind","lower","getType","val","toLowerCase","type","isNull","x","isFunction","constructor","ctorName","Object","prototype","toString","call","getTypeName","typeOf","kind","isString","errorType","ErrKind","value","typeName","Error","message","n","isNaN","isNumber","stackTraceLimit","isError","getPrototypeOf","isElement","element","isEl","Element","HTMLDocument","nodeName","toUpperCase","isNodeType","bindArgs","fn","boundArgs","TypeError","SyntaxError","KEY","PREFIX","globalContext","self","global","this","get","key","set","remove","wrap","operation","fallback","hasSupport","storage","e","cache","setItem","removeItem","err","getSessionItem","setSessionItem","isSupported","tmp","COOKIE","cookie","document","indexOf","removeCookie","hasCookies","getCookie","setCookie","ttl","path","domain","secure","isSet","arguments","length","encodeURIComponent","Date","toUTCString","decodeURIComponent","split","SESSION","PAGE","KEYS","getDate","d","toISOString","getTime","sessionData","iso","unix","id","uuid","created","createdAt","logic","isSetter","session","page","getter","setter","data","isNew","info","i","k","currentVal","finValue","Number","addContext","obj","now","elapsed","expires","remaining","Math","abs","getSession","minutes","persistedOnly","cookieData","JSON","parse","setSession","extra","extend","exp","timeExpire","modified","modifiedAt","expiresIso","expiresAt","assign","stringify","extendSession","getTabSession","setTabSession","getPageSession","setPageSession"],"mappings":"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"}