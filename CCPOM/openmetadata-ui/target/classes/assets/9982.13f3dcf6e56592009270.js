"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[9982],{69982:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});var l=a(70655),n=a(67294),r=a(68432),i=a(15137),s=a(49101),o=a(49409),d=a(56256),c=a(71577),m=a(19650),u=a(50963),p=a(96486),y=a(16139),v=a(17309),f=a(24671),E=a(79690),b=a(95137),w=a(79686),g=a(26387),h=a(40773),k=a(37878),N=function(e){var t,a=e.header,i=e.allowAccess,N=void 0===i||i,T=e.isLoading,C=e.slashedBreadcrumb,x=e.onCancel,Z=e.onSave,L=(0,r.$)().t,S=(0,l.CR)((0,u.useForm)(),1)[0],U=(0,b.Eu)().currentUser,z=o.Z.useWatch("owner",S),A=null!==(t=o.Z.useWatch("reviewers",S))&&void 0!==t?t:[],I=n.createElement("div",{"data-testid":"right-panel"},n.createElement(d.Z.Title,{level:5},L("label.configure-entity",{entity:L("label.knowledge-center")})),n.createElement(d.Z.Text,{className:"mb-5"},L("message.create-new-knowledge-center-guide"))),P=[{name:"name",id:"root/name",label:L("label.name"),required:!0,placeholder:L("label.name"),type:v.U.TEXT,props:{"data-testid":"name"},rules:[{pattern:y.$Q,message:L("message.entity-name-validation")},{min:1,max:128,message:""+L("message.entity-maximum-size",{entity:""+L("label.name"),max:"128"})}]},{name:"displayName",id:"root/displayName",label:L("label.display-name"),required:!1,placeholder:L("label.display-name"),type:v.U.TEXT,props:{"data-testid":"display-name"}},{name:"tags",required:!1,label:L("label.tag-plural"),id:"root/tags",type:v.U.TAG_SUGGESTION,props:{"data-testid":"tags-container"}},{name:"mutuallyExclusive",label:L("label.mutually-exclusive"),type:v.U.SWITCH,required:!1,props:{"data-testid":"mutually-exclusive-button"},id:"root/mutuallyExclusive",formItemLayout:v.E.HORIZONATAL}],R={name:"owner",id:"root/owner",required:!1,label:L("label.owner"),type:v.U.USER_TEAM_SELECT,props:{hasPermission:!0,children:n.createElement(c.Z,{"data-testid":"add-owner",icon:n.createElement(s.Z,{style:{color:"white",fontSize:"12px"}}),size:"small",type:"primary"})},formItemLayout:v.E.HORIZONATAL,formItemProps:{valuePropName:"owner",trigger:"onUpdate"}},_={name:"reviewers",id:"root/reviewers",required:!1,label:L("label.reviewer-plural"),type:v.U.USER_MULTI_SELECT,props:{hasPermission:!0,popoverProps:{placement:"topLeft"},children:n.createElement(c.Z,{"data-testid":"add-reviewers",icon:n.createElement(s.Z,{style:{color:"white",fontSize:"12px"}}),size:"small",type:"primary"})},formItemLayout:v.E.HORIZONATAL,formItemProps:{valuePropName:"selectedUsers",trigger:"onUpdate",initialValue:[]}};return n.createElement(w.Z,{firstPanel:{children:n.createElement("div",{className:"max-width-md w-9/10 service-form-container"},n.createElement(g.Z,{titleLinks:C}),n.createElement(d.Z.Title,{className:"m-t-md","data-testid":"form-heading",level:5},a),n.createElement("div",{className:"add-knowledgeCenter","data-testid":"add-knowledgeCenter"},n.createElement(o.Z,{form:S,layout:"vertical",onFinish:function(e){var t=e.name,a=e.displayName,l=e.description,n=void 0===l?"":l,r=e.tags,i=e.mutuallyExclusive,s=e.reviewers,o=void 0===s?[]:s,d=e.owner,c=null!=d?d:{id:null==U?void 0:U.id,type:"user"},m={name:t.trim(),displayName:null==a?void 0:a.trim(),description:n,reviewers:o.map((function(e){return(0,p.toString)(e.fullyQualifiedName)})).filter(Boolean),owner:c,tags:r||[],mutuallyExclusive:Boolean(i)};Z(m)}},(0,E.GL)(P),n.createElement("div",{className:"m-t-xss"},(0,E.rz)(R),z&&n.createElement("div",{className:"m-y-xs","data-testid":"owner-container"},n.createElement(h.w,{id:z.id,name:(0,f.C_)(z),size:k.e.small}))),n.createElement("div",{className:"m-t-xss"},(0,E.rz)(_),Boolean(A.length)&&n.createElement(m.Z,{wrap:!0,className:"m-y-xs","data-testid":"reviewers-container",size:[8,8]},A.map((function(e,t){return n.createElement(h.w,{id:e.id,key:t,name:(0,f.C_)(e),size:k.e.small})})))),n.createElement(m.Z,{className:"w-full justify-end","data-testid":"cta-buttons",size:16},n.createElement(c.Z,{"data-testid":"cancel-knowledgeCenter",type:"link",onClick:x},L("label.cancel")),n.createElement(c.Z,{"data-testid":"save-knowledgeCenter",disabled:!N,htmlType:"submit",loading:T,type:"primary"},L("label.save")))))),minWidth:700,flex:.7},pageTitle:L("label.add-entity",{entity:L("label.knowledge-center")}),secondPanel:{children:I,className:"p-md service-doc-panel",minWidth:60,overlay:{displayThreshold:200,header:L("label.setup-guide"),rotation:"counter-clockwise"}}})},T=a(8752),C=a(79839),x=a(62761),Z=a(72819),L=a(18460),S=a(93895),U=a(39570),z=a(96840),A=a(73553),I=a(46321),P=function(){var e=(0,i.k6)(),t=(0,T.BL)().permissions,a=(0,l.CR)((0,n.useState)([]),2),s=a[0],o=a[1],d=(0,l.CR)((0,n.useState)(!1),2),c=d[0],m=d[1],u=(0,l.CR)((0,n.useState)(!1),2),p=u[0],y=u[1],v=(0,l.CR)((0,n.useState)([]),2),f=v[0],E=v[1],b=(0,r.$)().t,w=(0,n.useMemo)((function(){return(0,U.P_)(Z.OX.Create,C.A.KNOWLEDGE_CENTER,t)}),[t]),g=function(t){void 0===t&&(t=""),e.push((0,z.Ky)(t))},h=(0,n.useCallback)((function(){g()}),[]),k=(0,n.useCallback)((function(e){return(0,l.mG)(void 0,void 0,void 0,(function(){var t,a,n;return(0,l.Jh)(this,(function(l){switch(l.label){case 0:y(!0),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,(0,L.Vc)(e)];case 2:return t=l.sent(),g(null!==(n=t.fullyQualifiedName)&&void 0!==n?n:""),[3,5];case 3:return a=l.sent(),r=(0,S.B)(a,x.c9.alreadyExist)?b("server.entity-already-exist",{entity:b("label.knowledge-center"),entityPlural:b("label.knowledge-center-lowercase-plural"),name:e.name}):a,i=b("server.add-entity-error",{entity:b("label.knowledge-center-lowercase")}),(0,I.Eo)(r,i),[3,5];case 4:return y(!1),[7];case 5:return[2]}var r,i}))}))}),[]);return(0,n.useEffect)((function(){E([{name:b("label.knowledge-center"),url:(0,z.Ky)()},{name:b("label.add-entity",{entity:b("label.knowledge-center")}),url:"",activeTitle:!0}])}),[]),n.createElement("div",{className:"self-center"},n.createElement(N,{allowAccess:w,fetchTags:function(){m(!0),(0,A.bn)().then((function(e){return(0,l.mG)(void 0,void 0,void 0,(function(){var t;return(0,l.Jh)(this,(function(a){switch(a.label){case 0:return e.data?[4,(0,A.bM)(e.data)]:[3,2];case 1:return t=a.sent(),o(t),[3,3];case 2:(0,I.Eo)(b("server.entity-fetch-error",{entity:b("label.tag-plural")})),a.label=3;case 3:return[2]}}))}))})).catch((function(e){(0,I.Eo)(e,b("server.entity-fetch-error",{entity:b("label.tag-plural")}))})).finally((function(){m(!1)}))},header:b("label.add-entity",{entity:b("label.knowledge-center")}),isLoading:p,isTagLoading:c,slashedBreadcrumb:f,tagList:s,onCancel:h,onSave:k}))}}}]);