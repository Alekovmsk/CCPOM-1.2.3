"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[2252],{92056:function(e,t,i){var a=i(71230),n=i(15746),l=i(96486),s=i(67294),r=i(97638),o=i(72972),u=i(85406);t.Z=function(e){var t=e.loading,i=e.children;return t?s.createElement("div",{className:"m-b-md p-md"},s.createElement(u.Z,{isLabel:!0}),s.createElement(a.Z,{gutter:32,justify:"space-between"},s.createElement(n.Z,{className:"m-l-xss",span:24},s.createElement(o.Z,null)),s.createElement(n.Z,{className:"m-t-md",span:24},(0,r.kK)().map((function(){return s.createElement(u.Z,{isCount:!0,isLabel:!0,key:(0,l.uniqueId)()})}))))):i}},21397:function(e,t,i){i.d(t,{O:function(){return a}});var a={name:"",displayName:"",description:""}},64383:function(e,t,i){var a,n;i.d(t,{O:function(){return n}}),function(e){e.Allow="allow",e.Deny="deny"}(a||(a={})),function(e){e.All="All",e.Create="Create",e.Delete="Delete",e.EditAll="EditAll",e.EditCustomFields="EditCustomFields",e.EditDataProfile="EditDataProfile",e.EditDescription="EditDescription",e.EditDisplayName="EditDisplayName",e.EditKnowledgePanel="EditKnowledgePanel",e.EditLifeCycle="EditLifeCycle",e.EditLineage="EditLineage",e.EditOwner="EditOwner",e.EditPage="EditPage",e.EditPolicy="EditPolicy",e.EditQueries="EditQueries",e.EditReviewers="EditReviewers",e.EditRole="EditRole",e.EditSampleData="EditSampleData",e.EditStatus="EditStatus",e.EditTags="EditTags",e.EditTeams="EditTeams",e.EditTests="EditTests",e.EditTier="EditTier",e.EditUsage="EditUsage",e.EditUsers="EditUsers",e.ViewAll="ViewAll",e.ViewBasic="ViewBasic",e.ViewDataProfile="ViewDataProfile",e.ViewQueries="ViewQueries",e.ViewSampleData="ViewSampleData",e.ViewTests="ViewTests",e.ViewUsage="ViewUsage"}(n||(n={}))},72252:function(e,t,i){i.r(t),i.d(t,{default:function(){return z}});var a,n=i(70655),l=i(19650),s=i(56256),r=i(94199),o=i(71577),u=i(79166),d=i(94184),c=i.n(d),m=i(34901),f=i(96486),v=i(67294),p=i(68432),y=i(15137),E=i(57599),g=i(39006),b=i(83716),C=i(88816),h=i(69523),N=i(50922),T=i(80646),w=i(8752),A=i(79839),S=i(92056),x=i(19793),R=i(62761),L=i(61105);!function(e){e.System="system",e.User="user"}(a||(a={}));var P=i(64383),U=i(36570),V=i(93895),I=i(24671),Z=i(39570),D=i(96840),Q=i(40734),O=i(46321),M=i(49409),k=i(50146),G=i(16139),F=i(21397),q=i(17309),_=i(79690),J=function(e){var t,i=e.visible,a=e.onCancel,l=e.header,r=e.initialValues,o=e.onSubmit,u=e.showMutuallyExclusive,d=void 0!==u&&u,c=e.isLoading,m=e.isSystemTag,f=e.permissions,y=e.isClassification,E=e.isEditing,g=void 0!==E&&E,b=e.isTier,C=void 0!==b&&b,h=(0,p.$)().t,N=(0,n.CR)(M.Z.useForm(),1)[0];(0,v.useEffect)((function(){var e,t;N.setFieldsValue((0,n.pi)((0,n.pi)({},r),{iconURL:null===(e=null==r?void 0:r.style)||void 0===e?void 0:e.iconURL,color:null===(t=null==r?void 0:r.style)||void 0===t?void 0:t.color}))}),[r]);var T=(0,v.useMemo)((function(){return g&&m}),[g,m]),w=(0,v.useMemo)((function(){return g?!((null==f?void 0:f.editDisplayName)||(null==f?void 0:f.editAll)):!((null==f?void 0:f.createTags)||y)}),[g,y,f]),A=(0,v.useMemo)((function(){return g?!((null==f?void 0:f.editDescription)||(null==f?void 0:f.editAll)):!((null==f?void 0:f.createTags)||y)}),[g,y,f]),S=(0,v.useMemo)((function(){return g?!(null==f?void 0:f.editAll):!((null==f?void 0:f.createTags)||y)}),[g,y,f]),x=(0,v.useMemo)((function(){return g?!(null==f?void 0:f.editAll):!y}),[g,y,f]),L=(0,n.ev)((0,n.ev)((0,n.ev)([{name:"name",id:"root/name",required:!0,label:h("label.name"),type:q.U.TEXT,rules:[{pattern:G.$Q,message:h("message.entity-name-validation")},{type:"string",min:2,max:64,message:h("message.entity-size-must-be-between-2-and-64",{entity:h("label.name")})}],props:{"data-testid":"name",disabled:T},placeholder:h("label.name")},{name:"displayName",id:"root/displayName",required:!1,label:h("label.display-name"),type:q.U.TEXT,props:{"data-testid":"displayName",disabled:w},placeholder:h("label.display-name")},{name:"description",required:!0,label:h("label.description"),id:"root/description",type:q.U.DESCRIPTION,props:{"data-testid":"description",initialValue:"",readonly:A}}],(0,n.CR)(y?[]:[{name:"iconURL",id:"root/iconURL",label:h("label.icon-url"),required:!1,placeholder:h("label.icon-url"),type:q.U.TEXT,helperText:h("message.govern-url-size-message"),props:{"data-testid":"icon-url",tooltipPlacement:"right"}},{name:"color",id:"root/color",label:h("label.color"),required:!1,type:q.U.COLOR_PICKER,rules:[{pattern:G.H1,message:h("message.hex-color-validation")}]}])),(0,n.CR)(m&&!C?[{name:"disabled",required:!1,label:h("label.disable-tag"),id:"root/disabled",type:q.U.SWITCH,formItemLayout:"horizontal",props:{"data-testid":"disabled",initialValue:null!==(t=null==r?void 0:r.disabled)&&void 0!==t&&t,disabled:S}}]:[])),(0,n.CR)(d?[{name:"mutuallyExclusive",label:h("label.mutually-exclusive"),type:q.U.SWITCH,required:!1,props:{"data-testid":"mutually-exclusive-button",disabled:x},id:"root/mutuallyExclusive",formItemLayout:"horizontal",formItemProps:{valuePropName:"checked"}}]:[]));return v.createElement(k.Z,{centered:!0,destroyOnClose:!0,closable:!1,"data-testid":"modal-container",okButtonProps:{form:"tags",type:"primary",htmlType:"submit",loading:c},okText:h("label.save"),open:i,title:v.createElement(s.Z.Text,{strong:!0,"data-testid":"header"},l),width:750,onCancel:function(){N.setFieldsValue(F.O),a()}},v.createElement(M.Z,{form:N,initialValues:null!=r?r:F.O,layout:"vertical",name:"tags",validateMessages:R.NG,onFinish:function(e){o(e),N.setFieldsValue(F.O)}},(0,_.GL)(L)))},z=function(){var e,t,i,d,M=(0,w.BL)(),k=M.getEntityPermission,G=M.permissions,F=(0,y.k6)(),q=(0,y.UO)().fqn,_=(0,n.CR)((0,v.useState)([]),2),z=_[0],B=_[1],H=(0,n.CR)((0,v.useState)(),2),W=H[0],j=H[1],K=(0,n.CR)((0,v.useState)(!1),2),X=K[0],$=K[1],Y=(0,n.CR)((0,v.useState)(!1),2),ee=Y[0],te=Y[1],ie=(0,n.CR)((0,v.useState)(!1),2),ae=ie[0],ne=ie[1],le=(0,n.CR)((0,v.useState)(),2),se=le[0],re=le[1],oe=(0,n.CR)((0,v.useState)(""),2),ue=oe[0],de=oe[1],ce=(0,n.CR)((0,v.useState)(!1),2),me=ce[0],fe=ce[1],ve=(0,n.CR)((0,v.useState)(!1),2),pe=ve[0],ye=ve[1],Ee=(0,n.CR)((0,v.useState)({data:void 0,state:!1}),2),ge=Ee[0],be=Ee[1],Ce=(0,n.CR)((0,v.useState)(Z.Bd),2),he=Ce[0],Ne=Ce[1],Te=(0,n.CR)((0,v.useState)(!1),2),we=Te[0],Ae=Te[1],Se=(0,p.$)().t,xe=(0,v.useMemo)((function(){return(0,Z.P_)(P.O.Create,A.A.CLASSIFICATION,G)}),[G]),Re=(0,n.CR)((0,v.useState)(L.Vu.INITIAL),2),Le=Re[0],Pe=Re[1],Ue=(0,v.useMemo)((function(){var e;return null!==(e=null==W?void 0:W.disabled)&&void 0!==e&&e}),[null==W?void 0:W.disabled]),Ve=(0,v.useMemo)((function(){return"Tier"===(null==W?void 0:W.name)}),[W]),Ie=function(e){return(0,n.mG)(void 0,void 0,void 0,(function(){var t,i,a;return(0,n.Jh)(this,(function(n){switch(n.label){case 0:fe(!0),console.log("currentClassification fetch"),console.log(W),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,(0,U.bi)(["termCount"],1e3)];case 2:return t=n.sent(),B(t.data),e&&t.data.length&&(j(t.data[0]),console.log("currentClassification fetch"),console.log(W),F.push((0,D.bT)(t.data[0].fullyQualifiedName))),[3,5];case 3:return i=n.sent(),a=(0,Q.HR)(i,Se("server.entity-fetch-error",{entity:Se("label.tag-category-lowercase")})),(0,O.Eo)(a),de(a),[3,5];case 4:return fe(!1),[7];case 5:return[2]}}))}))},Ze=function(){re(void 0),ne(!1),te(!1)},De=(0,v.useCallback)((function(){var e;if(!(0,f.isUndefined)(W)){var t=(0,n.ev)([],(0,n.CR)(z)).filter((function(e){return e.id!==W.id})),i=t[0];B(t),F.push((0,D.bT)(null!==(e=null==i?void 0:i.fullyQualifiedName)&&void 0!==e?e:null==i?void 0:i.name))}}),[W,z,B]);(0,v.useEffect)((function(){W&&(0,n.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,n.Jh)(this,(function(i){switch(i.label){case 0:if(!(null==W?void 0:W.id))return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,k(A.A.CLASSIFICATION,null==W?void 0:W.id)];case 2:return e=i.sent(),Ne(e),[3,4];case 3:return t=i.sent(),(0,O.Eo)(t),[3,4];case 4:return[2]}}))}))}),[W]),(0,v.useEffect)((function(){if(q){var e=q.startsWith(R.jV);t=e?R.jV:(0,Q.p2)(q),(0,n.mG)(void 0,void 0,void 0,(function(){var e,i,a;return(0,n.Jh)(this,(function(l){switch(l.label){case 0:if((null==W?void 0:W.fullyQualifiedName)===t)return[3,4];fe(!0),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,(0,U.al)(t,["usageCount","termCount"])];case 2:return(e=l.sent())?(B((function(i){return i.map((function(i){return i.fullyQualifiedName===t?(0,n.pi)((0,n.pi)({},i),{termCount:e.termCount}):i}))})),console.log("currentClassification pre try"),console.log(e),j(e),console.log("currentClassification try"),console.log(e),fe(!1)):(0,O.Eo)(Se("server.unexpected-response")),[3,4];case 3:return i=l.sent(),a=(0,Q.HR)(i,Se("server.entity-fetch-error",{entity:Se("label.tag-category-lowercase")})),(0,O.Eo)(a),de(a),j({name:t,description:""}),console.log("currentClassification catch"),console.log(W),fe(!1),[3,4];case 4:return[2]}}))}))}var t;console.log("tagCategoryName 1"),console.log(q)}),[q]),(0,v.useEffect)((function(){Ie(!q),console.log("tagCategoryName 2"),console.log(q)}),[]),(0,v.useMemo)((function(){return v.createElement(C.Z,{id:"tags"},v.createElement(S.Z,{loading:me},v.createElement("div",{className:"p-y-xs","data-testid":"data-summary-container"},v.createElement(l.Z,{className:"w-full p-x-sm m-b-sm",direction:"vertical",size:12},v.createElement(s.Z.Text,{className:"text-sm font-semibold"},Se("label.classification-plural")),v.createElement(r.Z,{title:!xe&&Se("message.no-permission-for-action")},v.createElement(o.Z,{block:!0,className:" text-primary","data-testid":"add-classification",disabled:!xe,onClick:function(){te((function(e){return!e}))}},v.createElement("div",{className:"d-flex items-center justify-center"},v.createElement(E.ReactComponent,{className:"anticon"}),v.createElement(s.Z.Text,{className:"p-l-xss",ellipsis:{tooltip:!0}},Se("label.add-entity",{entity:Se("label.classification")})))))),z.map((function(e){return v.createElement("div",{className:c()("align-center content-box cursor-pointer text-grey-body text-body d-flex p-y-xss p-x-sm m-y-xss",{activeCategory:(null==W?void 0:W.name)===e.name}),"data-testid":"side-panel-classification",key:e.name,onClick:function(){return function(e){j(e),F.push((0,D.bT)(e.fullyQualifiedName))}(e)}},v.createElement(s.Z.Paragraph,{className:"ant-typography-ellipsis-custom self-center m-b-0 tag-category","data-testid":"tag-name",ellipsis:{rows:1,tooltip:!0}},(0,I.C_)(e),e.disabled&&v.createElement(u.Z,{className:"m-l-xs badge-grey opacity-60",count:Se("label.disabled"),"data-testid":"disabled",size:"small"})),(0,V.yh)(e.termCount,"self-center m-l-auto",(null==W?void 0:W.fullyQualifiedName)===e.fullyQualifiedName))})))))}),[me,z,W,xe]);var Qe=(0,v.useMemo)((function(){return(0,Z.P_)(P.O.Create,A.A.TAG,G)||he.EditAll}),[G,he]),Oe=(0,v.useMemo)((function(){return(0,Z.P_)(P.O.EditDescription,A.A.TAG,G)||he.EditAll}),[G,he]),Me=(0,v.useMemo)((function(){return(0,Z.P_)(P.O.EditDisplayName,A.A.TAG,G)||he.EditAll}),[G,he]),ke=(0,v.useMemo)((function(){return(0,Z.P_)(P.O.EditAll,A.A.TAG,G)||he.EditAll}),[G,he]),Ge=(0,v.useMemo)((function(){return{createTags:Qe,editAll:ke,editDescription:Oe,editDisplayName:Me}}),[Qe,ke,Oe,Me]),Fe=(0,v.useMemo)((function(){return!(Oe||Me||ke)||Ue}),[Oe,Me,ke,Ue]),qe=(0,v.useMemo)((function(){var e;return se?Se("label.edit-entity",{entity:Se("label.tag")}):Se("message.adding-new-tag",{categoryName:null!==(e=null==W?void 0:W.displayName)&&void 0!==e?e:null==W?void 0:W.name})}),[se,W]);return me?v.createElement(h.Z,null):ue?v.createElement(b.Z,null,v.createElement(s.Z.Paragraph,{className:"text-center m-auto"},ue)):v.createElement(T.Z,{pageTitle:Se("label.tag-plural")},pe?v.createElement(h.Z,null):v.createElement(g.Z,{classificationPermissions:he,currentClassification:W,deleteTags:ge,disableEditButton:Fe,handleActionDeleteTag:function(e){W&&be({data:{id:e.id,name:e.name,categoryName:null==W?void 0:W.fullyQualifiedName,isCategory:!1,status:"waiting"},state:!0})},handleAddNewTagClick:function(){ne(!0)},handleAfterDeleteAction:De,handleCancelEditDescription:function(){$(!1)},handleEditDescriptionClick:function(){$(!0)},handleEditTagClick:function(e){ne(!0),re(e)},handleUpdateClassification:function(e){return(0,n.mG)(void 0,void 0,void 0,(function(){var t,i,a,l,s;return(0,n.Jh)(this,(function(r){switch(r.label){case 0:if((0,f.isUndefined)(W))return[3,5];ye(!0),t=(0,m.qu)(W,e),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,(0,U.Wu)(null!==(l=null==W?void 0:W.id)&&void 0!==l?l:"",t)];case 2:return i=r.sent(),B((function(e){return e.map((function(e){return e.fullyQualifiedName===W.fullyQualifiedName?(0,n.pi)((0,n.pi)({},e),i):e}))})),j((function(e){return(0,n.pi)((0,n.pi)({},e),i)})),console.log("setCurrentClassification((prev) => ({ ...prev, ...response }));"),console.log(W),(null==W?void 0:W.fullyQualifiedName)===e.fullyQualifiedName&&(null==W?void 0:W.name)===e.name||F.push((0,D.bT)(i.fullyQualifiedName)),[3,5];case 3:return a=r.sent(),(null===(s=a.response)||void 0===s?void 0:s.status)===x.NL.CONFLICT?(0,O.Eo)(Se("server.entity-already-exist",{entity:Se("label.classification"),entityPlural:Se("label.classification-lowercase-plural"),name:e.name})):(0,O.Eo)(a,Se("server.entity-updating-error",{entity:Se("label.classification-lowercase")})),[3,5];case 4:return $(!1),ye(!1),[7];case 5:return[2]}}))}))},isAddingTag:ae,isEditClassification:X}),ee&&v.createElement(J,{isClassification:!0,showMutuallyExclusive:!0,data:z,header:Se("label.adding-new-classification"),isEditing:!1,isLoading:we,isTier:Ve,visible:ee,onCancel:Ze,onSubmit:function(e){return(0,n.mG)(void 0,void 0,void 0,(function(){var t,i,a;return(0,n.Jh)(this,(function(n){switch(n.label){case 0:Ae(!0),n.label=1;case 1:return n.trys.push([1,4,5,6]),[4,(0,U.wA)(e)];case 2:return t=n.sent(),[4,Ie()];case 3:return n.sent(),F.push((0,D.bT)(t.fullyQualifiedName)),[3,6];case 4:return i=n.sent(),(null===(a=i.response)||void 0===a?void 0:a.status)===x.NL.CONFLICT?(0,O.Eo)(Se("server.entity-already-exist",{entity:Se("label.classification"),entityPlural:Se("label.classification-lowercase-plural"),name:e.name})):(0,O.Eo)(i,Se("server.create-entity-error",{entity:Se("label.classification-lowercase")})),[3,6];case 5:return te(!1),Ae(!1),[7];case 6:return[2]}}))}))}}),ae&&v.createElement(J,{header:qe,initialValues:se,isEditing:!(0,f.isUndefined)(se),isLoading:we,isSystemTag:(null==se?void 0:se.provider)===a.System,isTier:Ve,permissions:Ge,visible:ae,onCancel:Ze,onSubmit:function(e){var t=(0,f.omit)(e,"color","iconURL"),i={color:e.color,iconURL:e.iconURL};se?function(e){(0,n.mG)(void 0,void 0,void 0,(function(){var t,i,a,l;return(0,n.Jh)(this,(function(n){switch(n.label){case 0:if((0,f.isUndefined)(se))return[3,5];Ae(!0),t=(0,m.qu)(se,e),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,(0,U.dt)(null!==(a=se.id)&&void 0!==a?a:"",t)];case 2:return n.sent(),[3,5];case 3:return i=n.sent(),(null===(l=i.response)||void 0===l?void 0:l.status)===x.NL.CONFLICT?(0,O.Eo)(Se("server.entity-already-exist",{entity:Se("label.tag"),entityPlural:Se("label.tag-lowercase-plural"),name:e.name})):(0,O.Eo)(i,Se("server.entity-updating-error",{entity:Se("label.tag-lowercase")})),[3,5];case 4:return Ae(!1),Ze(),[7];case 5:return[2]}}))}))}((0,n.pi)((0,n.pi)((0,n.pi)({},se),t),{style:i})):function(e){(0,n.mG)(void 0,void 0,void 0,(function(){var t,i;return(0,n.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,3,4]),[4,(0,U.ln)((0,n.pi)((0,n.pi)({},e),{classification:null==W?void 0:W.fullyQualifiedName}))];case 1:return a.sent(),B((function(e){return e.map((function(e){var t;return e.fullyQualifiedName===(null==W?void 0:W.fullyQualifiedName)?(0,n.pi)((0,n.pi)({},e),{termCount:(null!==(t=e.termCount)&&void 0!==t?t:0)+1}):e}))})),[3,4];case 2:return t=a.sent(),(null===(i=t.response)||void 0===i?void 0:i.status)===x.NL.CONFLICT?(0,O.Eo)(Se("server.entity-already-exist",{entity:Se("label.tag"),entityPlural:Se("label.tag-lowercase-plural"),name:e.name})):(0,O.Eo)(t,Se("server.create-entity-error",{entity:Se("label.tag-lowercase")})),[3,4];case 3:return ne(!1),[7];case 4:return[2]}}))}))}((0,n.pi)((0,n.pi)({},t),{style:i}))}}),v.createElement(N.Z,{bodyText:(0,V.fP)(null!==(t=null===(e=ge.data)||void 0===e?void 0:e.name)&&void 0!==t?t:"",""),entityName:null!==(d=null===(i=ge.data)||void 0===i?void 0:i.name)&&void 0!==d?d:"",entityType:Se("label.classification"),loadingState:Le,visible:ge.state,onCancel:function(){return be({data:void 0,state:!1})},onConfirm:function(){var e,t;(null===(e=ge.data)||void 0===e?void 0:e.id)&&(Pe(L.Vu.WAITING),t=ge.data.id,(0,U.Pn)(t).then((function(e){e?W&&(Pe(L.Vu.SUCCESS),B((function(e){return e.map((function(e){var t;return e.fullyQualifiedName===W.fullyQualifiedName?(0,n.pi)((0,n.pi)({},e),{termCount:(null!==(t=e.termCount)&&void 0!==t?t:0)-1}):e}))}))):(0,O.Eo)(Se("server.delete-entity-error",{entity:Se("label.tag-lowercase")}))})).catch((function(e){(0,O.Eo)(e,Se("server.delete-entity-error",{entity:Se("label.tag-lowercase")}))})).finally((function(){be({data:void 0,state:!1}),Pe(L.Vu.INITIAL)})))}}))}}}]);