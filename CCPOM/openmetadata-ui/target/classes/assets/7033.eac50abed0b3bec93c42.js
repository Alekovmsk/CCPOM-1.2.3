"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[7033],{17033:function(e,a,t){t.r(a),t.d(a,{default:function(){return R}});var l=t(70655),r=t(67294),i=t(68432),s=t(15137),n=t(49101),o=t(49409),d=t(56256),c=t(71577),m=t(19650),u=t(50963),y=t(96486),p=t(16139),v=t(17309),b=t(24671),f=t(79690),E=t(95137),g=t(79686),h=t(26387),w=t(40773),N=t(37878),T=function(e){var a,t=e.header,s=e.allowAccess,T=void 0===s||s,x=e.isLoading,C=e.slashedBreadcrumb,S=e.onCancel,Z=e.onSave,L=(0,i.$)().t,U=(0,l.CR)((0,u.useForm)(),1)[0],I=(0,E.Eu)().currentUser,k=o.Z.useWatch("owner",U),A=null!==(a=o.Z.useWatch("reviewers",U))&&void 0!==a?a:[],P=r.createElement("div",{"data-testid":"right-panel"},r.createElement(d.Z.Title,{level:5},L("label.configure-entity",{entity:L("label.glossary")})),r.createElement(d.Z.Text,{className:"mb-5"},L("message.create-new-glossary-guide"))),R=[{name:"name",id:"root/name",label:L("label.name"),required:!0,placeholder:L("label.name"),type:v.U.TEXT,props:{"data-testid":"name"},rules:[{pattern:p.$Q,message:L("message.entity-name-validation")},{min:1,max:128,message:""+L("message.entity-maximum-size",{entity:""+L("label.name"),max:"128"})}]},{name:"displayName",id:"root/displayName",label:L("label.display-name"),required:!1,placeholder:L("label.display-name"),type:v.U.TEXT,props:{"data-testid":"display-name"}},{name:"description",required:!0,label:L("label.description"),id:"root/description",type:v.U.DESCRIPTION,props:{"data-testid":"description",className:"glossary-richtext-editor",initialValue:"",height:"auto",readonly:!T}},{name:"tags",required:!1,label:L("label.tag-plural"),id:"root/tags",type:v.U.TAG_SUGGESTION,props:{"data-testid":"tags-container"}},{name:"mutuallyExclusive",label:L("label.mutually-exclusive"),type:v.U.SWITCH,required:!1,props:{"data-testid":"mutually-exclusive-button"},id:"root/mutuallyExclusive",formItemLayout:v.E.HORIZONATAL}],z={name:"owner",id:"root/owner",required:!1,label:L("label.owner"),type:v.U.USER_TEAM_SELECT,props:{hasPermission:!0,children:r.createElement(c.Z,{"data-testid":"add-owner",icon:r.createElement(n.Z,{style:{color:"white",fontSize:"12px"}}),size:"small",type:"primary"})},formItemLayout:v.E.HORIZONATAL,formItemProps:{valuePropName:"owner",trigger:"onUpdate"}},O={name:"reviewers",id:"root/reviewers",required:!1,label:L("label.reviewer-plural"),type:v.U.USER_MULTI_SELECT,props:{hasPermission:!0,popoverProps:{placement:"topLeft"},children:r.createElement(c.Z,{"data-testid":"add-reviewers",icon:r.createElement(n.Z,{style:{color:"white",fontSize:"12px"}}),size:"small",type:"primary"})},formItemLayout:v.E.HORIZONATAL,formItemProps:{valuePropName:"selectedUsers",trigger:"onUpdate",initialValue:[]}};return r.createElement(g.Z,{firstPanel:{children:r.createElement("div",{className:"max-width-md w-9/10 service-form-container"},r.createElement(h.Z,{titleLinks:C}),r.createElement(d.Z.Title,{className:"m-t-md","data-testid":"form-heading",level:5},t),r.createElement("div",{className:"add-glossary","data-testid":"add-glossary"},r.createElement(o.Z,{form:U,layout:"vertical",onFinish:function(e){var a=e.name,t=e.displayName,l=e.description,r=e.tags,i=e.mutuallyExclusive,s=e.reviewers,n=void 0===s?[]:s,o=e.owner,d=null!=o?o:{id:null==I?void 0:I.id,type:"user"},c={name:a.trim(),displayName:null==t?void 0:t.trim(),description:l,reviewers:n.map((function(e){return(0,y.toString)(e.fullyQualifiedName)})).filter(Boolean),owner:d,tags:r||[],mutuallyExclusive:Boolean(i)};Z(c)}},(0,f.GL)(R),r.createElement("div",{className:"m-t-xss"},(0,f.rz)(z),k&&r.createElement("div",{className:"m-y-xs","data-testid":"owner-container"},r.createElement(w.w,{id:k.id,name:(0,b.C_)(k),size:N.e.small}))),r.createElement("div",{className:"m-t-xss"},(0,f.rz)(O),Boolean(A.length)&&r.createElement(m.Z,{wrap:!0,className:"m-y-xs","data-testid":"reviewers-container",size:[8,8]},A.map((function(e,a){return r.createElement(w.w,{id:e.id,key:a,name:(0,b.C_)(e),size:N.e.small})})))),r.createElement(m.Z,{className:"w-full justify-end","data-testid":"cta-buttons",size:16},r.createElement(c.Z,{"data-testid":"cancel-glossary",type:"link",onClick:S},L("label.cancel")),r.createElement(c.Z,{"data-testid":"save-glossary",disabled:!T,htmlType:"submit",loading:x,type:"primary"},L("label.save")))))),minWidth:700,flex:.7},pageTitle:L("label.add-entity",{entity:L("label.glossary")}),secondPanel:{children:P,className:"p-md service-doc-panel",minWidth:60,overlay:{displayThreshold:200,header:L("label.setup-guide"),rotation:"counter-clockwise"}}})},x=t(8752),C=t(79839),S=t(62761),Z=t(72819),L=t(1222),U=t(93895),I=t(39570),k=t(96840),A=t(73553),P=t(46321),R=function(){var e=(0,s.k6)(),a=(0,x.BL)().permissions,t=(0,l.CR)((0,r.useState)([]),2),n=t[0],o=t[1],d=(0,l.CR)((0,r.useState)(!1),2),c=d[0],m=d[1],u=(0,l.CR)((0,r.useState)(!1),2),y=u[0],p=u[1],v=(0,l.CR)((0,r.useState)([]),2),b=v[0],f=v[1],E=(0,i.$)().t,g=(0,r.useMemo)((function(){return(0,I.P_)(Z.OX.Create,C.A.GLOSSARY,a)}),[a]),h=function(a){void 0===a&&(a=""),e.push((0,k.$x)(a))},w=(0,r.useCallback)((function(){h()}),[]),N=(0,r.useCallback)((function(e){return(0,l.mG)(void 0,void 0,void 0,(function(){var a,t,r;return(0,l.Jh)(this,(function(l){switch(l.label){case 0:p(!0),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,(0,L.Cn)(e)];case 2:return a=l.sent(),h(null!==(r=a.fullyQualifiedName)&&void 0!==r?r:""),[3,5];case 3:return t=l.sent(),i=(0,U.B)(t,S.c9.alreadyExist)?E("server.entity-already-exist",{entity:E("label.glossary"),entityPlural:E("label.glossary-lowercase-plural"),name:e.name}):t,s=E("server.add-entity-error",{entity:E("label.glossary-lowercase")}),(0,P.Eo)(i,s),[3,5];case 4:return p(!1),[7];case 5:return[2]}var i,s}))}))}),[]);return(0,r.useEffect)((function(){f([{name:E("label.glossary"),url:(0,k.$x)()},{name:E("label.add-entity",{entity:E("label.glossary")}),url:"",activeTitle:!0}])}),[]),r.createElement("div",{className:"self-center"},r.createElement(T,{allowAccess:g,fetchTags:function(){m(!0),(0,A.bn)().then((function(e){return(0,l.mG)(void 0,void 0,void 0,(function(){var a;return(0,l.Jh)(this,(function(t){switch(t.label){case 0:return e.data?[4,(0,A.bM)(e.data)]:[3,2];case 1:return a=t.sent(),o(a),[3,3];case 2:(0,P.Eo)(E("server.entity-fetch-error",{entity:E("label.tag-plural")})),t.label=3;case 3:return[2]}}))}))})).catch((function(e){(0,P.Eo)(e,E("server.entity-fetch-error",{entity:E("label.tag-plural")}))})).finally((function(){m(!1)}))},header:E("label.add-entity",{entity:E("label.glossary")}),isLoading:y,isTagLoading:c,slashedBreadcrumb:b,tagList:n,onCancel:w,onSave:N}))}}}]);