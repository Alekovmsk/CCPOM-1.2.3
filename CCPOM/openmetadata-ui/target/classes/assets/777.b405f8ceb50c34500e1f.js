"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[777],{5869:function(e,t,n){var r=n(8081),a=n.n(r),i=n(23645),l=n.n(i)()(a());l.push([e.id,'/*\n *  Copyright 2022 Collate.\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.feature-source-info {\n  border-top: 1px solid rgba(220, 227, 236);\n  padding-top: 16px;\n}\n',""]),t.Z=l},3460:function(e,t,n){n.d(t,{w:function(){return l}});var r=n(70655),a=n(67294),i=n(33994),l=function(e){return function(t){return a.createElement(i.ZP,null,a.createElement(e,(0,r.pi)({},t)))}}},38891:function(e,t,n){n.d(t,{Z:function(){return A}});var r=n(70655),a=n(57254),i=n(8812),l=n(19650),s=n(56256),o=n(71230),u=n(15746),c=n(67294),d=n(68432),m=n(76),p=n(64632),f=n(38333),E=n(93379),v=n.n(E),y=n(7795),h=n.n(y),g=n(90569),b=n.n(g),Z=n(3565),T=n.n(Z),M=n(19216),w=n.n(M),x=n(44589),L=n.n(x),S=n(5869),N={};N.styleTagTransform=L(),N.setAttributes=T(),N.insert=b().bind(null,"head"),N.domAPI=h(),N.insertStyleElement=w(),v()(S.Z,N),S.Z&&S.Z.locals&&S.Z.locals;var A=function(e){var t,n=e.feature,E=(0,d.$)().t,v=(0,r.CR)((0,c.useState)(!1),2),y=v[0],h=v[1],g=(0,c.useMemo)((function(){return n.featureSources&&n.featureSources.length&&y}),[n,y]);return c.createElement("div",{className:"m-t-sm"},c.createElement(l.Z,{className:"m-b-xs"},c.createElement("span",{onClick:function(){return h((function(e){return!e}))}},y?c.createElement(a.Z,{className:"text-xs text-primary cursor-pointer"}):c.createElement(i.Z,{className:"text-xs text-primary cursor-pointer"})),c.createElement(s.Z.Text,{className:"font-medium m-y-0"},E("label.source-plural"))),g&&(null===(t=n.featureSources)||void 0===t?void 0:t.map((function(e,t){var n,r,a;return c.createElement(o.Z,{className:"feature-source-info",key:""+e.fullyQualifiedName+t,wrap:!1},c.createElement(u.Z,{span:1},String(t+1).padStart(2,"0")),c.createElement(u.Z,{span:6},c.createElement(s.Z.Text,{className:"text-grey-muted"},E("label.name")+":"),c.createElement(s.Z.Text,{className:"m-l-xs"},e.name)),c.createElement(u.Z,{span:6},c.createElement(s.Z.Text,{className:"text-grey-muted"},E("label.type")+":"),c.createElement(s.Z.Text,{className:"m-l-xs"},e.dataType)),c.createElement(u.Z,{span:11},c.createElement(o.Z,null,c.createElement(u.Z,{flex:"100px"},c.createElement(s.Z.Text,{className:"text-grey-muted"},E("label.data-entity",{entity:E("label.source")})+":")),c.createElement(u.Z,{flex:"auto"},c.createElement(m.Link,{to:(0,f.Ch)(p.py.TABLE,(null===(n=e.dataSource)||void 0===n?void 0:n.fullyQualifiedName)||(null===(r=e.dataSource)||void 0===r?void 0:r.name)||"")},null===(a=e.dataSource)||void 0===a?void 0:a.fullyQualifiedName)))))}))))}},10777:function(e,t,n){n.r(t),n.d(t,{default:function(){return re}});var r=n(70655),a=n(34901),i=n(96486),l=n(67294),s=n(68432),o=n(15137),u=n(95137),c=n(83716),d=n(69523),m=n(56256),p=n(25213),f=n(71230),E=n(15746),v=n(19650),y=n(25499),h=n(33994),g=n(75642),b=n(3460),Z=n(113),T=n(9600),M=n(16177),w=n(80646),x=n(67167),L=n(71406),S=n(1727),N=n(62761),A=n(64632),C=n(31615),D=n(36775),F=n(42395),k=n(93895),R=n(24671),U=n(31982),O=n(39570),G=n(40734),P=n(38333),I=n(73553),J=n(46321),_=n(19521),V=n(76597),H=n(33873),q=n(8752),B=n(79839),Q=n(27049),Y=n(91894),$=n(61289),K=n(55608),W=n(59136),z=n(38891),X=function(e){var t=e.mlFeatures,n=e.handleFeaturesUpdate,a=e.permissions,o=e.isDeleted,u=e.entityFqn,d=e.onThreadLinkSelect,p=(0,s.$)().t,y=(0,r.CR)((0,l.useState)({}),2),h=y[0],g=y[1],b=(0,r.CR)((0,l.useState)(!1),2),Z=b[0],T=b[1],M=(0,l.useMemo)((function(){return a.EditTags||a.EditAll}),[a]),w=function(){g({}),T(!1)},x=function(e,a){return(0,r.mG)(void 0,void 0,void 0,(function(){var i,l;return(0,r.Jh)(this,(function(s){switch(s.label){case 0:return(i=(0,I.eY)(e))&&a?(l=null==t?void 0:t.map((function(e){return e.name===(null==a?void 0:a.name)?(0,r.pi)((0,r.pi)({},a),{tags:i}):e})),[4,n(l)]):[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}}))}))};return(0,i.isEmpty)(t)?l.createElement(c.Z,null):l.createElement(l.Fragment,null,l.createElement(f.Z,{"data-testid":"feature-list"},l.createElement(E.Z,{span:24},l.createElement(Q.Z,{className:"m-y-md"})),l.createElement(E.Z,{span:24},l.createElement(m.Z.Title,{level:5},p("label.feature-plural-used"))),null==t?void 0:t.map((function(e,t){var n,r,i,s;return l.createElement(E.Z,{key:e.fullyQualifiedName,span:24},l.createElement(Y.Z,{className:"m-b-lg shadow-none","data-testid":"feature-card-"+(null!==(n=e.name)&&void 0!==n?n:""),key:e.fullyQualifiedName},l.createElement(f.Z,{gutter:[0,8]},l.createElement(E.Z,{span:24},l.createElement(m.Z.Text,{className:"font-semibold"},e.name)),l.createElement(E.Z,{span:24},l.createElement(v.Z,{align:"start"},l.createElement(v.Z,null,l.createElement(m.Z.Text,{className:"text-grey-muted"},p("label.type")+" :")," ",l.createElement(m.Z.Text,null,e.dataType||"--")),l.createElement(Q.Z,{className:"border-gray",type:"vertical"}),l.createElement(v.Z,null,l.createElement(m.Z.Text,{className:"text-grey-muted"},p("label.algorithm")+" :")," ",l.createElement(m.Z.Text,null,e.featureAlgorithm||"--")))),l.createElement(E.Z,{span:24},l.createElement(f.Z,{gutter:8,wrap:!1},l.createElement(E.Z,{flex:"130px"},l.createElement(m.Z.Text,{className:"text-grey-muted"},p("label.glossary-term-plural")+" :")),l.createElement(E.Z,{flex:"auto"},l.createElement(K.Z,{entityFqn:u,entityType:A.py.MLMODEL,handleTagSelection:x,hasTagEditAccess:M,index:t,isReadOnly:o,record:e,tags:null!==(r=e.tags)&&void 0!==r?r:[],type:D.c6.Glossary,onThreadLinkSelect:d})))),l.createElement(E.Z,{span:24},l.createElement(f.Z,{gutter:8,wrap:!1},l.createElement(E.Z,{flex:"130px"},l.createElement(m.Z.Text,{className:"text-grey-muted"},p("label.tag-plural")+" :")),l.createElement(E.Z,{flex:"auto"},l.createElement(K.Z,{entityFqn:u,entityType:A.py.MLMODEL,handleTagSelection:x,hasTagEditAccess:M,index:t,isReadOnly:o,record:e,tags:null!==(i=e.tags)&&void 0!==i?i:[],type:D.c6.Classification,onThreadLinkSelect:d})))),l.createElement(E.Z,{className:"m-t-xs",span:24},l.createElement(f.Z,{gutter:8,wrap:!1},l.createElement(E.Z,{flex:"130px"},l.createElement(m.Z.Text,{className:"text-grey-muted"},p("label.description")+" :")),l.createElement(E.Z,{flex:"auto"},l.createElement($.Z,{columnData:{fqn:null!==(s=e.fullyQualifiedName)&&void 0!==s?s:"",field:e.description},entityFqn:u,entityType:A.py.MLMODEL,hasEditPermission:a.EditAll||a.EditDescription,index:t,isReadOnly:o,onClick:function(){g(e),T(!0)},onThreadLinkSelect:d})))),l.createElement(E.Z,{span:24},l.createElement(z.Z,{feature:e})))))}))),!(0,i.isEmpty)(h)&&l.createElement(W.p,{header:p("label.edit-entity-name",{entityType:p("label.feature"),entityName:(0,R.C_)(h)}),placeholder:p("label.enter-field-description",{field:p("label.feature-lowercase")}),value:h.description,visible:Z,onCancel:w,onSave:function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var a;return(0,r.Jh)(this,(function(l){switch(l.label){case 0:return(0,i.isEmpty)(h)||!Z?[3,2]:(a=null==t?void 0:t.map((function(t){return t.name===h.name?(0,r.pi)((0,r.pi)({},h),{description:e}):t})),[4,n(a)]);case 1:l.sent(),w(),l.label=2;case 2:return[2]}}))}))}}))},j=(0,b.w)((function(e){var t=e.updateMlModelDetailsState,n=e.mlModelDetail,a=e.fetchMlModel,c=e.followMlModelHandler,d=e.unFollowMlModelHandler,b=e.descriptionUpdateHandler,Q=e.settingsUpdateHandler,Y=e.updateMlModelFeatures,$=e.onExtensionUpdate,K=e.createThread,W=e.onUpdateVote,z=e.versionHandler,j=e.tagUpdateHandler,ee=e.handleToggleDelete,te=(0,s.$)().t,ne=(0,u.Eu)().currentUser,re=(0,o.k6)(),ae=(0,h.$J)(),ie=ae.postFeed,le=ae.deleteFeed,se=ae.updateFeed,oe=(0,o.UO)(),ue=oe.fqn,ce=oe.tab,de=(0,r.CR)((0,l.useState)(!1),2),me=de[0],pe=de[1],fe=(0,r.CR)((0,l.useState)(0),2),Ee=fe[0],ve=fe[1],ye=(0,r.CR)((0,l.useState)(O.Bd),2),he=ye[0],ge=ye[1],be=(0,r.CR)((0,l.useState)(C.Th.Conversation),2),Ze=be[0],Te=be[1],Me=(0,r.CR)((0,l.useState)(""),2),we=Me[0],xe=Me[1],Le=(0,q.BL)().getEntityPermission,Se=(0,l.useMemo)((function(){return(0,G.p2)(ue)}),[ue]),Ne=(0,l.useMemo)((function(){return(0,R.C_)(n)}),[n]),Ae=(0,l.useCallback)((function(){return(0,r.mG)(void 0,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Le(B.A.ML_MODEL,n.id)];case 1:return e=t.sent(),ge(e),[3,3];case 2:return t.sent(),(0,J.Eo)(te("server.fetch-entity-permissions-error",{entity:te("label.ml-model")})),[3,3];case 3:return[2]}}))}))}),[n.id,Le,ge]);(0,l.useEffect)((function(){n.id&&Ae()}),[n.id]);var Ce=(0,l.useMemo)((function(){var e,t,a;return(0,r.pi)((0,r.pi)({},n),{tier:(0,P.Zk)(null!==(e=n.tags)&&void 0!==e?e:[]),mlModelTags:(0,P.nD)(null!==(t=n.tags)&&void 0!==t?t:[]),entityName:Ne,isFollowing:null===(a=n.followers)||void 0===a?void 0:a.some((function(e){return e.id===(null==ne?void 0:ne.id)}))})}),[n,Ne]),De=Ce.mlModelTags,Fe=Ce.isFollowing,ke=Ce.tier,Re=Ce.deleted,Ue=function(){(0,k.Aq)(A.py.MLMODEL,Se,ve)};(0,l.useEffect)((function(){(he.ViewAll||he.ViewBasic)&&Ue()}),[he,Se]);var Oe=function(){return pe(!0)},Ge=function(){return pe(!1)},Pe=function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(a){switch(a.label){case 0:return n.description===e?[3,2]:(t=(0,r.pi)((0,r.pi)({},n),{description:e}),[4,b(t)]);case 1:return a.sent(),pe(!1),[3,3];case 2:pe(!1),a.label=3;case 3:return[2]}}))}))},Ie=(0,l.useCallback)((function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(a){switch(a.label){case 0:return t=(0,r.pi)((0,r.pi)({},n),{owner:e?(0,r.pi)((0,r.pi)({},n.owner),e):void 0}),[4,Q(t)];case 1:return a.sent(),[2]}}))}))}),[n,n.owner]),Je=function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return[4,Y((0,r.pi)((0,r.pi)({},n),{mlFeatures:e}))];case 1:return t.sent(),[2]}}))}))},_e=function(e,t){xe(e),t&&Te(t)},Ve=(0,l.useMemo)((function(){return[{title:te("label.name"),dataIndex:"name",key:"name"},{title:te("label.value"),dataIndex:"value",key:"value"}]}),[]),He=(0,l.useMemo)((function(){return[{title:te("label.storage"),dataIndex:"storage",key:"storage",render:function(e){return l.createElement("a",{href:e,rel:"noreferrer",target:"_blank"},e)}},{title:te("label.image-repository"),dataIndex:"imageRepository",key:"imageRepository",render:function(e){return l.createElement("a",{href:e,rel:"noreferrer",target:"_blank"},e)}}]}),[]),qe=(0,l.useMemo)((function(){return l.createElement(l.Fragment,null,l.createElement(m.Z.Title,{level:5},te("label.hyper-parameter-plural")," "),(0,i.isEmpty)(n.mlHyperParameters)?(0,k.o3)():l.createElement(p.Z,{bordered:!0,columns:Ve,"data-testid":"hyperparameters-table",dataSource:n.mlHyperParameters,pagination:!1,rowKey:"name",size:"small"}))}),[n,Ve]),Be=(0,l.useMemo)((function(){return l.createElement(l.Fragment,null,l.createElement(m.Z.Title,{level:5},te("label.model-store")),n.mlStore?l.createElement(p.Z,{bordered:!0,columns:He,"data-testid":"model-store-table",dataSource:[n.mlStore],id:"model-store-table",pagination:!1,rowKey:"name",size:"small"}):(0,k.o3)())}),[n,He]),Qe=function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t,a;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return(0,I.eY)(e)&&n?(t=(0,r.ev)((0,r.ev)([],(0,r.CR)(ke?[ke]:[])),(0,r.CR)(e)),a=(0,r.pi)((0,r.pi)({},n),{tags:t}),[4,j(a)]):[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},Ye=(0,l.useCallback)((function(e,t){return e?ee(t):re.push("/")}),[]),$e=(0,l.useMemo)((function(){return{editTagsPermission:(he.EditTags||he.EditAll)&&!Re,editDescriptionPermission:(he.EditDescription||he.EditAll)&&!Re,editCustomAttributePermission:(he.EditAll||he.EditCustomFields)&&!Re,editLineagePermission:(he.EditAll||he.EditLineage)&&!Re,viewAllPermission:he.ViewAll}}),[he,Re]),Ke=$e.editTagsPermission,We=$e.editDescriptionPermission,ze=$e.editCustomAttributePermission,Xe=$e.editLineagePermission,je=$e.viewAllPermission,et=(0,l.useMemo)((function(){var e,t;return[{name:te("label.feature-plural"),label:l.createElement(x.Z,{id:A.M8.FEATURES,name:te("label.feature-plural")}),key:A.M8.FEATURES,children:l.createElement(f.Z,{gutter:[0,16],wrap:!1},l.createElement(E.Z,{className:"p-t-sm m-x-lg",flex:"auto"},l.createElement("div",{className:"d-flex flex-col gap-4"},l.createElement(Z.Z,{description:n.description,entityFqn:Se,entityName:Ne,entityType:A.py.MLMODEL,hasEditAccess:We,isEdit:me,owner:n.owner,showActions:!Re,onCancel:Ge,onDescriptionEdit:Oe,onDescriptionUpdate:Pe,onThreadLinkSelect:_e}),l.createElement(X,{entityFqn:Se,handleFeaturesUpdate:Je,isDeleted:n.deleted,mlFeatures:n.mlFeatures,permissions:he,onThreadLinkSelect:_e}))),l.createElement(E.Z,{className:"entity-tag-right-panel-container","data-testid":"entity-right-panel",flex:"320px"},l.createElement(v.Z,{className:"w-full",direction:"vertical",size:"large"},l.createElement(H.Z,{activeDomain:null==n?void 0:n.domain,dataProducts:null!==(e=null==n?void 0:n.dataProducts)&&void 0!==e?e:[],hasPermission:!1}),l.createElement(L.Z,{displayType:S.F.READ_MORE,entityFqn:Se,entityType:A.py.MLMODEL,permission:Ke,selectedTags:De,tagType:D.c6.Classification,onSelectionChange:Qe,onThreadLinkSelect:_e}),l.createElement(L.Z,{displayType:S.F.READ_MORE,entityFqn:Se,entityType:A.py.MLMODEL,permission:Ke,selectedTags:De,tagType:D.c6.Glossary,onSelectionChange:Qe,onThreadLinkSelect:_e}))))},{label:l.createElement(x.Z,{count:Ee,id:A.M8.ACTIVITY_FEED,isActive:ce===A.M8.ACTIVITY_FEED,name:te("label.activity-feed-and-task-plural")}),key:A.M8.ACTIVITY_FEED,children:l.createElement(g.K,{entityType:A.py.MLMODEL,fqn:null!==(t=null==n?void 0:n.fullyQualifiedName)&&void 0!==t?t:"",onFeedUpdate:Ue,onUpdateEntityDetails:a})},{label:l.createElement(x.Z,{id:A.M8.DETAILS,name:te("label.detail-plural")}),key:A.M8.DETAILS,children:l.createElement(f.Z,{className:"p-md",gutter:[16,16]},l.createElement(E.Z,{span:12},qe),l.createElement(E.Z,{span:12},Be))},{label:l.createElement(x.Z,{id:A.M8.LINEAGE,name:te("label.lineage")}),key:A.M8.LINEAGE,children:l.createElement(M.Z,{deleted:Re,entity:n,entityType:A.py.MLMODEL,hasEditAccess:Xe})},{label:l.createElement(x.Z,{id:A.M8.CUSTOM_PROPERTIES,name:te("label.custom-property-plural")}),key:A.M8.CUSTOM_PROPERTIES,children:l.createElement(V.t,{entityType:A.py.MLMODEL,handleExtensionUpdate:$,hasEditAccess:ze,hasPermission:je})}]}),[Ee,ce,n,Ne,he,me,qe,Be,Ge,$,Je,_e,Pe,Oe,U.S$,Re,Ke,We,ze,Xe,je]);return l.createElement(w.Z,{className:"bg-white",pageTitle:te("label.entity-detail-plural",{entity:te("label.ml-model")})},l.createElement(f.Z,{gutter:[0,12]},l.createElement(E.Z,{className:"p-x-lg",span:24},l.createElement(T.U$,{isRecursiveDelete:!0,afterDeleteAction:Ye,afterDomainUpdateAction:t,dataAsset:n,entityType:A.py.MLMODEL,permissions:he,onDisplayNameUpdate:function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(a){switch(a.label){case 0:return t=(0,r.pi)((0,r.pi)({},n),{displayName:e.displayName}),[4,Q(t)];case 1:return a.sent(),[2]}}))}))},onFollowClick:function(){return(0,r.mG)(void 0,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return Fe?[4,d()]:[3,2];case 1:return e.sent(),[3,4];case 2:return[4,c()];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))},onOwnerUpdate:Ie,onRestoreDataAsset:function(){return(0,r.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,F.hl)(n.id)];case 1:return e=r.sent().version,(0,J.XA)(te("message.restore-entities-success",{entity:te("label.ml-model")}),2e3),ee(e),[3,3];case 2:return t=r.sent(),(0,J.Eo)(t,te("message.restore-entities-error",{entity:te("label.ml-model")})),[3,3];case 3:return[2]}}))}))},onTierUpdate:function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t,a,i;return(0,r.Jh)(this,(function(l){switch(l.label){case 0:return t=(0,I.Jf)(null!==(i=null==n?void 0:n.tags)&&void 0!==i?i:[],e),a=(0,r.pi)((0,r.pi)({},n),{tags:t}),[4,Q(a)];case 1:return l.sent(),[2]}}))}))},onUpdateVote:W,onVersionClick:z})),l.createElement(E.Z,{span:24},l.createElement(y.Z,{activeKey:null!=ce?ce:A.M8.FEATURES,className:"entity-details-page-tabs","data-testid":"tabs",items:et,onChange:function(e){e!==ce&&re.push((0,N.xL)(Se,e))}}))),we?l.createElement(_.Z,{createThread:K,deletePostHandler:le,open:Boolean(we),postFeedHandler:ie,threadLink:we,threadType:Ze,updateThreadHandler:se,onCancel:function(){xe("")}}):null)})),ee=n(61105),te=n(76373),ne=n(51737),re=function(){var e,t=(0,s.$)().t,n=(0,u.Eu)().currentUser,m=(0,o.k6)(),p=(0,o.UO)().fqn,f=(0,r.CR)((0,l.useState)({}),2),E=f[0],v=f[1],y=(0,r.CR)((0,l.useState)(!1),2),h=y[0],g=y[1],b=null!==(e=null==n?void 0:n.id)&&void 0!==e?e:"",Z=(0,r.CR)((0,l.useState)(O.Bd),2),T=Z[0],M=Z[1],w=(0,q.BL)().getEntityPermissionByFqn,x=(0,l.useMemo)((function(){return T.ViewAll||T.ViewUsage}),[T]),L=function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t,n,a,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:g(!0),r.label=1;case 1:return r.trys.push([1,3,4,5]),t=ne.h,x&&(t+=","+A.GB.USAGE_SUMMARY),[4,(0,F.Lg)(e,t)];case 2:return n=r.sent(),v(n),(0,k.nk)({displayName:(0,R.C_)(n),entityType:A.py.MLMODEL,fqn:null!==(i=n.fullyQualifiedName)&&void 0!==i?i:"",serviceType:n.serviceType,timestamp:0,id:n.id}),[3,5];case 3:return a=r.sent(),(0,J.Eo)(a),[3,5];case 4:return g(!1),[7];case 5:return[2]}}))}))};(0,l.useEffect)((function(){(T.ViewAll||T.ViewBasic)&&L(p)}),[T,p]);var S=function(e){var t=(0,a.qu)((0,i.omitBy)(E,i.isUndefined),e);return(0,F.JX)(E.id,t)},C=(0,l.useCallback)((function(e){var t=e;v((function(e){return(0,r.pi)((0,r.pi)({},null!=e?e:t),{version:t.version})}))}),[]);return(0,l.useEffect)((function(){var e;e=p,(0,r.mG)(void 0,void 0,void 0,(function(){var n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:g(!0),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,w(B.A.ML_MODEL,e)];case 2:return n=r.sent(),M(n),[3,5];case 3:return r.sent(),(0,J.Eo)(t("server.fetch-entity-permissions-error",{entity:e})),[3,5];case 4:return g(!1),[7];case 5:return[2]}}))}))}),[p]),h?l.createElement(d.Z,null):(0,i.isNil)(E)||(0,i.isEmpty)(E)?l.createElement(c.Z,{className:"mt-0-important"},(0,k.mW)("mlModel",p)):T.ViewAll||T.ViewBasic?l.createElement(j,{createThread:function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,te.Kl)(e)];case 1:return r.sent(),[3,3];case 2:return n=r.sent(),(0,J.Eo)(n,t("server.create-entity-error",{entity:t("label.conversation")})),[3,3];case 3:return[2]}}))}))},descriptionUpdateHandler:function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t,n,a,i;return(0,r.Jh)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,S(e)];case 1:return t=l.sent(),n=t.description,a=t.version,v((function(e){return(0,r.pi)((0,r.pi)({},e),{description:n,version:a})})),[3,3];case 2:return i=l.sent(),(0,J.Eo)(i),[3,3];case 3:return[2]}}))}))},fetchMlModel:function(){return L(p)},followMlModelHandler:function(){return(0,r.mG)(void 0,void 0,void 0,(function(){var e,n,a;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,(0,F.vs)(E.id,b)];case 1:return e=i.sent(),n=e.changeDescription.fieldsAdded[0].newValue,v((function(e){return(0,r.pi)((0,r.pi)({},e),{followers:(0,r.ev)((0,r.ev)([],(0,r.CR)(E.followers||[])),(0,r.CR)(n))})})),[3,3];case 2:return a=i.sent(),(0,J.Eo)(a,t("server.entity-follow-error",{entity:(0,R.C_)(E)})),[3,3];case 3:return[2]}}))}))},handleToggleDelete:function(e){v((function(t){return t?(0,r.pi)((0,r.pi)((0,r.pi)({},t),{deleted:!(null==t?void 0:t.deleted)}),e?{version:e}:{}):t}))},mlModelDetail:E,settingsUpdateHandler:function(e){return(0,r.mG)(void 0,void 0,Promise,(function(){var n,a,i,l,s,o;return(0,r.Jh)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,S(e)];case 1:return n=u.sent(),a=n.displayName,i=n.owner,l=n.tags,s=n.version,v((function(e){return(0,r.pi)((0,r.pi)({},e),{displayName:a,owner:i,tags:l,version:s})})),[3,3];case 2:return o=u.sent(),(0,J.Eo)(o,t("server.entity-updating-error",{entity:(0,R.C_)(E)})),[3,3];case 3:return[2]}}))}))},tagUpdateHandler:function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var n,a,i,l;return(0,r.Jh)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,S(e)];case 1:return n=s.sent(),a=n.tags,i=n.version,v((function(e){return(0,r.pi)((0,r.pi)({},e),{tags:(0,k.ch)(null!=a?a:[]),version:i})})),[3,3];case 2:return l=s.sent(),(0,J.Eo)(l,t("server.entity-updating-error",{entity:t("label.tag-plural")})),[3,3];case 3:return[2]}}))}))},unFollowMlModelHandler:function(){return(0,r.mG)(void 0,void 0,void 0,(function(){var e,n,a;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,(0,F.mM)(E.id,b)];case 1:return e=i.sent(),n=e.changeDescription.fieldsDeleted[0].oldValue,v((function(e){var t;return(0,r.pi)((0,r.pi)({},e),{followers:(null!==(t=E.followers)&&void 0!==t?t:[]).filter((function(e){return e.id!==n[0].id}))})})),[3,3];case 2:return a=i.sent(),(0,J.Eo)(a,t("server.entity-unfollow-error",{entity:(0,R.C_)(E)})),[3,3];case 3:return[2]}}))}))},updateMlModelDetailsState:C,updateMlModelFeatures:function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t,n,a,i;return(0,r.Jh)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,S(e)];case 1:return t=l.sent(),n=t.mlFeatures,a=t.version,v((function(e){return(0,r.pi)((0,r.pi)({},e),{mlFeatures:n,version:a})})),[3,3];case 2:return i=l.sent(),(0,J.Eo)(i),[3,3];case 3:return[2]}}))}))},versionHandler:function(){m.push((0,N.h4)(A.py.MLMODEL,p,(0,i.toString)(E.version)))},onExtensionUpdate:function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var n,a;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,S(e)];case 1:return n=r.sent(),v(n),[3,3];case 2:return a=r.sent(),(0,J.Eo)(a,t("server.entity-updating-error",{entity:(0,R.C_)(E)})),[3,3];case 3:return[2]}}))}))},onUpdateVote:function(e,t){return(0,r.mG)(void 0,void 0,void 0,(function(){var n,a;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,(0,F.FO)(t,e)];case 1:return r.sent(),[4,(0,F.Lg)(p,ne.h)];case 2:return n=r.sent(),v(n),[3,4];case 3:return a=r.sent(),(0,J.Eo)(a),[3,4];case 4:return[2]}}))}))}}):l.createElement(c.Z,{type:ee.Wx.PERMISSION})}}}]);