"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[8413,7369],{37369:function(e,t,n){n.r(t),n.d(t,{ReactComponent:function(){return l}});var a,r=n(67294);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i.apply(this,arguments)}var l=function(e){return r.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",role:"img"},e),a||(a=r.createElement("path",{fill:"#37352F",stroke:"#37352F",strokeWidth:.3,d:"M14.25 2.37H1.75C1.06 2.37.5 2.93.5 3.62v8.75c0 .69.56 1.25 1.25 1.25h12.5c.69 0 1.25-.56 1.25-1.25V3.62c0-.69-.56-1.25-1.25-1.25Zm-12.5.625h12.5c.046 0 .087.017.13.026-1.082.99-4.67 4.274-5.926 5.405A.693.693 0 0 1 8 8.62a.693.693 0 0 1-.454-.194A1690.527 1690.527 0 0 1 1.62 3.02c.043-.009.084-.026.13-.026Zm-.625 9.375V3.62c0-.061.018-.117.035-.173.828.758 3.332 3.049 4.956 4.525-1.619 1.39-4.123 3.765-4.958 4.561-.015-.053-.033-.105-.033-.163Zm13.125.625H1.75c-.05 0-.094-.017-.14-.028.862-.823 3.382-3.21 4.972-4.571l.546.494c.257.232.559.355.872.355.313 0 .615-.123.872-.355.15-.134.339-.306.546-.494 1.59 1.36 4.11 3.748 4.973 4.57-.047.012-.091.03-.141.03Zm.625-.625c0 .058-.018.11-.033.163-.835-.796-3.34-3.17-4.958-4.56a2498.25 2498.25 0 0 0 4.956-4.526c.017.056.035.112.035.173v8.75Z"})))};t.default="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzM3MzUyRiIgc3Ryb2tlPSIjMzczNTJGIiBzdHJva2Utd2lkdGg9Ii4zIiBkPSJNMTQuMjUgMi4zN0gxLjc1QzEuMDYgMi4zNy41IDIuOTMuNSAzLjYydjguNzVjMCAuNjkuNTYgMS4yNSAxLjI1IDEuMjVoMTIuNWMuNjkgMCAxLjI1LS41NiAxLjI1LTEuMjVWMy42MmMwLS42OS0uNTYtMS4yNS0xLjI1LTEuMjVabS0xMi41LjYyNWgxMi41Yy4wNDYgMCAuMDg3LjAxNy4xMy4wMjYtMS4wODIuOTktNC42NyA0LjI3NC01LjkyNiA1LjQwNUEuNjkzLjY5MyAwIDAgMSA4IDguNjJhLjY5My42OTMgMCAwIDEtLjQ1NC0uMTk0QTE2OTAuNTI3IDE2OTAuNTI3IDAgMCAxIDEuNjIgMy4wMmMuMDQzLS4wMDkuMDg0LS4wMjYuMTMtLjAyNlptLS42MjUgOS4zNzVWMy42MmMwLS4wNjEuMDE4LS4xMTcuMDM1LS4xNzMuODI4Ljc1OCAzLjMzMiAzLjA0OSA0Ljk1NiA0LjUyNS0xLjYxOSAxLjM5LTQuMTIzIDMuNzY1LTQuOTU4IDQuNTYxLS4wMTUtLjA1My0uMDMzLS4xMDUtLjAzMy0uMTYzWm0xMy4xMjUuNjI1SDEuNzVjLS4wNSAwLS4wOTQtLjAxNy0uMTQtLjAyOC44NjItLjgyMyAzLjM4Mi0zLjIxIDQuOTcyLTQuNTcxbC41NDYuNDk0Yy4yNTcuMjMyLjU1OS4zNTUuODcyLjM1NS4zMTMgMCAuNjE1LS4xMjMuODcyLS4zNTUuMTUtLjEzNC4zMzktLjMwNi41NDYtLjQ5NCAxLjU5IDEuMzYgNC4xMSAzLjc0OCA0Ljk3MyA0LjU3LS4wNDcuMDEyLS4wOTEuMDMtLjE0MS4wM1ptLjYyNS0uNjI1YzAgLjA1OC0uMDE4LjExLS4wMzMuMTYzLS44MzUtLjc5Ni0zLjM0LTMuMTctNC45NTgtNC41NiAxLjYyNC0xLjQ3NyA0LjEyNy0zLjc2NyA0Ljk1Ni00LjUyNi4wMTcuMDU2LjAzNS4xMTIuMDM1LjE3M3Y4Ljc1WiIvPjwvc3ZnPg=="},8628:function(e,t,n){var a=n(8081),r=n.n(a),i=n(23645),l=n.n(i)()(r());l.push([e.id,'/*\n *  Copyright 2023 Collate.\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.data-insight-report-alert-form .ant-form-item {\n  margin-bottom: 16px;\n}\n.data-insight-report-alert-form .form-footer {\n  gap: 16px;\n  display: flex;\n  justify-content: end;\n}\n',""]),t.Z=l},55538:function(e,t,n){var a,r,i,l,u,c,s;n.d(t,{NK:function(){return a},Qe:function(){return u},Qm:function(){return r},bH:function(){return c},lP:function(){return i},zn:function(){return s}}),function(e){e.ChangeEvent="ChangeEvent",e.DataInsightReport="DataInsightReport",e.TaskConversationAnnouncement="Task/Conversation/Announcement"}(a||(a={})),function(e){e.Exclude="exclude",e.Include="include"}(r||(r={})),function(e){e.System="system",e.User="user"}(i||(i={})),function(e){e.Active="active",e.AwaitingRetry="awaitingRetry",e.Disabled="disabled",e.Failed="failed",e.RetryLimitReached="retryLimitReached"}(l||(l={})),function(e){e.ActivityFeed="ActivityFeed",e.DataInsight="DataInsight",e.Email="Email",e.GChatWebhook="GChatWebhook",e.GenericWebhook="GenericWebhook",e.MSTeamsWebhook="MsTeamsWebhook",e.SlackWebhook="SlackWebhook"}(u||(u={})),function(e){e.Custom="Custom",e.Daily="Daily",e.Monthly="Monthly",e.Weekly="Weekly"}(c||(c={})),function(e){e.RealTime="RealTime",e.Scheduled="Scheduled"}(s||(s={}))},38413:function(e,t,n){n.r(t),n.d(t,{default:function(){return Y}});var a=n(70655),r=n(49409),i=n(71230),l=n(15746),u=n(56256),c=n(19586),s=n(4107),o=n(19650),d=n(34041),m=n(9676),h=n(71577),f=n(96486),g=n(67294),p=n(68432),b=n(15137),M=n(18927),y=n(96162),v=n(16139),N=n(55538),E=n(17309),L=n(1600),j=n(76143),T=n(79690),Z=n(96840),I=n(46321),A=n(93379),S=n.n(A),w=n(7795),C=n.n(w),k=n(90569),z=n.n(k),x=n(3565),D=n.n(x),P=n(19216),O=n.n(P),R=n(44589),Q=n.n(R),U=n(8628),W={};W.styleTagTransform=Q(),W.setAttributes=D(),W.insert=z().bind(null,"head"),W.domAPI=C(),W.insertStyleElement=O(),S()(U.Z,W),U.Z&&U.Z.locals&&U.Z.locals;var Y=function(){var e=(0,p.$)().t,t=(0,a.CR)(r.Z.useForm(),1)[0],n=(0,b.k6)(),A=(0,b.UO)().fqn,S=(0,a.CR)((0,g.useState)(!1),2),w=S[0],C=S[1],k=(0,a.CR)((0,g.useState)(!1),2),z=k[0],x=k[1],D=(0,a.CR)((0,g.useState)(N.lP.User),2),P=D[0],O=D[1],R=(0,g.useMemo)((function(){return!(0,f.isEmpty)(A)}),[A]),Q=(0,g.useMemo)((function(){return(0,f.map)(N.bH,(function(e){return{label:e,value:e}})).filter((function(e){return e.value!==N.bH.Custom}))}),[]);(0,g.useEffect)((function(){A&&(0,a.mG)(void 0,void 0,void 0,(function(){var n,r;return(0,a.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,3,4]),C(!0),[4,(0,L.Zt)(A)];case 1:return n=i.sent(),O(null!==(r=n.provider)&&void 0!==r?r:N.lP.User),t.setFieldsValue((0,a.pi)({},n)),[3,4];case 2:return i.sent(),(0,I.Eo)(e("server.entity-fetch-error",{entity:e("label.alert")})),[3,4];case 3:return C(!1),[7];case 4:return[2]}}))}))}),[A]);var U={label:e("label.enabled"),id:"root/enabled",name:"enabled",required:!1,type:E.U.SWITCH,formItemLayout:E.E.HORIZONATAL,props:{"data-testid":"enabled-switch"},formItemProps:{labelCol:{span:24}}};return g.createElement(i.Z,{gutter:[16,16]},g.createElement(l.Z,{span:24},g.createElement(u.Z.Title,{level:5},e(R?"label.edit-entity":"label.create-entity",{entity:e("label.data-insight-report-alert")})),g.createElement(u.Z.Text,null,e("message.alerts-description"))),g.createElement(l.Z,{span:24},g.createElement(r.Z,{className:"data-insight-report-alert-form",form:t,onFinish:function(t){return(0,a.mG)(void 0,void 0,void 0,(function(){var r;return(0,a.Jh)(this,(function(i){switch(i.label){case 0:x(!0),r=R?L.Cr:L.el,i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,r((0,a.pi)((0,a.pi)({},t),{alertType:N.NK.DataInsightReport,provider:P}))];case 2:return i.sent(),(0,I.XA)(e("server."+(R?"update":"create")+"-entity-success",{entity:e("label.data-insight-report-alert")})),n.push((0,Z.si)(y.CZ.NOTIFICATIONS,y.lx.DATA_INSIGHT_REPORT_ALERT)),[3,5];case 3:return i.sent(),(0,I.Eo)(e("server."+(R?"entity-updating-error":"entity-creation-error"),{entity:e("label.data-insight-report-alert")})),[3,5];case 4:return x(!1),[7];case 5:return[2]}}))}))}},w?g.createElement(c.Z,{title:!0,paragraph:{rows:8}}):g.createElement(g.Fragment,null,g.createElement(r.Z.Item,{label:e("label.name"),labelCol:{span:24},name:"name",rules:[{required:!0},{pattern:v.$Q,message:e("message.entity-name-validation")}]},g.createElement(s.Z,{"data-testid":"name",disabled:R})),g.createElement(r.Z.Item,{label:e("label.description"),labelCol:{span:24},name:"description",trigger:"onTextChange",valuePropName:"initialValue"},g.createElement(M.Z,{"data-testid":"description",height:"200px",initialValue:""})),(0,T.rz)(U),g.createElement(r.Z.Item,null,g.createElement(i.Z,{gutter:[16,16]},g.createElement(l.Z,{span:12},g.createElement(o.Z,{className:"w-full",direction:"vertical",size:16},g.createElement(j.rg,{heading:e("label.trigger"),subHeading:e("message.data-insight-alert-trigger-description")}),g.createElement("div",null,g.createElement(r.Z.Item,{required:!0,initialValue:[N.zn.Scheduled],label:e("label.trigger-type"),labelCol:{span:24},name:["trigger","triggerType"]},g.createElement(d.Z,{className:"w-full","data-testid":"triggerType",options:[{label:N.zn.Scheduled,value:N.zn.Scheduled}]})),g.createElement(r.Z.Item,{required:!0,label:e("label.schedule-info"),labelCol:{span:24},name:["trigger","scheduleInfo"]},g.createElement(d.Z,{className:"w-full","data-testid":"scheduleInfo",options:Q}))))),g.createElement(l.Z,{span:12},g.createElement(o.Z,{className:"w-full",direction:"vertical",size:16},g.createElement(j.rg,{heading:e("label.destination"),subHeading:e("message.data-insight-alert-destination-description")}),g.createElement("div",null,g.createElement(r.Z.Item,{hidden:!0,name:"subscriptionType",rules:[{required:!0,message:e("label.field-required",{field:e("label.destination")})}]},g.createElement(s.Z,null)),g.createElement(o.Z,{align:"baseline"},g.createElement("label",null,e("label.send-to"),":"),g.createElement(r.Z.Item,{name:["subscriptionConfig","sendToAdmins"],valuePropName:"checked"},g.createElement(m.Z,{"data-testid":"sendToAdmins"},e("label.admin-plural"))),g.createElement(r.Z.Item,{name:["subscriptionConfig","sendToTeams"],valuePropName:"checked"},g.createElement(m.Z,{"data-testid":"sendToTeams"},e("label.team-plural"))))))),g.createElement(l.Z,{className:"form-footer",span:24},g.createElement(h.Z,{"data-testid":"cancel-button",onClick:function(){return n.goBack()}},e("label.cancel")),g.createElement(h.Z,{"data-testid":"save-button",htmlType:"submit",loading:z,type:"primary"},e("label.save")))))))))}},1600:function(e,t,n){n.d(t,{$K:function(){return u},BN:function(){return c},Cr:function(){return o},JH:function(){return h},UT:function(){return m},Zt:function(){return l},aI:function(){return d},el:function(){return s}});var a=n(70655),r=n(2598),i="/events/subscriptions",l=function(e,t){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return[4,r.Z.get(i+"/"+e,{params:(0,a.pi)((0,a.pi)({},t),{include:"all"})})];case 1:return[2,n.sent().data]}}))}))},u=function(e,t){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return[4,r.Z.get(i+"/name/"+e,{params:(0,a.pi)((0,a.pi)({},t),{include:"all"})})];case 1:return[2,n.sent().data]}}))}))},c=function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(t){switch(t.label){case 0:return[4,r.Z.get(i,{params:(0,a.pi)({},e)})];case 1:return[2,t.sent().data]}}))}))},s=function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(t){switch(t.label){case 0:return[4,r.Z.post(i,e)];case 1:return[2,t.sent().data]}}))}))},o=function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(t){switch(t.label){case 0:return[4,r.Z.put(i,e)];case 1:return[2,t.sent().data]}}))}))},d=function(){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,r.Z.get(i+"/functions")];case 1:return[2,e.sent().data]}}))}))},m=function(){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,r.Z.get(i+"/resources")];case 1:return[2,e.sent().data]}}))}))},h=function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(t){switch(t.label){case 0:return[4,r.Z.put(i+"/trigger/"+e)];case 1:return[2,t.sent().data]}}))}))}},76143:function(e,t,n){n.d(t,{A4:function(){return N},Hg:function(){return y},aX:function(){return f},m8:function(){return g},oS:function(){return M},rg:function(){return p},us:function(){return v},vO:function(){return b}});var a=n(70655),r=n(56256),i=n(23031),l=n(96486),u=n(67294),c=n(36599),s=n(37369),o=n(38100),d=n(29452),m=n(53112),h=n(55538),f=function(e){switch(e){case h.Qe.SlackWebhook:return u.createElement(d.ReactComponent,{height:16,width:16});case h.Qe.MSTeamsWebhook:return u.createElement(o.ReactComponent,{height:16,width:16});case h.Qe.Email:return u.createElement(s.ReactComponent,{height:16,width:16});case h.Qe.ActivityFeed:return u.createElement(c.ReactComponent,{height:16,width:16});case h.Qe.GenericWebhook:default:return u.createElement(m.ReactComponent,{height:16,width:16})}},g=function(e){switch(e){case"matchAnyEntityFqn":return i.ZP.t("label.fqn-uppercase");case"matchAnyOwnerName":return i.ZP.t("label.owner");case"matchAnyEventType":return i.ZP.t("label.event-type");case"matchTestResult":return i.ZP.t("label.test-entity",{entity:i.ZP.t("label.result-plural")});case"matchUpdatedBy":return i.ZP.t("label.updated-by");case"matchAnyFieldChange":return i.ZP.t("label.field-change");case"matchIngestionPipelineState":return i.ZP.t("label.pipeline-state");case"matchAnySource":return i.ZP.t("label.source-match");case"matchAnyEntityId":return i.ZP.t("label.entity-id-match");default:return""}},p=function(e){var t=e.heading,n=e.subHeading;return u.createElement("div",{className:"bg-grey p-sm rounded-4 min-h-24"},u.createElement(r.Z.Text,null,t),u.createElement("br",null),u.createElement(r.Z.Text,{className:"text-xs text-grey-muted"},n))},b=function(e,t){return void 0===t&&(t=1),function(n,r){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(n){return!r||r.length<t?[2,Promise.reject(new Error(i.ZP.t("message.length-validator-error",{length:t,field:e})))]:[2,Promise.resolve()]}))}))}},M=function(e){switch(e){case h.Qe.ActivityFeed:return i.ZP.t("label.activity-feed-plural");case h.Qe.Email:return i.ZP.t("label.email");case h.Qe.GenericWebhook:return i.ZP.t("label.webhook");case h.Qe.SlackWebhook:return i.ZP.t("label.slack");case h.Qe.MSTeamsWebhook:return i.ZP.t("label.ms-team-plural");case h.Qe.GChatWebhook:return i.ZP.t("label.g-chat");default:return""}},y=function(e){switch(e){case"kpi":return i.ZP.t("label.kpi-uppercase");case"mlmodel":return i.ZP.t("label.ml-model");default:return(0,l.startCase)(e)}},v="/settings/notifications/edit-alert",N="/settings/notifications/edit-data-insight-report"}}]);