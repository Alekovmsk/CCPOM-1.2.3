"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[2787,6653],{86653:function(e,t,n){n.r(t),n.d(t,{ReactComponent:function(){return l}});var a,r=n(67294);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i.apply(this,arguments)}var l=function(e){return r.createElement("svg",i({"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",role:"img"},e),a||(a=r.createElement("path",{d:"M8 11a.498.498 0 0 1-.353-.146l-5-5a.5.5 0 1 1 .707-.707L8 9.793l4.646-4.646a.5.5 0 1 1 .707.707l-5 5A.498.498 0 0 1 8 11Z"})))};t.default="data:image/svg+xml;base64,IDxzdmcKICAgICAgYXJpYS1oaWRkZW49InRydWUiCiAgICAgIGZpbGw9ImN1cnJlbnRDb2xvciIKICAgICAgdmlld0JveD0iMCAwIDE2IDE2IgogICAgICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgICA8cGF0aAogICAgICAgIGQ9Ik04LjAwMDAzIDExQzcuODcyMTYgMTEgNy43NDQxNiAxMC45NTEyIDcuNjQ2NTMgMTAuODUzNUwyLjY0NjUzIDUuODUzNTNDMi40NTExNiA1LjY1ODE2IDIuNDUxMTYgNS4zNDE3OCAyLjY0NjUzIDUuMTQ2NTNDMi44NDE5MSA0Ljk1MTI4IDMuMTU4MjggNC45NTExNiAzLjM1MzUzIDUuMTQ2NTNMOC4wMDAwMyA5Ljc5MzAzTDEyLjY0NjUgNS4xNDY1M0MxMi44NDE5IDQuOTUxMTYgMTMuMTU4MyA0Ljk1MTE2IDEzLjM1MzUgNS4xNDY1M0MxMy41NDg4IDUuMzQxOTEgMTMuNTQ4OSA1LjY1ODI4IDEzLjM1MzUgNS44NTM1M0w4LjM1MzU0IDEwLjg1MzVDOC4yNTU5MSAxMC45NTEyIDguMTI3OTEgMTEgOC4wMDAwMyAxMVoiCiAgICAgICAgc3Ryb2tlV2lkdGg9IjAuNCIKICAgICAgLz4KICAgIDwvc3ZnPgoK"},10971:function(e,t,n){var a=n(8081),r=n.n(a),i=n(23645),l=n.n(i)()(r());l.push([e.id,'/*\n *  Copyright 2022 Collate.\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n/*\n *  Copyright 2022 Collate.\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n/* navbar+tab_height+padding = 64+46+12  */\n.advanced-filter-text {\n  background: #f8f8f8;\n  border-radius: 4px;\n  padding: 4px 8px;\n}\n',""]),t.Z=l},9625:function(e,t,n){var a=n(8081),r=n.n(a),i=n(23645),l=n.n(i)()(r());l.push([e.id,'/*\n *  Copyright 2022 Collate.\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n/*\n *  Copyright 2022 Collate.\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n/* navbar+tab_height+padding = 64+46+12  */\n.explore-page-layout .page-layout-v1-vertical-scroll {\n  height: calc(100vh - 113px);\n}\n.explore-page-layout .page-layout-rightpanel {\n  padding-right: 0 !important;\n  background-color: #fff;\n  border: 1px solid #0000001a;\n  border-right: none;\n  border-radius: 0;\n  padding-left: 0 !important;\n  border-top: 0;\n}\n.quick-filter-dropdown-trigger-btn .ant-typography {\n  color: black;\n}\n.explore-page .explore-data-header {\n  padding: 13px 14px;\n  color: #757575;\n  margin-bottom: 0 !important;\n}\n.explore-page .searched-data-container {\n  padding: 8px 12px;\n}\n.explore-page .explore-page-tabs .ant-tabs-nav {\n  margin: 0 !important;\n  width: 100%;\n  height: calc(100vh - 64px);\n}\n.explore-page .summary-panel-container {\n  overflow: hidden;\n  height: calc(100vh - 113px);\n}\n.explore-page .summary-panel-container .ant-drawer-header {\n  border-bottom: none;\n}\n.explore-page .sorting-dropdown-container {\n  line-height: 24px;\n}\n.explore-page .filters-row {\n  border-bottom: 1px solid #0000001a;\n}\n.explore-page {\n  overflow-x: hidden;\n}\n.explore-page .custom-menu.ant-menu-root.ant-menu-inline .ant-menu-item {\n  height: 40px;\n  width: 100%;\n}\n',""]),t.Z=l},82787:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ce}});var a=n(70655),r=n(19650),i=n(56256),l=n(96486),s=n(80129),o=n.n(s),c=n(67294),u=n(15137),d=n(52046),m=n(14286),p=n(10732),g=n(96325),h=n(97183),f=n(71230),v=n(15746),E=n(71577),y=n(62704),b=n(68432),N=n(38780),x=n(38212),C=n(93379),S=n.n(C),I=n(7795),w=n.n(I),A=n(90569),M=n.n(A),D=n(3565),T=n.n(D),Z=n(19216),L=n.n(Z),k=n(44589),O=n.n(k),R=n(10971),z={};z.styleTagTransform=O(),z.setAttributes=T(),z.insert=M().bind(null,"head"),z.domAPI=w(),z.insertStyleElement=L(),S()(R.Z,z),R.Z&&R.Z.locals&&R.Z.locals;var F=function(e){var t=e.filterText,n=e.onEdit,a=(0,b.$)().t;return c.createElement(r.Z,{className:"p-x-xs w-full",direction:"vertical"},c.createElement(i.Z.Text,{className:"text-grey-muted"},a("label.applied-advanced-search")),c.createElement(r.Z,{align:"center",className:"w-full advanced-filter-text justify-between"},c.createElement(r.Z,{className:"w-full"},c.createElement(x.ZP,{alt:"success-badge",icon:x.PJ.SUCCESS_BADGE,width:"16px"}),c.createElement(i.Z,null,t)),c.createElement(E.Z,{className:"flex-center",icon:c.createElement(N.ReactComponent,{width:16}),type:"text",onClick:n})))},j=n(15335),U=n(71743),q=n(13013),P=n(86653),W=function(e){var t,n=e.fieldList,a=e.handleFieldDropDown,l=e.sortField,s=n.map((function(e){return{label:e.name,key:e.value,onClick:function(){return a(e.value)},"data-testid":"dropdown-menu-item"}})),o=null===(t=n.find((function(e){return e.value===l})))||void 0===t?void 0:t.name;return c.createElement(q.Z,{className:"self-end m-r-xs cursor-pointer","data-testid":"dropdown",menu:{items:s},trigger:["click"]},c.createElement(r.Z,{align:"baseline","data-testid":"sorting-dropdown-label",size:4},c.createElement(i.Z.Text,{className:"text-grey-muted"},o),c.createElement(P.ReactComponent,{className:"text-grey-muted align-middle",height:16,width:16})))},V=n(83716),Y=n(34669),_=n(61105),J=n(53926),K=n(98026),B=n(69523),Q=n(80646),H=n(50970),G=n(94184),X=n.n(G),$=n(62761),ee=n(93895),te=n(24671),ne=n(67674),ae=n(92693),re=n(74475),ie=n(88045),le=[{step:1,title:re.Z.t("label.ingest-sample-data"),description:re.Z.t("message.run-sample-data-to-ingest-sample-data"),link:ae.u9},{step:2,title:re.Z.t("label.start-elasticsearch-docker"),description:re.Z.t("message.ensure-elasticsearch-is-up-and-running"),link:ae.Cf},{step:3,title:re.Z.t("label.install-service-connectors"),description:re.Z.t("message.checkout-service-connectors-doc"),link:ae.lS},{step:4,title:re.Z.t("label.more-help"),description:re.Z.t("message.still-running-into-issue"),link:ae.IH}],se=(0,ne.Pi)((function(e){var t=e.type,n=e.errorMessage,a=e.query,l=null!=a?a:{},s=l.showDeleted,o=l.search,d=l.queryFilter,m=l.quickFilter,p=(0,u.UO)().tab,g=(0,b.$)().t,h=(0,u.k6)(),E=(0,ie.mX)().activeDomain,y=(0,c.useMemo)((function(){return Boolean(o||d||m||"true"===s)}),[o,d,m,s]),N=(0,c.useMemo)((function(){return c.createElement("div",{className:"text-center","data-testid":"no-search-results"},y?c.createElement(V.Z,{type:_.Wx.FILTER}):["glossaries","tags"].includes(p)?c.createElement(V.Z,{permission:!0,doc:"tags"===p?ae.uo:ae.cK,heading:g("tags"===p?"label.tag-plural":"label.glossary"),type:_.Wx.CREATE,onClick:function(){return h.push("tags"===p?$.dt.TAGS:$.dt.GLOSSARY)}}):c.createElement(V.Z,{type:_.Wx.CUSTOM},c.createElement(i.Z.Paragraph,{style:{marginBottom:"0"}},g("message.no-data-available-entity",{entity:E})),c.createElement(i.Z.Paragraph,{style:{marginBottom:"0"}},g("message.add-data-asset-domain",{domain:E})),c.createElement(i.Z.Paragraph,null,c.createElement(ee.u1,{i18nKey:"message.refer-to-our-doc",renderElement:c.createElement("a",{href:ae.lS,rel:"noreferrer",style:{color:"#1890ff"},target:"_blank"}),values:{doc:g("label.doc-plural-lowercase")}}))))}),[y]),x=(0,c.useMemo)((function(){var e,t=null===(e=null==n?void 0:n.split("[")[3])||void 0===e?void 0:e.split("]")[0],a=n&&t?"find "+t+" in":"access";return c.createElement("div",{"data-testid":"es-error"},c.createElement("div",{className:"m-b-lg text-center"},c.createElement("p",null,c.createElement("span",null,g("message.welcome-to-open-metadata")," "),c.createElement("span",{"data-testid":"error-text"},g("message.unable-to-error-elasticsearch",{error:a}))),c.createElement("p",null,g("message.elasticsearch-setup"))),c.createElement(f.Z,{gutter:16},le.map((function(e){return c.createElement(v.Z,{key:e.step,span:6},c.createElement(r.Z,{className:"justify-between h-full border rounded-4 p-sm",direction:"vertical"},c.createElement("div",null,c.createElement("div",{className:"d-flex m-b-xs"},c.createElement("div",{className:"flex-center rounded-full h-10 w-10 border-2-primary text-primary text-lg font-bold"},e.step)),c.createElement("h6",{className:"text-base text-grey-body font-medium","data-testid":"service-name"},e.title),c.createElement("p",{className:"text-grey-body text-sm m-b-lg"},e.description)),c.createElement("p",null,c.createElement("a",{href:e.link,rel:"noopener noreferrer",target:"_blank"},g("label.click-here")+" >>"))))}))))}),[n]);return c.createElement("div",{className:"mt-12 text-base font-medium"},t===_.NS.NO_DATA?N:x)})),oe=n(95969),ce=["table_name","topic_name","dashboard_name","pipeline_name"],ue=function(e){var t=e.children,n=e.data,r=e.isLoading,i=void 0!==r&&r,s=e.onPaginationChange,u=e.showResultCount,d=void 0!==u&&u,m=e.totalValue,p=e.isFilterSelected,g=e.isSummaryPanelVisible,h=e.selectedEntityId,f=e.handleSummaryPanelDisplay,v=e.filter,E=(0,c.useMemo)((function(){return n.map((function(e,t){var n,r,i,s=e._source,o=e.highlight,u=null!==(n=s.description)&&void 0!==n?n:"",d=(null==o?void 0:o.description)||[];d.length>0&&d.map((function(e){return e.replace(/<\/?span(.*?)>/g,"")})).forEach((function(e,t){u=u.replace(e,d[t])}));var m=(0,te.C_)(s);(0,l.isUndefined)(o)||(m=(null===(r=null==o?void 0:o.displayName)||void 0===r?void 0:r.join(" "))||(null===(i=null==o?void 0:o.name)||void 0===i?void 0:i.join(" "))||m);var p=o?Object.entries(o).map((function(e){var t=0;return e[1].forEach((function(e){var n,a=null===(n=e.match(/<span(.*?)>(.*?)<\/span>/g))||void 0===n?void 0:n.length;t+=a||0})),{key:e[0],value:t}})).filter((function(e){return!ce.includes(e.key)})):[],v=(0,a.pi)((0,a.pi)({},s),{description:u,displayName:m});return c.createElement("div",{className:"m-b-md",key:"tabledatacard"+t},c.createElement(oe.Z,{className:X()(s.id===h&&g?"highlight-card":""),handleSummaryPanelDisplay:f,id:"tabledatacard"+t,matches:p,showTags:!1,source:v}))}))}),[n,g,f,h]),y=(0,c.useMemo)((function(){return o().parse(location.search.startsWith("?")?location.search.substr(1):location.search)}),[location.search]),b=y.page,N=void 0===b?1:b,x=y.size,C=void 0===x?$.IV:x;return c.createElement(c.Fragment,null,i?c.createElement(B.Z,null):c.createElement("div",{"data-testid":"search-container"},m>0?c.createElement(c.Fragment,null,t,c.createElement((function(){return d&&(p||(null==v?void 0:v.quickFilter))?Y.z5===m?c.createElement("div",null,"About "+m+" results"):c.createElement("div",null,(0,ee._6)(m,"result")):null}),null),c.createElement("div",{"data-testid":"search-results"},E,c.createElement(H.Z,{hideOnSinglePage:!0,className:"text-center m-b-sm",current:(0,l.isNumber)(Number(N))?Number(N):1,pageSize:C&&(0,l.isNumber)(Number(C))?Number(C):$.IV,pageSizeOptions:[10,25,50],total:m,onChange:s}))):c.createElement(c.Fragment,null,t,c.createElement(se,{query:v,type:_.NS.NO_DATA}))))},de=n(9625),me={};me.styleTagTransform=O(),me.setAttributes=T(),me.insert=M().bind(null,"head"),me.domAPI=w(),me.insertStyleElement=L(),S()(de.Z,me),de.Z&&de.Z.locals&&de.Z.locals;var pe,ge=function(e){var t,n,i,s=e.aggregations,u=e.activeTabKey,d=e.tabItems,N=void 0===d?[]:d,x=e.searchResults,C=e.tabCounts,S=e.onChangeAdvancedSearchQuickFilters,I=e.searchIndex,w=(e.onChangeSearchIndex,e.sortOrder),A=e.onChangeSortOder,M=e.sortValue,D=e.onChangeSortValue,T=e.onChangeShowDeleted,Z=e.showDeleted,L=e.onChangePage,k=void 0===L?l.noop:L,O=e.loading,R=e.quickFilters,z=(0,b.$)().t,q=(0,a.CR)((0,c.useState)([]),2),P=q[0],H=q[1],G=(0,a.CR)((0,c.useState)(!1),2),X=G[0],$=G[1],ee=(0,a.CR)((0,c.useState)(),2),te=ee[0],ne=ee[1],ae=(0,c.useMemo)((function(){return o().parse(location.search.startsWith("?")?location.search.substring(1):location.search)}),[location.search]),re=(0,c.useMemo)((function(){return(0,l.isString)(ae.search)?ae.search:""}),[location.search]),ie=(0,m.J)(),le=ie.toggleModal,se=ie.sqlQuery,oe=(ie.onResetAllFilters,function(){$(!1)}),ce=(0,c.useMemo)((function(){return w===_.mX.ASC}),[w]),de=(0,c.useMemo)((function(){return{className:"text-base text-grey-muted","data-testid":"last-updated"}}),[]),me=(0,c.useCallback)((function(e){$(!0),ne(e)}),[]);return(0,c.useEffect)((function(){var e=function(e){"Escape"===e.key&&oe()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),(0,c.useEffect)((function(){var e=(0,J.tp)(u);H(e.map((function(t){return(0,a.pi)((0,a.pi)({},t),{value:(0,K.hH)(t,e,R)})})))}),[u,R]),(0,c.useEffect)((function(){var e,t,n;!(0,l.isUndefined)(x)&&(null===(e=null==x?void 0:x.hits)||void 0===e?void 0:e.hits[0])&&(null===(t=null==x?void 0:x.hits)||void 0===t?void 0:t.hits[0]._index)===I?me(null===(n=null==x?void 0:x.hits)||void 0===n?void 0:n.hits[0]._source):($(!1),ne(void 0))}),[x]),0!==N.length||re?c.createElement("div",{className:"explore-page bg-white","data-testid":"explore-page"},c.createElement("div",{className:"w-full h-full"},N.length>0&&c.createElement(h.Z,{hasSider:!0,className:"bg-white"},c.createElement(y.Content,null,c.createElement(f.Z,{className:"filters-row"},c.createElement(v.Z,{className:"searched-data-container w-full"},c.createElement(f.Z,{gutter:[0,8]},c.createElement(v.Z,null,c.createElement(U.Z,{aggregations:s,fields:P,index:u,showDeleted:Z,onAdvanceSearch:function(){return le(!0)},onChangeShowDeleted:T,onFieldValueSelect:function(e){H((function(t){var n=t.map((function(t){return t.key===e.key?e:t}));return function(e){var t=[];e.forEach((function(e){if(!(0,l.isEmpty)(e.value)){var n=[];e.value&&e.value.forEach((function(t){var a={};a[e.key]=t.key,n.push({term:a})})),t.push({bool:{should:n}})}})),S((0,l.isEmpty)(t)?void 0:{query:{bool:{must:t}}})}(n),n}))}})),c.createElement(v.Z,{className:"d-flex items-center justify-end gap-4",flex:410},c.createElement("span",{className:"sorting-dropdown-container"},c.createElement(W,{fieldList:Y.qJ[I].sortingFields,handleFieldDropDown:D,sortField:M}),c.createElement(E.Z,{className:"p-0","data-testid":"sort-order-button",size:"small",type:"text",onClick:function(){return A(ce?_.mX.DESC:_.mX.ASC)}},ce?c.createElement(p.Z,(0,a.pi)({style:{fontSize:"14px"}},de)):c.createElement(g.Z,(0,a.pi)({style:{fontSize:"14px"}},de))))),se&&c.createElement(v.Z,{span:24},c.createElement(F,{filterText:se,onEdit:function(){return le(!0)}}))))),c.createElement(Q.Z,{className:"p-0 explore-page-layout",pageTitle:z("label.explore"),rightPanel:X&&te&&!O&&c.createElement(j.Z,{entityDetails:{details:te},handleClosePanel:oe}),rightPanelWidth:400},c.createElement(f.Z,{className:"p-t-xs"},c.createElement(v.Z,{lg:{offset:1,span:22},md:{offset:0,span:24}},O?c.createElement(B.Z,null):c.createElement(ue,{isFilterSelected:!0,data:null!==(t=null==x?void 0:x.hits.hits)&&void 0!==t?t:[],filter:ae,handleSummaryPanelDisplay:me,isSummaryPanelVisible:X,selectedEntityId:(null==te?void 0:te.id)||"",totalValue:null!==(i=null!==(n=null==C?void 0:C[I])&&void 0!==n?n:null==x?void 0:x.hits.total.value)&&void 0!==i?i:0,onPaginationChange:k}))))))),re&&0===N.length&&!O&&c.createElement(r.Z,{align:"center",className:"w-full flex-center full-height","data-testid":"no-search-results",direction:"vertical",size:48},c.createElement(V.Z,{className:"mt-0-important",type:_.Wx.FILTER})),re&&0===N.length&&O&&c.createElement(B.Z,null)):c.createElement(B.Z,null)},he=n(5672),fe=n(83815),ve=n(71225),Ee=n(22653),ye=n(17888),be=n(67745),Ne=n(40734),xe=n(46321),Ce=(pe=function(){var e=(0,u.TH)(),t=(0,u.k6)(),n=(0,fe.Fb)().isTourOpen,s=(0,u.UO)().tab,p=(0,he.ep)().searchCriteria,g=(0,a.CR)((0,c.useState)(),2),h=g[0],f=g[1],v=(0,a.CR)((0,c.useState)(),2),E=v[0],y=v[1],b=(0,a.CR)((0,c.useState)(),2),N=b[0],x=b[1],C=(0,a.CR)((0,c.useState)(_.mX.DESC),2),S=C[0],I=C[1],w=(0,a.CR)((0,c.useState)(),2),A=w[0],M=w[1],D=(0,a.CR)((0,c.useState)(!0),2),T=D[0],Z=D[1],L=(0,m.J)().queryFilter,k=(0,a.CR)((0,c.useMemo)((function(){var t=o().parse(e.search.startsWith("?")?e.search.substring(1):e.search);return[t,(0,l.isString)(t.search)?t.search:"",(0,l.isString)(t.sort)?t.sort:Y.dM]}),[e.search]),3),O=k[0],R=k[1],z=k[2],F=function(e,n){t.push({search:o().stringify((0,a.pi)((0,a.pi)({},O),{page:e,size:null!=n?n:$.IV}))})},j=(0,c.useMemo)((function(){var e=(0,l.get)(N,"query.bool.must",[]).filter((function(e){var t=(0,l.get)(e,"bool.should",[]);return!(0,l.isEmpty)(t)&&Y.nM.find((function(e){return e===Object.keys(t[0].term)[0]}))}));return(0,l.isEmpty)(e)?void 0:{query:{bool:{must:e}}}}),[N]),U=(0,c.useCallback)((function(e){t.push((0,$.rg)({tab:Y.qJ[e].path,extraParameters:{sort:R?"_score":Y.dM,page:"1",quickFilter:j?JSON.stringify(j):void 0},isPersistFilters:!1}))}),[j,R]),q=(0,c.useCallback)((function(e){t.push({search:o().stringify((0,a.pi)((0,a.pi)({},O),{quickFilter:e?JSON.stringify(e):void 0,page:1}))})}),[t,O]),P=(0,c.useMemo)((function(){var e=Object.entries(Y.qJ).find((function(e){return(0,a.CR)(e,2)[1].path===s}));if(A&&(0,l.isNil)(e)){var t=(0,K.s1)(A);return null!=t?t:Ee.W.TABLE}return(0,l.isNil)(e)?Ee.W.TABLE:e[0]}),[s,A]),W=(0,c.useMemo)((function(){var e=Object.entries(Y.qJ).map((function(e){var t=(0,a.CR)(e,2),n=t[0],s=t[1];return{key:n,label:c.createElement("div",{"data-testid":(0,l.lowerCase)(s.label)+"-tab"},c.createElement(r.Z,{className:"w-full justify-between"},c.createElement(i.Z.Text,{className:n===P?"text-primary":""},s.label),c.createElement("span",null,(0,l.isNil)(A)?(0,ee.yh)():(0,ee.yh)(A[n],"",n===P)))),count:A?A[n]:0}}));return R?e.filter((function(e){return e.count>0||e.key===p})):e}),[Y.qJ,A,P]),V=(0,c.useMemo)((function(){var e=O.page;return!(0,l.isString)(e)||isNaN(Number.parseInt(e))?1:Number.parseInt(e)}),[O.page]),J=(0,c.useMemo)((function(){var e=O.size;return!(0,l.isString)(e)||isNaN(Number.parseInt(e))?$.IV:Number.parseInt(e)}),[O.size]);(0,c.useEffect)((function(){(0,l.isEmpty)(O)||F(V,J)}),[V,J,O]);var B=(0,c.useMemo)((function(){return"true"===O.showDeleted}),[O.showDeleted]),Q=(0,c.useCallback)((function(){if((0,l.isString)(O.quickFilter))try{var e=JSON.parse(O.quickFilter);return x(e),e}catch(e){return void x(void 0)}else x(void 0)}),[O]);(0,c.useEffect)((function(){var e,t;n?M(ve.TC):(e=Q(),t=(0,be.rO)(e,L),Z(!0),Promise.all([(0,ye.w4)({query:(0,l.isEmpty)(R)?"":"*"+(0,Ne.i3)(R)+"*",searchIndex:P,queryFilter:t,sortField:z,sortOrder:S,pageNumber:V,pageSize:J,includeDeleted:B}).then((function(e){return e})).then((function(e){f(e),y(e.aggregations)})),(0,ye.w4)({query:"*"+(0,Ne.i3)(R)+"*",pageNumber:0,pageSize:0,queryFilter:t,searchIndex:Ee.W.ALL,includeDeleted:B,trackTotalHits:!0,fetchSource:!1,filters:""}).then((function(e){var t=e.aggregations.index_count.buckets,n={};t.forEach((function(e){var t;e&&(n[null!==(t=e.key)&&void 0!==t?t:""]=e.doc_count)})),M(n)}))]).catch((function(e){(0,xe.Eo)(e)})).finally((function(){return Z(!1)})))}),[O.quickFilter,L,R,z,S,B,P,V,J]);var H=(0,c.useCallback)((function(e){F(1),x(e),q(e)}),[x,t,O]);return(0,c.useEffect)((function(){d.Z.updateExplorePageTab(s)}),[s]),c.createElement(ge,{activeTabKey:P,aggregations:E,loading:T&&!n,quickFilters:N,searchIndex:P,searchResults:n?ve.R0:h,showDeleted:B,sortOrder:S,sortValue:z,tabCounts:n?ve.TC:A,tabItems:W,onChangeAdvancedSearchQuickFilters:H,onChangePage:F,onChangeSearchIndex:U,onChangeShowDeleted:function(e){t.push({search:o().stringify((0,a.pi)((0,a.pi)({},O),{showDeleted:e,page:1}))})},onChangeSortOder:function(e){F(1),I(e)},onChangeSortValue:function(e){!function(e,n){t.push({search:o().stringify((0,a.pi)((0,a.pi)({},O),{page:1,size:null!=J?J:$.IV,sort:n}))})}(0,e)}})},function(e){return c.createElement(m.s,null,c.createElement(pe,(0,a.pi)({},e)))})}}]);