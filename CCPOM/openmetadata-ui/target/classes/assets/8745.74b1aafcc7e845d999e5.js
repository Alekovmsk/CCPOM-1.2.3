"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[8745],{88366:function(e,n,t){var a=t(8081),r=t.n(a),i=t(23645),o=t.n(i)()(r());o.push([e.id,'/*\n *  Copyright 2023 Collate.\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.ant-input-status-error:not(.ant-input-disabled):not(.ant-input-borderless).ant-input,\n.ant-input-status-error:not(.ant-input-disabled):not(.ant-input-borderless).ant-input:hover {\n  background: #fff;\n  border-color: #ff4c3b;\n}\n.ant-input-status-error:not(.ant-input-disabled):not(.ant-input-borderless).ant-input:focus,\n.ant-input-status-error:not(.ant-input-disabled):not(.ant-input-borderless).ant-input-focused {\n  border-color: #ff7663;\n  box-shadow: 0 0 0 2px rgba(255, 76, 59, 0.2);\n  border-right-width: 1px;\n  outline: 0;\n}\n.ant-input-status-error .ant-input-prefix {\n  color: #ff4c3b;\n}\n.ant-input-status-warning:not(.ant-input-disabled):not(.ant-input-borderless).ant-input,\n.ant-input-status-warning:not(.ant-input-disabled):not(.ant-input-borderless).ant-input:hover {\n  background: #fff;\n  border-color: #ffc34e;\n}\n.ant-input-status-warning:not(.ant-input-disabled):not(.ant-input-borderless).ant-input:focus,\n.ant-input-status-warning:not(.ant-input-disabled):not(.ant-input-borderless).ant-input-focused {\n  border-color: #ffd678;\n  box-shadow: 0 0 0 2px rgba(255, 195, 78, 0.2);\n  border-right-width: 1px;\n  outline: 0;\n}\n.ant-input-status-warning .ant-input-prefix {\n  color: #ffc34e;\n}\n.ant-input-affix-wrapper-status-error:not(.ant-input-affix-wrapper-disabled):not(.ant-input-affix-wrapper-borderless).ant-input-affix-wrapper,\n.ant-input-affix-wrapper-status-error:not(.ant-input-affix-wrapper-disabled):not(.ant-input-affix-wrapper-borderless).ant-input-affix-wrapper:hover {\n  background: #fff;\n  border-color: #ff4c3b;\n}\n.ant-input-affix-wrapper-status-error:not(.ant-input-affix-wrapper-disabled):not(.ant-input-affix-wrapper-borderless).ant-input-affix-wrapper:focus,\n.ant-input-affix-wrapper-status-error:not(.ant-input-affix-wrapper-disabled):not(.ant-input-affix-wrapper-borderless).ant-input-affix-wrapper-focused {\n  border-color: #ff7663;\n  box-shadow: 0 0 0 2px rgba(255, 76, 59, 0.2);\n  border-right-width: 1px;\n  outline: 0;\n}\n.ant-input-affix-wrapper-status-error .ant-input-prefix {\n  color: #ff4c3b;\n}\n.ant-input-affix-wrapper-status-warning:not(.ant-input-affix-wrapper-disabled):not(.ant-input-affix-wrapper-borderless).ant-input-affix-wrapper,\n.ant-input-affix-wrapper-status-warning:not(.ant-input-affix-wrapper-disabled):not(.ant-input-affix-wrapper-borderless).ant-input-affix-wrapper:hover {\n  background: #fff;\n  border-color: #ffc34e;\n}\n.ant-input-affix-wrapper-status-warning:not(.ant-input-affix-wrapper-disabled):not(.ant-input-affix-wrapper-borderless).ant-input-affix-wrapper:focus,\n.ant-input-affix-wrapper-status-warning:not(.ant-input-affix-wrapper-disabled):not(.ant-input-affix-wrapper-borderless).ant-input-affix-wrapper-focused {\n  border-color: #ffd678;\n  box-shadow: 0 0 0 2px rgba(255, 195, 78, 0.2);\n  border-right-width: 1px;\n  outline: 0;\n}\n.ant-input-affix-wrapper-status-warning .ant-input-prefix {\n  color: #ffc34e;\n}\n.ant-input-number-status-error:not(.ant-input-number-disabled):not(.ant-input-number-borderless).ant-input-number,\n.ant-input-number-status-error:not(.ant-input-number-disabled):not(.ant-input-number-borderless).ant-input-number:hover {\n  background: #fff;\n  border-color: #ff4c3b;\n}\n.ant-input-number-status-error:not(.ant-input-number-disabled):not(.ant-input-number-borderless).ant-input-number:focus,\n.ant-input-number-status-error:not(.ant-input-number-disabled):not(.ant-input-number-borderless).ant-input-number-focused {\n  border-color: #ff7663;\n  box-shadow: 0 0 0 2px rgba(255, 76, 59, 0.2);\n  border-right-width: 1px;\n  outline: 0;\n}\n.ant-input-number-status-error .ant-input-number-prefix {\n  color: #ff4c3b;\n}\n.ant-input-number-status-warning:not(.ant-input-number-disabled):not(.ant-input-number-borderless).ant-input-number,\n.ant-input-number-status-warning:not(.ant-input-number-disabled):not(.ant-input-number-borderless).ant-input-number:hover {\n  background: #fff;\n  border-color: #ffc34e;\n}\n.ant-input-number-status-warning:not(.ant-input-number-disabled):not(.ant-input-number-borderless).ant-input-number:focus,\n.ant-input-number-status-warning:not(.ant-input-number-disabled):not(.ant-input-number-borderless).ant-input-number-focused {\n  border-color: #ffd678;\n  box-shadow: 0 0 0 2px rgba(255, 195, 78, 0.2);\n  border-right-width: 1px;\n  outline: 0;\n}\n.ant-input-number-status-warning .ant-input-number-prefix {\n  color: #ffc34e;\n}\n.ant-input-number-affix-wrapper-status-error:not(.ant-input-number-affix-wrapper-disabled):not(.ant-input-number-affix-wrapper-borderless).ant-input-number-affix-wrapper,\n.ant-input-number-affix-wrapper-status-error:not(.ant-input-number-affix-wrapper-disabled):not(.ant-input-number-affix-wrapper-borderless).ant-input-number-affix-wrapper:hover {\n  background: #fff;\n  border-color: #ff4c3b;\n}\n.ant-input-number-affix-wrapper-status-error:not(.ant-input-number-affix-wrapper-disabled):not(.ant-input-number-affix-wrapper-borderless).ant-input-number-affix-wrapper:focus,\n.ant-input-number-affix-wrapper-status-error:not(.ant-input-number-affix-wrapper-disabled):not(.ant-input-number-affix-wrapper-borderless).ant-input-number-affix-wrapper-focused {\n  border-color: #ff7663;\n  box-shadow: 0 0 0 2px rgba(255, 76, 59, 0.2);\n  border-right-width: 1px;\n  outline: 0;\n}\n.ant-input-number-affix-wrapper-status-error .ant-input-number-prefix {\n  color: #ff4c3b;\n}\n.ant-input-number-affix-wrapper-status-warning:not(.ant-input-number-affix-wrapper-disabled):not(.ant-input-number-affix-wrapper-borderless).ant-input-number-affix-wrapper,\n.ant-input-number-affix-wrapper-status-warning:not(.ant-input-number-affix-wrapper-disabled):not(.ant-input-number-affix-wrapper-borderless).ant-input-number-affix-wrapper:hover {\n  background: #fff;\n  border-color: #ffc34e;\n}\n.ant-input-number-affix-wrapper-status-warning:not(.ant-input-number-affix-wrapper-disabled):not(.ant-input-number-affix-wrapper-borderless).ant-input-number-affix-wrapper:focus,\n.ant-input-number-affix-wrapper-status-warning:not(.ant-input-number-affix-wrapper-disabled):not(.ant-input-number-affix-wrapper-borderless).ant-input-number-affix-wrapper-focused {\n  border-color: #ffd678;\n  box-shadow: 0 0 0 2px rgba(255, 195, 78, 0.2);\n  border-right-width: 1px;\n  outline: 0;\n}\n.ant-input-number-affix-wrapper-status-warning .ant-input-number-prefix {\n  color: #ffc34e;\n}\n.service-list-container {\n  display: flex;\n  margin-top: 16px;\n  gap: 16px;\n  flex-wrap: wrap;\n}\n.service-list-container .service-box {\n  position: relative;\n  height: auto;\n  flex: 0 0 114px;\n}\n.service-list-container .service-box p {\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n.service-list-container .service-box img {\n  max-width: 100%;\n}\n',""]),n.Z=o},95235:function(e,n,t){var a=t(70655),r=t(27202),i=t(96486),o=t(67294),s=t(88357),u=t(89204),l=t(24959),c=t(98461),p=t(98736),d=t(62560),f=t(73954),m=t(26813),b=t(27800),v=t(50162),w=t(87078),h=t(62941);n.Z=function(e){var n,t=e.data,x=e.okText,g=void 0===x?"Save":x,y=e.cancelText,E=void 0===y?"Cancel":y,C=e.serviceType,S=e.serviceCategory,N=e.status,k=e.onCancel,T=e.onSave,Z=e.onFocus,I=e.disableTestConnection,R=void 0!==I&&I,D=(0,i.isNil)(t)?{}:null===(n=t.connection)||void 0===n?void 0:n.config,A=function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){var n;return(0,a.Jh)(this,(function(t){switch(t.label){case 0:return n=(0,p.Fz)(e.formData),[4,T((0,a.pi)((0,a.pi)({},e),{formData:n}))];case 1:return t.sent(),[2]}}))}))};return o.createElement(o.Fragment,null,o.createElement(s.Z,null),function(){var e,n,s={schema:{},uiSchema:{}},p=(0,i.cloneDeep)(D||{});try{for(var x=(0,a.XA)(Object.entries(p)),y=x.next();!y.done;y=x.next()){var T=(0,a.CR)(y.value,2),I=T[0],F=T[1];(0,i.isNil)(F)&&delete p[I]}}catch(n){e={error:n}}finally{try{y&&!y.done&&(n=x.return)&&n.call(x)}finally{if(e)throw e.error}}switch(S){case u.u.DATABASE_SERVICES:s=(0,c.c)(C);break;case u.u.MESSAGING_SERVICES:s=(0,d.m)(C);break;case u.u.DASHBOARD_SERVICES:s=(0,l.n)(C);break;case u.u.PIPELINE_SERVICES:s=(0,b.o)(C);break;case u.u.ML_MODEL_SERVICES:s=(0,m.$)(C);break;case u.u.METADATA_SERVICES:s=(0,f.J)(C);break;case u.u.STORAGE_SERVICES:s=w.Z.getStorageServiceConfig(C);break;case u.u.SEARCH_SERVICES:s=(0,v.C)(C)}return o.createElement(h.Z,{cancelText:E,disableTestConnection:R,formData:p,okText:g,schema:s.schema,serviceCategory:S,serviceName:null==t?void 0:t.name,serviceType:C,status:N,uiSchema:s.uiSchema,validator:r.Z,onCancel:k,onFocus:Z,onSubmit:A})}())}},62941:function(e,n,t){t.d(n,{Z:function(){return I}});var a=t(70655),r=t(79508),i=t(67336),o=t(71577),s=t(94184),u=t.n(s),l=t(23031),c=t(96486),p=t(67294),d=t(19894),f=t(97354),m=t(79690),b=t(98736),v=t(49101),w=t(16165),h=t(8645),x=function(e){var n=e.formContext,t=e.idSchema,a=e.title,r=e.canAdd,i=e.onAddClick,s=e.items;return p.createElement(p.Fragment,null,p.createElement("div",{className:"d-flex justify-between items-center"},p.createElement("label",{className:"control-label"},a),r&&p.createElement(o.Z,{"data-testid":"add-item-"+a,icon:p.createElement(v.Z,{style:{color:"white",fontSize:"12px"}}),id:""+t.$id,size:"small",type:"primary",onClick:i,onFocus:function(){(0,c.isUndefined)(n.handleFocus)||n.handleFocus(t.$id)}})),s.map((function(e,n){return p.createElement("div",{className:u()("d-flex items-center w-full",{"m-t-sm":n>0}),key:e.key+"-"+n},p.createElement("div",{className:"flex-1 array-fields"},e.children),e.hasRemove&&p.createElement(w.Z,{className:"w-7 h-0 m-l-sm",component:h.ReactComponent,onClick:function(n){e.onDropIndexClick(e.index)(n)}}))})))},g=t(68805),y=t(25074),E=t(2669),C=t(34041),S=function(e){var n,t=e.onFocus,r=e.onBlur,i=e.onChange,o=(0,a._T)(e,["onFocus","onBlur","onChange"]);return p.createElement(C.Z,{autoFocus:o.autofocus,className:"d-block w-full",disabled:o.disabled,id:o.id,mode:o.multiple?"multiple":"tags",placeholder:o.placeholder,value:o.value,onBlur:function(){return r(o.id,o.value)},onChange:function(e){return i(e)},onFocus:function(){return t(o.id,o.value)}},(null!==(n=o.options.enumOptions)&&void 0!==n?n:[]).map((function(e){return p.createElement(C.Z.Option,{key:(0,c.uniqueId)(),value:e.value},(0,c.capitalize)(e.label))})))},N=t(4107),k=function(e){var n=e.onFocus,t=e.onBlur,r=e.onChange,i=(0,a._T)(e,["onFocus","onBlur","onChange"]);return p.createElement(N.Z.Password,{autoComplete:"off",autoFocus:i.autofocus,disabled:i.disabled,id:i.id,name:i.name,placeholder:i.placeholder,readOnly:i.readonly,required:i.required,value:i.value,onBlur:function(){return t(i.id,i.value)},onChange:function(e){return r(e.target.value)},onFocus:function(){return n(i.id,i.value)}})},T=t(69523),Z=t(39873),I=function(e){var n=e.formData,t=e.schema,s=e.okText,v=e.cancelText,w=e.showFormHeader,h=void 0!==w&&w,C=e.status,N=void 0===C?"initial":C,I=e.onCancel,R=e.onSubmit,D=e.uiSchema,A=e.disableTestConnection,F=e.onFocus,P=e.serviceCategory,L=e.serviceType,O=e.serviceName,B=e.showTestConnection,V=void 0===B||B,_=e.useSelectWidget,G=void 0!==_&&_,Y=(0,a._T)(e,["formData","schema","okText","cancelText","showFormHeader","status","onCancel","onSubmit","uiSchema","disableTestConnection","onFocus","serviceCategory","serviceType","serviceName","showTestConnection","useSelectWidget"]),H=(0,d.w)().isAirflowAvailable,M=(0,p.useRef)(null),j=(0,a.CR)((0,p.useState)((0,b.jv)(null!=n?n:{})),2),W=j[0],J=j[1],q=(0,a.CR)((0,p.useState)(),2),z=q[0],U=q[1],$=(0,a.pi)({PasswordWidget:k},G&&{SelectWidget:S});return(0,p.useEffect)((function(){H&&(0,a.mG)(void 0,void 0,void 0,(function(){var e,n,t;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(0,f.ut)()];case 1:return e=a.sent(),n=e.status,t=e.data,U(200===n?(null==t?void 0:t.ip)||"[unknown]":void 0),[3,3];case 2:return a.sent(),U("[error - unknown]"),[3,3];case 3:return[2]}}))}))}),[H]),p.createElement(i.ZP,(0,a.pi)({focusOnFirstError:!0,noHtml5Validate:!0,omitExtraData:!0,className:u()("rjsf",Y.className,{"no-header":!h}),formContext:{handleFocus:F},formData:W,idSeparator:"/",ref:M,schema:t,showErrorList:!1,templates:{ArrayFieldTemplate:x,ObjectFieldTemplate:E.O,DescriptionFieldTemplate:g.Z,FieldErrorTemplate:y.u},transformErrors:m.O5,uiSchema:D,widgets:$,onChange:function(e){J(e.formData),Y.onChange&&Y.onChange(e)},onFocus:F,onSubmit:R},Y),(0,c.isEmpty)(t)&&p.createElement("div",{className:"text-grey-muted text-center"},(0,l.t)("message.no-config-available")),!(0,c.isEmpty)(t)&&H&&z&&p.createElement("div",{className:"d-flex justify-between bg-white global-border rounded-4 p-sm m-t-md","data-testid":"ip-address"},p.createElement("div",{className:"self-center"},(0,l.t)("message.airflow-host-ip-address",{hostIp:z}))),V&&!(0,c.isEmpty)(t)&&!(0,c.isUndefined)(W)&&H&&p.createElement(Z.Z,{connectionType:L,formData:W,isTestingDisabled:A,serviceCategory:P,serviceName:O,onValidateFormRequiredFields:function(){var e;return Boolean(null===(e=M.current)||void 0===e?void 0:e.validateForm())}}),p.createElement("div",{className:"m-t-lg d-flex justify-between"},p.createElement("div",null),p.createElement("div",{className:"text-right","data-testid":"buttons"},p.createElement(o.Z,{type:"link",onClick:function(){J((0,b.jv)(null!=n?n:{})),I&&I()}},v),"waiting"===N?p.createElement(o.Z,{disabled:!0,className:"p-x-md p-y-xxs h-auto rounded-6",type:"primary"},p.createElement(T.Z,{size:"small",type:"white"})):"success"===N?p.createElement(o.Z,{disabled:!0,className:"p-x-md p-y-xxs h-auto rounded-6",type:"primary"},p.createElement(r.Z,null)):p.createElement(o.Z,{className:"font-medium p-x-md p-y-xxs h-auto rounded-6","data-testid":"submit-btn",htmlType:"submit",type:"primary"},s))))}},88745:function(e,n,t){t.r(n),t.d(n,{default:function(){return fe}});var a=t(70655),r=t(96486),i=t(67294),o=t(68432),s=t(15137),u=t(19650),l=t(56256),c=t(23031),p=t(79686),d=t(19793),f=t(62761),m=t(96162),b=t(55846),v=t(31968),w=t(5302),h=t(19894),x=t(93895),g=t(96840),y=t(75838),E=t(40734),C=t(46321),S=t(7067),N=t(95137),k=t(86879),T=t(59842),Z=t(26387),I=t(56091),R=t(95235),D=t(49409),A=t(71577),F=t(16139),P=t(17309),L=t(79690),O=function(e){var n=e.serviceName,t=e.onBack,r=e.onNext,o=(0,a.CR)(D.Z.useForm(),1)[0],s=[{name:"name",id:"root/name",required:!0,label:(0,c.t)("label.service-name"),type:P.U.TEXT,rules:[{pattern:F.$Q,message:(0,c.t)("message.entity-name-validation")}],props:{"data-testid":"service-name"},placeholder:(0,c.t)("label.service-name"),formItemProps:{initialValue:n}},{name:"description",required:!1,label:(0,c.t)("label.description"),id:"root/description",type:P.U.DESCRIPTION,props:{"data-testid":"description",initialValue:""}}];return i.createElement(D.Z,{"data-testid":"configure-service-container",form:o,layout:"vertical",onFinish:function(e){var n;r({serviceName:e.name,description:null!==(n=e.description)&&void 0!==n?n:""})}},(0,L.GL)(s),i.createElement(u.Z,{className:"w-full justify-end"},i.createElement(A.Z,{"data-testid":"back-button",type:"link",onClick:t},(0,c.t)("label.back")),i.createElement(A.Z,{"data-testid":"next-button",htmlType:"submit",type:"primary"},(0,c.t)("label.next"))))},B=t(71230),V=t(15746),_=t(34041),G=t(79166),Y=t(94184),H=t.n(Y),M=t(89204),j=t(9113),W=t(87078),J=t(38212),q=t(59817),z=t(93379),U=t.n(z),$=t(7795),X=t.n($),K=t(90569),Q=t.n(K),ee=t(3565),ne=t.n(ee),te=t(19216),ae=t.n(te),re=t(44589),ie=t.n(re),oe=t(88366),se={};se.styleTagTransform=ie(),se.setAttributes=ne(),se.insert=Q().bind(null,"head"),se.domAPI=X(),se.insertStyleElement=ae(),U()(oe.Z,se),oe.Z&&oe.Z.locals&&oe.Z.locals;var ue=function(e){var n=e.serviceCategory,t=e.selectServiceType,s=e.showError,u=e.serviceCategoryHandler,l=e.handleServiceTypeClick,c=e.onCancel,p=e.onNext,d=(0,o.$)().t,m=(0,a.CR)((0,i.useState)(""),2),v=m[0],w=m[1],h=(0,a.CR)((0,i.useState)(""),2),g=h[0],y=h[1],E=(0,a.CR)((0,i.useState)([]),2),C=E[0],S=E[1],N=W.Z.getSupportedServiceFromList();(0,i.useEffect)((function(){var e=Object.values(M.u),t=e.includes(n)?n:e[0];w(t),S(N[t].filter((function(e){return!b.hD.find((function(n){return n===e}))})))}),[n]);var k=(0,i.useMemo)((function(){return C.filter((function(e){return!b.hD.includes(e)}))}),[C]);return i.createElement(B.Z,null,i.createElement(V.Z,{span:24},i.createElement(_.Z,{className:"w-full","data-testid":"service-category",id:"serviceCategory",options:b.qC,value:v,onChange:function(e){y(""),u(e)}})),i.createElement(V.Z,{className:"m-t-lg",span:24},i.createElement(q.Z,{removeMargin:!0,placeholder:d("label.search-for-type",{type:d("label.connector")}),searchValue:g,typingInterval:500,onSearch:function(e){y(e),S(N[n].filter((function(n){return n.toLowerCase().includes(e.toLowerCase())})))}}),i.createElement(B.Z,{className:"service-list-container","data-testid":"select-service"},k.map((function(e){return i.createElement(A.Z,{className:H()("service-box p-xs d-block border",{"border-primary":e===t}),"data-testid":e,key:e,onClick:function(){return l(e)}},i.createElement("div",{"data-testid":"service-icon"},(0,x.Y9)(e||"","h-9")),i.createElement("div",{className:"absolute",style:{right:"4px",top:"0px"}},e===t&&i.createElement(J.ZP,{alt:"checkbox",height:"14px",icon:J.PJ.CHECKBOX_PRIMARY})),i.createElement("p",{className:"w-full text-center m-t-md"},function(e){return e.includes("Custom")?(0,r.startCase)(e):e===j.M3.GluePipeline?"Glue Pipeline":e}(e),b.JC.includes(e)?i.createElement(G.Z,{className:"service-beta-tag",color:f.WZ,count:d("label.beta")}):null))}))),s&&(0,x.Ti)(d("message.field-text-is-required",{fieldText:d("label.service")}))),i.createElement(V.Z,{className:"d-flex justify-end mt-12",span:24},i.createElement(A.Z,{className:"m-r-xs","data-testid":"previous-button",type:"link",onClick:c},d("label.cancel")),i.createElement(A.Z,{className:"font-medium p-x-md p-y-xxs h-auto rounded-6","data-testid":"next-button",type:"primary",onClick:p},d("label.next"))))},le=function(e){var n=e.serviceCategory,t=e.onAddServiceSave,o=e.newServiceData,D=e.onAddIngestionSave,A=e.ingestionProgress,F=e.isIngestionCreated,P=e.isIngestionDeployed,L=e.ingestionAction,B=e.showDeployButton,V=e.onIngestionDeploy,_=e.slashedBreadcrumb,G=e.addIngestion,Y=e.handleAddIngestion,H=(0,s.k6)(),M=(0,N.Eu)().currentUser,j=(0,h.w)().fetchAirflowStatus,W=(0,a.CR)((0,i.useState)(b.E_),2),J=W[0],q=W[1],z=(0,a.CR)((0,i.useState)(1),2),U=z[0],$=z[1],X=(0,a.CR)((0,i.useState)(1),2),K=X[0],Q=X[1],ee=(0,a.CR)((0,i.useState)(""),2),ne=ee[0],te=ee[1],ae=(0,a.CR)((0,i.useState)({serviceName:"",description:""}),2),re=ae[0],ie=ae[1],oe=(0,a.CR)((0,i.useState)("initial"),2),se=oe[0],le=oe[1],ce=(0,a.CR)((0,i.useState)(""),2),pe=ce[0],de=ce[1],fe=function(){(0,r.isUndefined)(o)||H.push((0,f.LE)((0,E.Yd)(o.name),n))},me=function(e){(0,r.isEmpty)(e)||setTimeout((function(){de(e)}),50)},be=i.createElement("div",{"data-testid":"add-new-service-container"},ne?i.createElement(u.Z,{className:"p-b-xs"},(0,x.Y9)(ne||"","h-6")," ",i.createElement(l.Z,{className:"text-base","data-testid":"header"},ne+" "+(0,c.t)("label.service"))):i.createElement(l.Z,{className:"text-base p-b-xs","data-testid":"header"},(0,c.t)("label.add-new-entity-w",{entity:(0,c.t)("label.service-v")})),i.createElement(I.Z,{activeStep:U,steps:b.IL}),i.createElement("div",{className:"m-t-lg"},1===U&&i.createElement(ue,{handleServiceTypeClick:function(e){q((0,a.pi)((0,a.pi)({},J),{serviceType:!1})),ie({serviceName:"",description:""}),te(e)},selectServiceType:ne,serviceCategory:n,serviceCategoryHandler:function(e){q((0,a.pi)((0,a.pi)({},J),{serviceType:!1})),te(""),H.push((0,g.C1)(e))},showError:J.serviceType,onCancel:function(){H.push((0,g.si)(m.CZ.SERVICES,(0,y.tJ)(n)))},onNext:function(){ne?$(2):q((0,a.pi)((0,a.pi)({},J),{serviceType:!0}))}}),2===U&&i.createElement(O,{serviceName:re.serviceName,onBack:function(){return $(1)},onNext:function(e){ie(e),$(3)}}),3===U&&i.createElement(R.Z,{cancelText:(0,c.t)("label.back"),serviceCategory:n,serviceType:ne,status:se,onCancel:function(){return $(2)},onFocus:me,onSave:function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return e.formData?[4,(r=e.formData,(0,a.mG)(void 0,void 0,void 0,(function(){var e,n,i,o,s;return(0,a.Jh)(this,(function(u){switch(u.label){case 0:e={name:re.serviceName,serviceType:ne,description:re.description,owner:{id:null!==(o=null==M?void 0:M.id)&&void 0!==o?o:"",type:"user"}},n=(0,a.pi)((0,a.pi)({},e),{connection:{config:r}}),le("waiting"),u.label=1;case 1:return u.trys.push([1,4,5,6]),[4,t(n)];case 2:return u.sent(),$(4),[4,j()];case 3:return u.sent(),[3,6];case 4:return i=u.sent(),(null===(s=i.response)||void 0===s?void 0:s.status)===d.NL.CONFLICT?((0,C.Eo)((0,c.t)("server.entity-already-exist",{entity:(0,c.t)("label.service"),entityPlural:(0,c.t)("label.service-lowercase-plural"),name:re.serviceName})),[2]):[2,i];case 5:return le("initial"),[7];case 6:return[2]}}))})))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}var r}))}))}}),U>3&&i.createElement(T.Z,{showIngestionButton:!0,handleIngestionClick:function(){return Y(!0)},handleViewServiceClick:fe,name:re.serviceName,state:v.Y.ADD,suffix:(0,y.Yn)(n)})));(0,i.useEffect)((function(){de("")}),[K,U]);var ve=i.createElement("div",{className:"max-width-md w-9/10 service-form-container"},i.createElement(Z.Z,{titleLinks:_}),i.createElement("div",{className:"m-t-md"},G?i.createElement(S.Z,{activeIngestionStep:K,handleCancelClick:function(){return Y(!1)},handleViewServiceClick:fe,heading:""+(0,c.t)("label.add-workflow-ingestion",{workflow:(0,r.capitalize)(w.Hz.Metadata)}),ingestionAction:L,ingestionProgress:A,isIngestionCreated:F,isIngestionDeployed:P,pipelineType:w.Hz.Metadata,serviceCategory:n,serviceData:o,setActiveIngestionStep:function(e){return Q(e)},showDeployButton:B,status:v.Y.ADD,onAddIngestionSave:D,onFocus:me,onIngestionDeploy:V}):be));return i.createElement(p.Z,{firstPanel:{children:ve,minWidth:700,flex:.7},hideSecondPanel:!(ne&&3===U||G),pageTitle:(0,c.t)("label.add-entity",{entity:(0,c.t)("label.service-v")}),secondPanel:{children:i.createElement(k.Z,{activeField:pe,isWorkflow:G,serviceName:ne,serviceType:(0,y.rP)(n),workflowType:w.Hz.Metadata}),className:"service-doc-panel",minWidth:60,overlay:{displayThreshold:200,header:(0,c.t)("label.setup-guide"),rotation:"counter-clockwise"}}})},ce=t(28517),pe=t(97354),de=t(99166),fe=function(){var e=(0,o.$)().t,n=(0,s.UO)().serviceCategory,t=(0,a.CR)((0,i.useState)(),2),u=t[0],l=t[1],c=(0,a.CR)((0,i.useState)(0),2),p=c[0],d=c[1],b=(0,a.CR)((0,i.useState)(!1),2),v=b[0],w=b[1],h=(0,a.CR)((0,i.useState)(!1),2),x=h[0],E=h[1],S=(0,a.CR)((0,i.useState)(ce.g.CREATING),2),N=S[0],k=S[1],T=(0,a.CR)((0,i.useState)(""),2),Z=T[0],I=T[1],R=(0,a.CR)((0,i.useState)(!1),2),D=R[0],A=R[1],F=(0,a.CR)((0,i.useState)([]),2),P=F[0],L=F[1],O=(0,a.CR)((0,i.useState)(!1),2),B=O[0],V=O[1],_=function(n){return new Promise((function(t){w(!0),d(f.lB),k(ce.g.DEPLOYING),(0,pe.aw)(null!=n?n:Z).then((function(){E(!0),A(!1),d(f.$M),k(ce.g.DEPLOYED)})).catch((function(n){A(!0),k(ce.g.DEPLOYING_ERROR),(0,C.Eo)(n||e("server.deploy-entity-error",{entity:e("label.ingestion-workflow-lowercase")}))})).finally((function(){return t()}))}))};return(0,i.useEffect)((function(){L([{name:(0,r.startCase)(n),url:(0,g.si)(m.CZ.SERVICES,(0,y.tJ)(n))},{name:B?e("label.add-new-entity",{entity:e("label.ingestion")}):e("label.add-new-entity-w",{entity:e("label.service-v")}),url:"",activeTitle:!0}])}),[n,B]),i.createElement(le,{addIngestion:B,handleAddIngestion:function(e){V(e)},ingestionAction:N,ingestionProgress:p,isIngestionCreated:v,isIngestionDeployed:x,newServiceData:u,serviceCategory:n,showDeployButton:D,slashedBreadcrumb:P,onAddIngestionSave:function(n){return d(f.aN),new Promise((function(t,a){return(0,pe.XZ)(n).then((function(n){var r;n?(I(null!==(r=n.id)&&void 0!==r?r:""),_(n.id).finally((function(){return t()}))):((0,C.Eo)(e("server.create-entity-error",{entity:e("label.ingestion-workflow-lowercase")})),a())})).catch((function(r){(0,pe.ne)((null==u?void 0:u.name)+"."+n.name).then((function(n){if(!n)throw e("server.unexpected-response");t(),(0,C.Eo)(r,e("server.deploy-entity-error",{entity:e("label.ingestion-workflow-lowercase")}))})).catch((function(){(0,C.Eo)(r,e("server.create-entity-error",{entity:e("label.ingestion-workflow-lowercase")})),a()}))}))}))},onAddServiceSave:function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){var t;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,(0,de.WY)(n,e)];case 1:return t=a.sent(),l(t),[2]}}))}))},onIngestionDeploy:_})}}}]);