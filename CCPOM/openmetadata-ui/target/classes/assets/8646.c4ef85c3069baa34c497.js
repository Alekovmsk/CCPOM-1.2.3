"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[8646],{38646:function(e,t,n){n.r(t);var a=n(70655),r=n(96486),s=n(67294),u=n(68432),i=n(15137),c=n(5287),l=n(83716),o=n(80646),f=n(45270),v=n(69523),d=n(8752),h=n(79839),m=n(73213),C=n(62761),p=n(61105),b=n(36570),g=n(39570),E=n(96840);t.default=function(){var e=this,t=(0,u.$)().t,n=(0,i.k6)(),S=(0,i.UO)(),y=S.fqn,k=S.version,R=(0,d.BL)().getEntityPermissionByFqn,w=(0,a.CR)((0,s.useState)({}),2),P=w[0],B=w[1],I=(0,a.CR)((0,s.useState)(""),2),V=I[0],Z=I[1],J=(0,a.CR)((0,s.useState)(),2),N=J[0],A=J[1],F=(0,a.CR)((0,s.useState)(!1),2),G=F[0],L=F[1],T=(0,a.CR)((0,s.useState)(g.Bd),2),q=T[0],M=T[1],O=(0,a.CR)((0,s.useState)({}),2),x=O[0],Q=O[1],_=(0,a.CR)((0,s.useState)(C.j2),2),j=_[0],z=_[1],H=(0,a.CR)((0,s.useState)(!1),2),U=H[0],W=H[1],$=(0,a.CR)((0,s.useState)(!0),2),D=$[0],K=$[1],X=(0,a.CR)((0,s.useState)({}),2),Y=X[0],ee=X[1],te=(0,s.useMemo)((function(){return y.split(m.o)[0]}),[y]),ne=(0,s.useMemo)((function(){return q.ViewAll||q.ViewBasic}),[q]),ae=(0,s.useCallback)((function(){return(0,a.mG)(e,void 0,void 0,(function(){var e;return(0,a.Jh)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,,2,3]),L(!0),[4,R(h.A.CLASSIFICATION,te)];case 1:return e=t.sent(),M(e),[3,3];case 2:return L(!1),[7];case 3:return[2]}}))}))}),[te,R]),re=(0,s.useCallback)((function(t){return(0,a.mG)(e,void 0,void 0,(function(){var e;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,,3,4]),K(!0),ne?[4,(0,b.dz)(t,k)]:[3,2];case 1:e=n.sent(),B(e),n.label=2;case 2:return[3,4];case 3:return K(!1),[7];case 4:return[2]}}))}))}),[ne,k]),se=function(t,n){return(0,a.mG)(e,void 0,void 0,(function(){var e;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:W(!0),A([]),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,(0,b.NJ)({arrQueryFields:["usageCount"],parent:t,after:null==n?void 0:n.after,before:null==n?void 0:n.before,limit:C.IV})];case 2:return e=a.sent(),A(e.data),Q(e.paging),[3,5];case 3:return a.sent(),A([]),[3,5];case 4:return W(!1),[7];case 5:return[2]}}))}))},ue=(0,s.useCallback)((function(e){var t,n=e.cursorType,a=e.currentPage;if(n){var r=((t={})[n]=x[n],t.total=x.total,t);z(a),se(te,r)}}),[se,x,te]),ie=(0,s.useCallback)((function(e){void 0===e&&(e=k),n.push((0,E.CP)(te,(0,r.toString)(e)))}),[te]),ce=(0,s.useCallback)((function(){n.push((0,E.Bx)(te))}),[]);return(0,s.useEffect)((function(){(0,r.isEmpty)(te)||ae()}),[te]),(0,s.useEffect)((function(){ne&&(0,a.mG)(e,void 0,void 0,(function(){var e,t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:L(!0),n.label=1;case 1:return n.trys.push([1,,4,5]),[4,(0,b.al)(te)];case 2:return e=n.sent().id,Z(null!=e?e:""),[4,(0,b.Qq)(null!=e?e:"")];case 3:return t=n.sent(),ee(t),[3,5];case 4:return L(!1),[7];case 5:return[2]}}))}))}),[te,ne]),(0,s.useEffect)((function(){V&&re(V)}),[k,V]),(0,s.useEffect)((function(){(0,r.isEmpty)(P)||se(te)}),[P]),s.createElement(o.Z,{className:"version-page-container",pageTitle:t("label.entity-version-detail-plural",{entity:t("label.classification")})},G?s.createElement(v.Z,null):ne?s.createElement(s.Fragment,null,s.createElement("div",{className:"version-data"},D?s.createElement(v.Z,null):s.createElement(c.Z,{isVersionView:!0,classificationPermissions:q,currentClassification:P,currentPage:j,handlePageChange:ue,isTagsLoading:U,paging:x,tags:N})),s.createElement(f.Z,{currentVersion:(0,r.toString)(k),versionHandler:ie,versionList:Y,onBack:ce})):s.createElement(l.Z,{type:p.Wx.PERMISSION}))}}}]);