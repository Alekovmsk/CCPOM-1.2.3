"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[4417],{35741:function(e,t,n){var a=n(70655),i=n(50146),r=n(56256),s=n(67294),l=n(68432),o=n(97354),c=n(46321);t.Z=function(e){var t=e.pipelineId,n=e.pipelinName,u=e.isModalOpen,d=e.onClose,m=e.onIngestionWorkflowsUpdate,p=(0,l.$)().t,f=(0,a.CR)((0,s.useState)(!1),2),g=f[0],v=f[1];return s.createElement(i.Z,{destroyOnClose:!0,cancelText:p("label.cancel"),closable:!1,confirmLoading:g,"data-testid":"kill-modal",maskClosable:!1,okText:p("label.confirm"),title:p("label.kill")+" "+n+" ?",visible:u,onCancel:d,onOk:function(){return(0,a.mG)(void 0,void 0,void 0,(function(){var e;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:v(!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,(0,o.MX)(t)];case 2:return 200===a.sent().status&&(d(),(0,c.XA)(" "+p("message.kill-successfully")+"  "+n+"."),m()),[3,5];case 3:return e=a.sent(),(0,c.Eo)(e),[3,5];case 4:return v(!1),[7];case 5:return[2]}}))}))}},s.createElement(r.Z.Text,{"data-testid":"kill-modal-body"},p("message.kill-ingestion-warning")))}},78666:function(e,t,n){n.d(t,{Pm:function(){return o},Rw:function(){return l},V1:function(){return s}});var a,i=n(23031),r=n(5302),s=[{name:i.ZP.t("label.configure-entity",{entity:i.ZP.t("label.ingestion")}),step:1},{name:i.ZP.t("label.schedule-interval"),step:2}],l={ADD:"add",EDIT:"edit"},o=((a={})[r.Hz.DataInsight]="data-insight",a[r.Hz.Dbt]="dbt-lowercase",a[r.Hz.ElasticSearchReindex]="elastic-search-re-index",a[r.Hz.Lineage]="lineage",a[r.Hz.Metadata]="metadata",a[r.Hz.Profiler]="profiler",a[r.Hz.TestSuite]="test-suite",a[r.Hz.Usage]="usage",a[r.Hz.Application]="application",a)},52011:function(e,t,n){var a;n.d(t,{i:function(){return a}}),function(e){e.ON_DEMAND="on_demand",e.LIVE="live",e.SCHEDULE="schedule"}(a||(a={}))},54417:function(e,t,n){n.r(t),n.d(t,{default:function(){return at}});var a,i,r,s,l,o,c,u,d,m,p=n(70655),f=n(71230),g=n(15746),v=n(19650),E=n(94199),h=n(71577),y=n(25499),b=n(34901),C=n(96486),w=n(67294),S=n(68432),k=n(15137),N=n(52046),Z=n(88357),I=n(83716),A=n(39873),D=n(9600),R=n(12028),x=n(56256),T=n(76),P=n(24135),H=n(37565),M=n(62761),z=n(34530),O=n(802),G=n(30314),_=n(24671),V=n(46321),L=n(34115),U=function(){var e=(0,S.$)().t,t=(0,k.UO)().fqn,n=(0,p.CR)((0,w.useState)(),2),a=n[0],i=n[1],r=(0,p.CR)((0,w.useState)(!1),2),s=r[0],l=r[1],o=(0,O.C)(),c=o.currentPage,u=o.pageSize,d=o.paging,m=o.handlePageChange,v=o.handlePageSizeChange,E=o.handlePagingChange,h=o.showPagination,y=(0,p.CR)((0,w.useState)(!0),2),b=y[0],N=y[1],Z=(0,w.useMemo)((function(){return[{title:e("label.name"),dataIndex:"displayName",key:"displayName",width:350,render:function(e,t){var n=(0,_.C_)(t);return w.createElement("div",{className:"d-inline-flex w-max-90"},w.createElement(T.Link,{className:"break-word","data-testid":"data-model-"+n,to:(0,M.Tj)(t.fullyQualifiedName||"")},n))}},{title:e("label.description"),dataIndex:"description",key:"description",render:function(t){return!(0,C.isUndefined)(t)&&t.trim()?w.createElement(P.Z,{markdown:t}):w.createElement("span",{className:"text-grey-muted"},e("label.no-entity",{entity:e("label.description")}))}}]}),[]),A=(0,w.useCallback)((function(e){return(0,p.mG)(void 0,void 0,void 0,(function(){var n,a,r,l;return(0,p.Jh)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,3,4]),N(!0),[4,(0,G.R9)((0,p.pi)({service:t,limit:u,include:s?z.y.Deleted:z.y.NonDeleted},e))];case 1:return n=o.sent(),a=n.data,r=n.paging,i(a),E(r),[3,4];case 2:return l=o.sent(),(0,V.Eo)(l),i([]),E(M.OQ),[3,4];case 3:return N(!1),[7];case 4:return[2]}}))}))}),[t,u,s]);return(0,w.useEffect)((function(){A()}),[u,s]),w.createElement(f.Z,{gutter:[0,16]},w.createElement(g.Z,{className:"p-t-sm p-x-lg",span:24},w.createElement(f.Z,{justify:"end"},w.createElement(g.Z,null,w.createElement(R.Z,{checked:s,"data-testid":"show-deleted",onClick:function(e){l(e),m(M.j2),v(M.bu)}}),w.createElement(x.Z.Text,{className:"m-l-xs"},e("label.deleted"))," "))),w.createElement(g.Z,{className:"p-x-lg","data-testid":"table-container",span:24},w.createElement(H.Z,{bordered:!0,className:"mt-4 table-shadow",columns:Z,"data-testid":"data-models-table",dataSource:a,loading:b,locale:{emptyText:w.createElement(I.Z,{className:"m-y-md"})},pagination:!1,rowKey:"id",size:"small"})),w.createElement(g.Z,{className:"p-b-sm",span:24},h&&w.createElement(L.Z,{currentPage:c,pageSize:u,paging:d,pagingHandler:function(e){var t,n=e.cursorType,a=e.currentPage;n&&A(((t={})[n]=d[n],t)),m(a)},onShowSizeChange:v})))},J=n(76772),B=n(94184),F=n.n(B),q=n(65898),Q=n(40734),j=n(59817),K=n(50922),W=n(8752),$=n(79839),Y=n(13013),X=n(21952);!function(e){e.Auth0="auth0",e.AwsCognito="aws-cognito",e.Azure="azure",e.Basic="basic",e.CustomOidc="custom-oidc",e.Google="google",e.LDAP="ldap",e.NoAuth="no-auth",e.Okta="okta",e.Openmetadata="openmetadata",e.Saml="saml"}(a||(a={})),function(e){e.Batch="batch",e.Stream="stream"}(i||(i={})),function(e){e.En="EN",e.Jp="JP",e.Zh="ZH"}(r||(r={})),function(e){e.Airflow="airflow",e.Env="env",e.Noop="noop"}(s||(s={})),function(e){e.Aws="aws",e.AwsSsm="aws-ssm",e.InMemory="in-memory",e.ManagedAws="managed-aws",e.ManagedAwsSsm="managed-aws-ssm",e.Noop="noop"}(l||(l={})),function(e){e.Amundsen="Amundsen",e.Atlas="Atlas",e.MetadataES="MetadataES",e.OpenMetadata="OpenMetadata"}(o||(o={})),function(e){e.Ignore="ignore",e.NoSSL="no-ssl",e.Validate="validate"}(c||(c={})),function(e){e.Automated="Automated",e.Derived="Derived",e.Manual="Manual",e.Propagated="Propagated"}(u||(u={})),function(e){e.Autosystemclassification="Autosystemclassification",e.Classification="Classification",e.ClientCenter="ClientCenter",e.Dlaclassification="Dlaclassification",e.Glossary="Glossary",e.KnowledgeCenter="KnowledgeCenter",e.Spdclassification="Spdclassification",e.Usereskclassification="Usereskclassification"}(d||(d={})),function(e){e.Confirmed="Confirmed",e.Suggested="Suggested"}(m||(m={}));var ee=n(5302),te=n(50156),ne=n(96840),ae=function(e){var t=e.serviceDetails,n=e.pipelineType,a=e.serviceCategory,i=e.serviceName,r=e.ingestionData,s=e.ingestionList,l=e.permissions,c=(0,k.k6)(),u=(0,w.useMemo)((function(){var e,n;return(null===(n=null===(e=null==t?void 0:t.connection)||void 0===e?void 0:e.config)||void 0===n?void 0:n.type)===o.OpenMetadata}),[t]),d=(0,w.useMemo)((function(){return(0,te.Kz)(t)}),[t]),m=(0,w.useCallback)((function(e){c.push((0,ne.sT)(a,i,e))}),[a,i]),p=(0,w.useMemo)((function(){return r.some((function(e){return e.pipelineType===ee.Hz.DataInsight}))}),[r]),f=(0,w.useMemo)((function(){return(0,te.nH)(d,u,s,n)}),[n,d,u,s]),g=(0,w.useMemo)((function(){return s.find((function(e){return e.pipelineType===ee.Hz.Metadata}))}),[s]);return 0===f.length?null:w.createElement(Y.Z,{menu:{items:(0,te.vf)(f,p),onClick:function(e){m(e.key)}},placement:"bottomRight",trigger:["click"]},w.createElement(h.Z,{className:F()("h-8 rounded-4 m-b-xs"),"data-testid":"add-new-ingestion-button",disabled:!(null==l?void 0:l.Create),size:"small",type:"primary",onClick:g?void 0:function(){return m(n||ee.Hz.Metadata)}},w.createElement(v.Z,null,(0,te.Hl)(g,n),g&&w.createElement(X.ReactComponent,{height:14,width:14}))))},ie=n(92458),re=n.n(ie),se=n(12411),le=n(79508),oe=n(27049),ce=n(69523),ue=n(35741),de=n(93895),me=function(e){var t,n,a,i=this,r=e.record,s=e.ingestionPipelinesPermission,l=e.triggerIngestion,o=e.deployIngestion,c=e.deleteSelection,u=e.isRequiredDetailsAvailable,d=e.handleEnableDisableIngestion,m=e.serviceCategory,f=e.serviceName,g=e.handleDeleteSelection,E=e.handleIsConfirmationModalOpen,y=e.onIngestionWorkflowsUpdate,b=(0,k.k6)(),C=(0,S.$)().t,N=(0,p.CR)((0,w.useState)({id:"",state:""}),2),Z=N[0],I=N[1],A=(0,p.CR)((0,w.useState)({id:"",state:""}),2),D=A[0],R=A[1],x=(0,p.CR)((0,w.useState)({id:"",state:""}),2),P=x[0],H=x[1],M=(0,p.CR)((0,w.useState)(!1),2),z=M[0],O=M[1],G=(0,p.CR)((0,w.useState)(),2),_=G[0],L=G[1],U=function(e){R({id:e,state:"waiting"}),o(e).then((function(){R({id:e,state:"success"}),setTimeout((function(){return R({id:"",state:""})}),1500)})).catch((function(){return R({id:"",state:""})}))},J=function(e){return(0,p.mG)(i,void 0,void 0,(function(){return(0,p.Jh)(this,(function(t){switch(t.label){case 0:H({id:e,state:"waiting"}),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,d(e)];case 2:return t.sent(),H({id:e,state:"success"}),setTimeout((function(){return H({id:"",state:""})}),1e3),[3,4];case 3:return t.sent(),H({id:"",state:""}),[3,4];case 4:return[2]}}))}))},B=function(e){return!u||function(e){var t;return!(null===(t=null==s?void 0:s[e])||void 0===t?void 0:t.EditAll)}(e)};return w.createElement(w.Fragment,null,w.createElement(v.Z,{align:"center",size:0},r.enabled?w.createElement(w.Fragment,null,(a=r).deployed?w.createElement(w.Fragment,null,w.createElement(h.Z,{className:"p-x-xss","data-testid":"run",disabled:B(a.name),type:"link",onClick:function(){return e=a.id,t=a.name,(0,p.mG)(i,void 0,void 0,(function(){var n;return(0,p.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),I({id:e,state:"waiting"}),[4,l(e,t)];case 1:return a.sent(),I({id:e,state:"success"}),(0,V.XA)(C("message.pipeline-trigger-success-message")),setTimeout((function(){I({id:"",state:""})}),1500),[3,3];case 2:return n=a.sent(),I({id:"",state:""}),(0,V.Eo)(n,C("message.pipeline-trigger-failed-message")),[3,3];case 3:return[2]}}))}));var e,t}},(0,de.vc)(Z,a.id,C("label.run"))),w.createElement(oe.Z,{className:"border-gray",type:"vertical"}),w.createElement(h.Z,{className:"p-x-xss","data-testid":"re-deploy-btn",disabled:B(a.name),type:"link",onClick:function(){return U(a.id)}},(0,de.vc)(D,a.id,C("label.re-deploy")))):w.createElement(h.Z,{className:"p-x-xss","data-testid":"deploy",disabled:B(a.name),type:"link",onClick:function(){return U(a.id)}},(0,de.vc)(D,a.id,C("label.deploy"))),w.createElement(oe.Z,{className:"border-gray",type:"vertical"}),w.createElement(h.Z,{className:"p-x-xss","data-testid":"pause",disabled:B(r.name),type:"link",onClick:function(){return J(r.id||"")}},(0,de.vc)(P,r.id,C("label.pause")))):w.createElement(h.Z,{className:"p-x-xss","data-testid":"unpause",disabled:B(r.name),type:"link",onClick:function(){return J(r.id||"")}},(0,de.vc)(P,r.id,C("label.unpause"))),w.createElement(oe.Z,{className:"border-gray",type:"vertical"}),w.createElement(h.Z,{className:"p-x-xss","data-testid":"edit",disabled:B(r.name),type:"link",onClick:function(){return function(e){b.push((0,ne.fO)(m,f,(0,Q.Yd)(e.fullyQualifiedName||f+"."+e.name),e.pipelineType))}(r)}},C("label.edit")),w.createElement(oe.Z,{className:"border-gray",type:"vertical"}),w.createElement(h.Z,{className:"p-x-xss","data-testid":"delete",disabled:!(null===(t=null==s?void 0:s[r.name])||void 0===t?void 0:t.Delete),type:"link",onClick:function(){return e=r.id,t=r.name,g({id:e,name:t,state:""}),void E(!0);var e,t}},c.id!==r.id?C("label.delete"):"success"===c.state?w.createElement(le.Z,null):w.createElement(ce.Z,{size:"small",type:"default"})),w.createElement(oe.Z,{className:"border-gray",type:"vertical"}),w.createElement(h.Z,{className:"p-x-xss","data-testid":"kill",disabled:B(r.name),type:"link",onClick:function(){O(!0),L(r)}},C("label.kill")),w.createElement(oe.Z,{className:"border-gray",type:"vertical"}),w.createElement(T.Link,{to:(0,ne.Ht)(m,(null===(n=r.service)||void 0===n?void 0:n.name)||"",(0,Q.Yd)((null==r?void 0:r.fullyQualifiedName)||(null==r?void 0:r.name)||""))},w.createElement(h.Z,{className:"p-x-xss","data-testid":"logs",disabled:!u,type:"link",onClick:function(){L(r)}},C("label.log-plural")))),z&&_&&r.id===(null==_?void 0:_.id)&&w.createElement(ue.Z,{isModalOpen:z,pipelinName:_.name,pipelineId:_.id,onClose:function(){O(!1),L(void 0)},onIngestionWorkflowsUpdate:y}))},pe=function(e){var t=e.airflowEndpoint,n=e.triggerIngestion,a=e.deployIngestion,i=e.isRequiredDetailsAvailable,r=e.paging,s=e.handleEnableDisableIngestion,l=e.onIngestionWorkflowsUpdate,o=e.ingestionPipelinesPermission,c=e.serviceCategory,u=e.serviceName,d=e.handleDeleteSelection,m=e.handleIsConfirmationModalOpen,p=e.ingestionData,f=e.deleteSelection,g=e.permissions,h=e.pipelineType,y=e.isLoading,b=void 0!==y&&y,C=(0,S.$)().t,k=(0,O.C)(10),N=k.currentPage,Z=k.pageSize,I=k.handlePageChange,A=k.handlePageSizeChange,D=k.handlePagingChange,R=k.showPagination;(0,w.useEffect)((function(){D(r)}),[r]);var T=(0,w.useCallback)((function(e){var t=e.cursorType,n=e.currentPage;if(t){var a="&"+t+"="+r[t];l(a),I(n)}}),[r,I,l]),P=function(e,n){return t?w.createElement(E.Z,{title:g.ViewAll||g.ViewBasic?C("label.view-entity",{entity:C("label.dag")}):C("message.no-permission-to-view")},w.createElement(x.Z.Link,{className:"m-r-xs overflow-wrap-anywhere","data-testid":"ingestion-dag-link",disabled:!(g.ViewAll||g.ViewBasic),href:t+"/tree?dag_id="+e,rel:"noopener noreferrer",target:"_blank"},(0,_.C_)(n))):(0,_.C_)(n)},M=function(e,t){var n;return(null===(n=t.airflowConfig)||void 0===n?void 0:n.scheduleInterval)?w.createElement(E.Z,{placement:"bottom",title:re().toString(t.airflowConfig.scheduleInterval,{use24HourTimeFormat:!0,verbose:!0})},t.airflowConfig.scheduleInterval):w.createElement("span",null,"--")},z=function(e,t){return w.createElement(me,{deleteSelection:f,deployIngestion:a,handleDeleteSelection:d,handleEnableDisableIngestion:s,handleIsConfirmationModalOpen:m,ingestionPipelinesPermission:o,isRequiredDetailsAvailable:i,record:t,serviceCategory:c,serviceName:u,triggerIngestion:n,onIngestionWorkflowsUpdate:l})},G=(0,w.useMemo)((function(){return[{title:C("label.name"),dataIndex:"name",key:"name",width:500,render:P},{title:C("label.type"),dataIndex:"pipelineType",key:"pipelineType"},{title:C("label.schedule"),dataIndex:"schedule",key:"schedule",render:M},{title:C("label.recent-run-plural"),dataIndex:"recentRuns",key:"recentRuns",width:180,render:function(e,t){return w.createElement(se.K,{classNames:"align-middle",ingestion:t})}},{title:C("label.action-plural"),dataIndex:"actions",key:"actions",render:z}]}),[g,t,a,n,i,s,o,u,f,d,c,m,l,p]);return w.createElement(v.Z,{className:"m-b-md w-full","data-testid":"ingestion-table",direction:"vertical",size:"large"},w.createElement(H.Z,{bordered:!0,columns:G,"data-testid":"ingestion-list-table",dataSource:p,loading:b,locale:{emptyText:(0,te.z4)(i,p.length,h)},pagination:!1,rowKey:"name",size:"small"}),R&&w.createElement(L.Z,{currentPage:N,pageSize:Z,paging:r,pagingHandler:T,onShowSizeChange:A}))},fe=function(e){var t=e.airflowEndpoint,n=e.serviceName,a=e.serviceCategory,i=e.serviceDetails,r=e.ingestionList,s=e.isRequiredDetailsAvailable,l=e.deleteIngestion,o=e.triggerIngestion,c=e.deployIngestion,u=e.paging,d=e.handleEnableDisableIngestion,m=e.onIngestionWorkflowsUpdate,v=e.permissions,E=e.pipelineType,h=e.displayAddIngestionButton,y=void 0===h||h,b=e.handleIngestionDataChange,k=e.pipelineNameColWidth,N=e.containerClassName,Z=e.isAirflowAvailable,I=void 0===Z||Z,A=e.isLoading,D=(0,S.$)().t,R=(0,W.BL)().getEntityPermissionByFqn,x=(0,p.CR)((0,w.useState)(""),2),T=x[0],P=x[1],H=(0,p.CR)((0,w.useState)(!1),2),M=H[0],z=H[1],O=(0,p.CR)((0,w.useState)({id:"",name:"",state:""}),2),G=O[0],_=O[1],L=(0,w.useCallback)((function(e){return _(e)}),[_]),U=(0,w.useCallback)((function(e){return z(e)}),[_]),B=(0,p.CR)((0,w.useState)(r),2),Y=B[0],X=B[1],ee=(0,p.CR)((0,w.useState)(),2),te=ee[0],ne=ee[1],ie=function(){z(!1),_({id:"",name:"",state:""})},re=(0,w.useMemo)((function(){return s&&v.EditAll&&y}),[s,v,y]);return(0,w.useEffect)((function(){var e,t;t=(e=(0,C.lowerCase)(T))?r.filter((function(t){return(0,C.lowerCase)(t.displayName).includes(e)||(0,C.lowerCase)(t.name).includes(e)})):r,X(t),!(0,C.isUndefined)(b)&&b(t)}),[T,r]),(0,w.useEffect)((function(){(0,p.mG)(void 0,void 0,void 0,(function(){var e,t,n,a;return(0,p.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),e=r.map((function(e){return R($.A.INGESTION_PIPELINE,(0,Q.Yd)(e.name))})),[4,Promise.allSettled(e)];case 1:return t=i.sent(),n=t.reduce((function(e,t,n){var a;return(0,p.pi)((0,p.pi)({},e),((a={})[null==r?void 0:r[n].name]="fulfilled"===t.status?t.value:{},a))}),{}),ne(n),[3,3];case 2:return a=i.sent(),(0,V.Eo)(a),[3,3];case 3:return[2]}}))}))}),[r]),I?w.createElement("div",{"data-testid":"ingestion-container"},w.createElement(f.Z,{className:F()("mt-4",null!=N?N:""),"data-testid":"ingestion-details-container"},w.createElement(g.Z,{span:24},!s&&w.createElement(J.Z,{showIcon:!0,className:"mb-4",message:D("message.no-service-connection-details-message",{serviceName:n}),type:"error"})),w.createElement(g.Z,{className:"d-flex justify-between",span:24},w.createElement("div",{className:"w-max-400 w-full"},T||!(0,C.isEmpty)(Y)?w.createElement(j.Z,{placeholder:D("message.search-for-ingestion")+"...",searchValue:T,typingInterval:500,onSearch:function(e){P(e)}}):null),w.createElement("div",{className:"relative"},re&&w.createElement(ae,{ingestionData:Y,ingestionList:r,permissions:v,pipelineType:E,serviceCategory:a,serviceDetails:i,serviceName:n}))),w.createElement(g.Z,{span:24},w.createElement(pe,{airflowEndpoint:t,deleteSelection:G,deployIngestion:c,handleDeleteSelection:L,handleEnableDisableIngestion:d,handleIsConfirmationModalOpen:U,ingestionData:Y,ingestionPipelinesPermission:te,isLoading:A,isRequiredDetailsAvailable:s,paging:u,permissions:v,pipelineNameColWidth:k,pipelineType:E,serviceCategory:a,serviceName:n,triggerIngestion:o,onIngestionWorkflowsUpdate:m}))),w.createElement(K.Z,{entityName:G.name,entityType:D("label.ingestion-lowercase"),loadingState:G.state,visible:M,onCancel:ie,onConfirm:function(){return e=G.id,t=G.name,_({id:e,name:t,state:"waiting"}),void l(e,t).then((function(){setTimeout((function(){_({id:e,name:t,state:"success"}),ie()}),500)})).catch((function(){ie()}));var e,t}})):w.createElement(q.Z,null)},ge=n(80646),ve=n(68628),Ee=n(91894),he=n(10815),ye=n(55846),be=n(64632),Ce=n(24959),we=n(98461),Se=n(62560),ke=n(73954),Ne=n(26813),Ze=n(27800),Ie=n(50162),Ae=n(87078),De=function(e){var t=e.connectionDetails,n=e.serviceCategory,a=e.serviceFQN,i=(0,p.CR)((0,w.useState)({}),2),r=i[0],s=i[1],l=(0,p.CR)((0,w.useState)(),2),o=l[0],c=l[1],u=function(e,t){return Object.keys(e).map((function(a){var i,s,l,o=e[a];if(!(0,C.isObject)(o)){if(a in ye.lR||(0,C.isNull)(o))return null;var c=t[a]?t[a]:{},d=c.description,m=c.format,p=c.title;return w.createElement(g.Z,{key:a,span:12},w.createElement(f.Z,null,w.createElement(g.Z,{className:"d-flex items-center",span:8},w.createElement(v.Z,{size:0},w.createElement("p",{className:"text-grey-muted m-0"},a||p,":"),w.createElement(E.Z,{position:"bottom",title:d,trigger:"hover"},w.createElement(ve.Z,{className:"m-x-xss",style:{color:"#C4C4C4"}})))),w.createElement(g.Z,{span:16},w.createElement(he.default,{readOnly:!0,className:"w-full border-none",type:"password"!==m?"text":"password",value:o}))))}if(n.slice(0,-1)===be.py.PIPELINE_SERVICE&&"connection"===a){var h=t[a].oneOf.filter((function(e){return e.title===o.type+"Connection"}))[0].properties;return u(o,h)}if(n.slice(0,-1)===be.py.DATABASE_SERVICE&&"credentials"===a)return h=t[a].definitions.gcpCredentialsPath,u(o,h);if(n.slice(0,-1)!==be.py.DATABASE_SERVICE||"configSource"!==a)return n.slice(0,-1)===be.py.METADATA_SERVICE&&"securityConfig"===a?(h=t[a].oneOf.filter((function(e){return e.title===ye.mf}))[0].properties,u(o,h)):n.slice(0,-1)===be.py.DASHBOARD_SERVICE&&"githubCredentials"===a?(h=null===(l=t[a].oneOf.find((function(e){return"GitHubCredentials"===e.title})))||void 0===l?void 0:l.properties,u(o,h)):u(o,t[a]&&t[a].properties?t[a].properties:{});if((0,C.isObject)(o.securityConfig)){if(o.securityConfig.gcpConfig)return(0,C.isObject)(o.securityConfig.gcpConfig)?u(o.securityConfig.gcpConfig,(0,C.get)(r,"definitions.GCPConfig.properties.securityConfig.definitions.GCPValues.properties",{})):u(o,(0,C.get)(r,"definitions.GCPConfig.properties.securityConfig.definitions.gcpCredentialsPath",{}));if(Object.keys(t[a]).includes("oneOf")){if((null===(i=o.securityConfig)||void 0===i?void 0:i.awsAccessKeyId)||(null===(s=o.securityConfig)||void 0===s?void 0:s.awsSecretAccessKey))return u(o.securityConfig,(0,C.get)(r,"definitions.S3Config.properties.securityConfig.properties",{}))}else if(Object.keys(t[a]).includes("$ref")){var y=t[a].$ref.split("/").splice(2);h=r.definitions[y];return u(o,h)}}}))};return(0,w.useEffect)((function(){switch(n.slice(0,-1)){case be.py.DATABASE_SERVICE:s((0,we.c)(a).schema);break;case be.py.DASHBOARD_SERVICE:s((0,Ce.n)(a).schema);break;case be.py.MESSAGING_SERVICE:s((0,Se.m)(a).schema);break;case be.py.PIPELINE_SERVICE:s((0,Ze.o)(a).schema);break;case be.py.MLMODEL_SERVICE:s((0,Ne.$)(a).schema);break;case be.py.METADATA_SERVICE:s((0,ke.J)(a).schema);break;case be.py.STORAGE_SERVICE:s(Ae.Z.getStorageServiceConfig(a).schema);break;case be.py.SEARCH_SERVICE:s((0,Ie.C)(a).schema)}}),[n,a]),(0,w.useEffect)((function(){(0,C.isEmpty)(r)||c(u(t,r.properties))}),[r]),w.createElement(Ee.Z,null,w.createElement("div",{className:"d-flex flex-wrap p-xss","data-testid":"service-connection-details"},w.createElement(f.Z,{className:"w-full",gutter:[8,8]},o)))},Re=n(67167),xe=n(61105),Te=n(89204),Pe=n(55726),He=n(85087),Me=n(19894),ze=n(16909),Oe=n(97354),Ge=n(39117),_e=n(42395),Ve=n(52009),Le=n(51513),Ue=n(99166),Je=n(62273),Be=n(8277),Fe=n(39570),qe=n(75838),Qe=n(73553),je=n(25213),Ke=n(113),We=n(33873),$e=n(71406),Ye=n(1727),Xe=n(90058),et=n(52866),tt=n(38333),nt=function(e){var t,n,a,i,r,s=this,l=e.serviceName,o=e.servicePermission,c=e.onDescriptionUpdate,u=e.showDeleted,d=e.onShowDeletedChange,m=e.data,E=e.isServiceLoading,h=e.paging,y=e.pagingHandler,b=e.currentPage,N=e.serviceDetails,Z=e.saveUpdatedServiceData,A=(0,S.$)().t,D=(0,k.UO)(),T=D.fqn,P=D.serviceCategory,H=(0,p.CR)((0,w.useState)(!1),2),z=H[0],O=H[1],G=(0,tt.Zk)(null!==(t=null==N?void 0:N.tags)&&void 0!==t?t:[]),_=(0,tt.nD)(null!==(n=null==N?void 0:N.tags)&&void 0!==n?n:[]),V=function(e){return(0,p.mG)(s,void 0,void 0,(function(){var t,n;return(0,p.Jh)(this,(function(a){switch(a.label){case 0:return e?(t=(0,p.ev)((0,p.ev)([],(0,p.CR)(G?[G]:[])),(0,p.CR)(e)),n=(0,p.pi)((0,p.pi)({},N),{tags:t}),[4,Z(n)]):[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))},U=function(e){return(0,p.mG)(s,void 0,void 0,(function(){var t,n;return(0,p.Jh)(this,(function(a){switch(a.label){case 0:return e?(t=(null==_?void 0:_.filter((function(t){return e.map((function(e){return e.tagFQN})).includes(null==t?void 0:t.tagFQN)})))||[],n=(0,Qe.eY)(e.filter((function(e){return!(null==t?void 0:t.map((function(e){return e.tagFQN})).includes(e.tagFQN))}))),[4,V((0,p.ev)((0,p.ev)([],(0,p.CR)(t)),(0,p.CR)(n)))]):[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))},J=(0,w.useCallback)((function(e){return(0,p.mG)(s,void 0,void 0,(function(){return(0,p.Jh)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,3,4]),[4,c(e)];case 1:case 2:return t.sent(),[3,4];case 3:return O(!1),[7];case 4:return[2]}}))}))}),[]),B=(0,w.useMemo)((function(){return(0,et.u)(P)}),[P]),F=(0,w.useMemo)((function(){return(0,qe.Yz)(P)}),[P]),q=(0,w.useMemo)((function(){return{editTagsPermission:(o.EditTags||o.EditAll)&&!N.deleted,editDescriptionPermission:(o.EditDescription||o.EditAll)&&!N.deleted}}),[o,N]),Q=q.editTagsPermission,j=q.editDescriptionPermission;return w.createElement(f.Z,{gutter:[0,16],wrap:!1},w.createElement(g.Z,{className:"p-t-sm m-x-lg",flex:"auto"},w.createElement(f.Z,{gutter:[16,16]},w.createElement(g.Z,{"data-testid":"description-container",span:24},w.createElement(Ke.Z,{description:N.description,entityFqn:T,entityName:l,entityType:F,hasEditAccess:j,isEdit:z,showActions:!N.deleted,showCommentsIcon:!1,onCancel:function(){O(!1)},onDescriptionEdit:function(){O(!0)},onDescriptionUpdate:J})),w.createElement(g.Z,{span:24},w.createElement(f.Z,{justify:"end"},w.createElement(g.Z,null,w.createElement(R.Z,{checked:u,"data-testid":"show-deleted",onClick:d}),w.createElement(x.Z.Text,{className:"m-l-xs"},A("label.deleted"))," "))),w.createElement(g.Z,{"data-testid":"table-container",span:24},w.createElement(v.Z,{className:"w-full m-b-md",direction:"vertical",size:"large"},E?w.createElement(ce.Z,null):w.createElement(je.Z,{bordered:!0,columns:B,"data-testid":"service-children-table",dataSource:m,locale:{emptyText:w.createElement(I.Z,{className:"m-y-md"})},pagination:!1,rowKey:"id",size:"small"}),Boolean(!(0,C.isNil)(h.after)||!(0,C.isNil)(h.before))&&!(0,C.isEmpty)(m)&&w.createElement(L.Z,{currentPage:b,pageSize:M.IV,paging:h,pagingHandler:y}))))),w.createElement(g.Z,{className:"entity-tag-right-panel-container","data-testid":"entity-right-panel",flex:"320px"},w.createElement(v.Z,{className:"w-full",direction:"vertical",size:"large"},F!==be.py.METADATA_SERVICE&&w.createElement(We.Z,{activeDomain:null===(a=N)||void 0===a?void 0:a.domain,dataProducts:null!==(r=null===(i=N)||void 0===i?void 0:i.dataProducts)&&void 0!==r?r:[],hasPermission:!1}),w.createElement($e.Z,{displayType:Ye.F.READ_MORE,entityFqn:T,entityType:F,permission:Q,selectedTags:_,showTaskHandler:!1,tagType:Xe.c6.Classification,onSelectionChange:U}),w.createElement($e.Z,{displayType:Ye.F.READ_MORE,entityFqn:T,entityType:F,permission:Q,selectedTags:_,showTaskHandler:!1,tagType:Xe.c6.Glossary,onSelectionChange:U}))))},at=function(){var e=(0,S.$)().t,t=(0,Me.w)().isAirflowAvailable,n=(0,k.UO)(),a=n.fqn,i=n.serviceCategory,r=n.tab,s=(0,w.useMemo)((function(){return(0,Q.p2)(a)}),[a]),l=(0,w.useMemo)((function(){return i===Te.u.METADATA_SERVICES}),[i]),o=(0,w.useMemo)((function(){return r||(l?be.M8.INGESTIONS:(0,qe.Vc)(i).toLowerCase())}),[r,i,l]),c=(0,w.useMemo)((function(){return a===ye.rn}),[a]),u=(0,W.BL)().getEntityPermissionByFqn,d=(0,k.k6)(),m=(0,He.a)().isAdminUser,R=(0,p.CR)((0,w.useState)({}),2),x=R[0],T=R[1],P=(0,p.CR)((0,w.useState)([]),2),H=P[0],O=P[1],L=(0,p.CR)((0,w.useState)(!c),2),J=L[0],B=L[1],F=(0,p.CR)((0,w.useState)(!1),2),q=F[0],j=F[1],K=(0,p.CR)((0,w.useState)(!0),2),$=K[0],Y=K[1],X=(0,p.CR)((0,w.useState)(M.OQ),2),ee=X[0],te=X[1],ae=(0,p.CR)((0,w.useState)(M.OQ),2),ie=ae[0],re=ae[1],se=(0,p.CR)((0,w.useState)([]),2),le=se[0],oe=se[1],ue=(0,p.CR)((0,w.useState)({}),2),me=ue[0],pe=ue[1],ve=(0,p.CR)((0,w.useState)(!1),2),Ee=ve[0],he=ve[1],Ce=(0,p.CR)((0,w.useState)(),2),we=Ce[0],Se=Ce[1],ke=(0,p.CR)((0,w.useState)(),2),Ne=ke[0],Ze=ke[1],Ie=(0,p.CR)((0,w.useState)(Fe.Bd),2),Ae=Ie[0],je=Ie[1],Ke=(0,p.CR)((0,w.useState)(M.j2),2),We=Ke[0],$e=Ke[1],Ye=(0,w.useCallback)((function(e){he(e),$e(M.j2)}),[]),Xe=(0,w.useMemo)((function(){return(0,qe.jz)(i)}),[i]),et=(0,w.useMemo)((function(){return x}),[x]),tt=et.version,at=et.deleted,it=(0,w.useMemo)((function(){return!Ae.EditAll||l&&a===ye.rn||(0,C.isUndefined)(Ne)}),[Ae,i,a,Ne,l]),rt=(0,w.useCallback)((function(){d.push((0,ne.Pj)(null!=i?i:"",null!=a?a:""))}),[i,a]),st=(0,w.useCallback)((function(e){e!==o&&d.push({pathname:(0,M.LE)(a,i,e)})}),[o,a,i]),lt=(0,w.useCallback)((function(){return(0,p.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,p.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,Ge.oQ)()];case 1:return e=n.sent(),Se(null!==(t=e.apiEndpoint)&&void 0!==t?t:""),[3,3];case 2:return n.sent(),[3,3];case 3:return[2]}}))}))}),[]),ot=(0,w.useCallback)((function(e){return(0,p.mG)(void 0,void 0,void 0,(function(){var t;return(0,p.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),j(!0),[4,(0,Oe.Pj)({arrQueryFields:["owner","pipelineStatuses"],serviceFilter:s,paging:e,pipelineType:[Pe.Hz.Metadata,Pe.Hz.Usage,Pe.Hz.Lineage,Pe.Hz.Profiler,Pe.Hz.Dbt]})];case 1:return(t=n.sent()).data?(oe(t.data),pe(t.paging)):pe({}),[3,4];case 2:return n.sent(),[3,4];case 3:return j(!1),[7];case 4:return[2]}}))}))}),[s,ie]),ct=(0,w.useCallback)((function(e,t,n,a){var i,r;void 0===a&&(a=!1);var s=le.findIndex((function(t){return t.id===e})),l=(0,C.isUndefined)(t)?null:(0,p.pi)((0,p.pi)({},le[s]),((i={})[n]=t[n],i)),o=a?le.filter((function(e,t){return t!==s})):void 0,c=l?Object.assign((0,p.ev)([],(0,p.CR)(le)),((r={})[s]=l,r)):(0,p.ev)([],(0,p.CR)(le));oe(null!=o?o:c)}),[le]),ut=(0,w.useCallback)((function(t,n){return(0,p.mG)(void 0,void 0,void 0,(function(){var a;return(0,p.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,3,4]),[4,(0,Oe.FD)(t)];case 1:return a=i.sent(),ct(t,a,"pipelineStatuses"),[3,4];case 2:return i.sent(),(0,V.Eo)(e("server.ingestion-workflow-operation-error",{operation:e("label.triggering-lowercase"),displayName:n})),[3,4];case 3:return B(!1),[7];case 4:return[2]}}))}))}),[ct]),dt=(0,w.useCallback)((function(t){return(0,p.mG)(void 0,void 0,void 0,(function(){var n;return(0,p.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(0,Oe.aw)(t)];case 1:return(n=a.sent()).data&&setTimeout((function(){ct(t,n.data,"fullyQualifiedName"),B(!1)}),500),[3,3];case 2:return a.sent(),(0,V.Eo)(e("server.entity-updating-error",{entity:e("label.ingestion-workflow-lowercase")})),[3,3];case 3:return[2]}}))}))}),[ct]),mt=(0,w.useCallback)((function(t){return(0,p.mG)(void 0,void 0,void 0,(function(){var n,a;return(0,p.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,(0,Oe.g6)(t)];case 1:return(n=i.sent()).data&&ct(t,n.data,"enabled"),[3,3];case 2:return a=i.sent(),(0,V.Eo)(a,e("server.unexpected-response")),[3,3];case 3:return[2]}}))}))}),[ct]),pt=(0,w.useCallback)((function(t,n){return(0,p.mG)(void 0,void 0,void 0,(function(){var a;return(0,p.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,3,4]),[4,(0,Oe.cB)(t)];case 1:return i.sent(),oe((function(e){return e.filter((function(e){return e.id!==t}))})),pe((function(e){return(0,p.pi)((0,p.pi)({},e),{total:e.total>0?e.total-1:0})})),[3,4];case 2:return a=i.sent(),(0,V.Eo)(a,e("server.ingestion-workflow-operation-error",{operation:e("label.deleting-lowercase"),displayName:n})),[3,4];case 3:return B(!1),[7];case 4:return[2]}}))}))}),[]),ft=(0,w.useMemo)((function(){return Ee?z.y.Deleted:z.y.NonDeleted}),[Ee]),gt=(0,w.useCallback)((function(e){return(0,p.mG)(void 0,void 0,void 0,(function(){var t,n,a;return(0,p.Jh)(this,(function(i){switch(i.label){case 0:return[4,(0,ze.Cp)(s,"owner,tags,usageSummary",e,ft)];case 1:return t=i.sent(),n=t.data,a=t.paging,O(n),re(a),[2]}}))}))}),[s,ft]),vt=(0,w.useCallback)((function(e){return(0,p.mG)(void 0,void 0,void 0,(function(){var t,n,a;return(0,p.Jh)(this,(function(i){switch(i.label){case 0:return[4,(0,Be.BB)(s,"owner,tags",e,ft)];case 1:return t=i.sent(),n=t.data,a=t.paging,O(n),re(a),[2]}}))}))}),[s,ft]),Et=(0,w.useCallback)((function(e){return(0,p.mG)(void 0,void 0,void 0,(function(){var t,n,a;return(0,p.Jh)(this,(function(i){switch(i.label){case 0:return[4,(0,G.YK)(s,"owner,usageSummary,tags",e,ft)];case 1:return t=i.sent(),n=t.data,a=t.paging,O(n),re(a),[2]}}))}))}),[s,ft]),ht=(0,w.useCallback)((function(e){return(0,p.mG)(void 0,void 0,void 0,(function(){var t,n;return(0,p.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),Y(!0),[4,(0,G.R9)((0,p.pi)({service:s,fields:"owner,tags,followers",include:ft},e))];case 1:return t=a.sent().paging,te(t),[3,3];case 2:return n=a.sent(),(0,V.Eo)(n),re(M.OQ),[3,3];case 3:return[2]}}))}))}),[s,ft]),yt=(0,w.useCallback)((function(e){return(0,p.mG)(void 0,void 0,void 0,(function(){var t,n,a;return(0,p.Jh)(this,(function(i){switch(i.label){case 0:return[4,(0,Ve.qk)(s,"owner,tags",e,ft)];case 1:return t=i.sent(),n=t.data,a=t.paging,O(n),re(a),[2]}}))}))}),[s,ft]),bt=(0,w.useCallback)((function(e){return(0,p.mG)(void 0,void 0,void 0,(function(){var t,n,a;return(0,p.Jh)(this,(function(i){switch(i.label){case 0:return[4,(0,_e.hx)(s,"owner,tags",e,ft)];case 1:return t=i.sent(),n=t.data,a=t.paging,O(n),re(a),[2]}}))}))}),[s,ft]),Ct=(0,w.useCallback)((function(e){return(0,p.mG)(void 0,void 0,void 0,(function(){var t;return(0,p.Jh)(this,(function(n){switch(n.label){case 0:return[4,(0,Je.yt)({service:s,fields:"owner,tags",paging:e,root:!0,include:ft})];case 1:return t=n.sent(),O(t.data),re(t.paging),[2]}}))}))}),[s,ft]),wt=(0,w.useCallback)((function(e){return(0,p.mG)(void 0,void 0,void 0,(function(){var t;return(0,p.Jh)(this,(function(n){switch(n.label){case 0:return[4,(0,Le.dD)({service:s,fields:"owner,tags",paging:e,root:!0,include:ft})];case 1:return t=n.sent(),O(t.data),re(t.paging),[2]}}))}))}),[s,ft]),St=(0,w.useCallback)((function(e){return(0,p.mG)(void 0,void 0,void 0,(function(){return(0,p.Jh)(this,(function(t){switch(t.label){case 0:switch(t.trys.push([0,17,18,19]),Y(!0),i){case Te.u.DATABASE_SERVICES:return[3,1];case Te.u.MESSAGING_SERVICES:return[3,3];case Te.u.DASHBOARD_SERVICES:return[3,5];case Te.u.PIPELINE_SERVICES:return[3,7];case Te.u.ML_MODEL_SERVICES:return[3,9];case Te.u.STORAGE_SERVICES:return[3,11];case Te.u.SEARCH_SERVICES:return[3,13]}return[3,15];case 1:return[4,gt(e)];case 2:case 4:case 6:case 8:case 10:case 12:case 14:return t.sent(),[3,16];case 3:return[4,vt(e)];case 5:return[4,Et(e)];case 7:return[4,yt(e)];case 9:return[4,bt(e)];case 11:return[4,Ct(e)];case 13:return[4,wt(e)];case 15:return[3,16];case 16:return[3,19];case 17:return t.sent(),O([]),re(M.OQ),[3,19];case 18:return Y(!1),[7];case 19:return[2]}}))}))}),[i,gt,vt,Et,yt,bt,Ct,wt]),kt=(0,w.useCallback)((function(){return(0,p.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,p.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),B(!0),[4,(0,Ue.dO)(i,a,"owner,tags,"+(l?"":"domain"),z.y.All)];case 1:return e=n.sent(),T(e),Ze(null===(t=e.connection)||void 0===t?void 0:t.config),[3,4];case 2:return n.sent(),[3,4];case 3:return B(!1),[7];case 4:return[2]}}))}))}),[i,a,St,l]);(0,w.useEffect)((function(){St()}),[o,Ee,at]),(0,w.useEffect)((function(){i===Te.u.DASHBOARD_SERVICES&&ht({limit:0})}),[]),(0,w.useEffect)((function(){(Ae.ViewAll||Ae.ViewBasic)&&kt()}),[a,i,Ae]);var Nt=(0,w.useCallback)((function(e){return(0,p.mG)(void 0,void 0,void 0,(function(){var t,n,a,r;return(0,p.Jh)(this,(function(s){switch(s.label){case 0:if((0,C.isEmpty)(x))return[2];t=(0,p.pi)((0,p.pi)({},x),{displayName:e.displayName}),n=(0,b.qu)(x,t),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(0,Ue.ws)(i,x.id,n)];case 2:return a=s.sent(),T((function(e){return(0,p.pi)((0,p.pi)({},e),{displayName:a.displayName})})),[3,4];case 3:return r=s.sent(),(0,V.Eo)(r),[3,4];case 4:return[2]}}))}))}),[x,i]),Zt=function(e){return(0,p.mG)(void 0,void 0,void 0,(function(){var t,n,a,r;return(0,p.Jh)(this,(function(s){switch(s.label){case 0:if(x.description===e||(0,C.isEmpty)(x))return[3,4];t=(0,p.pi)((0,p.pi)({},x),{description:e}),n=(0,b.qu)(x,t),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(0,Ue.ws)(i,x.id,n)];case 2:return a=s.sent(),T(a),[3,4];case 3:return r=s.sent(),(0,V.Eo)(r),[3,4];case 4:return[2]}}))}))},It=(0,w.useCallback)((function(t){return(0,p.mG)(void 0,void 0,void 0,(function(){var n,a,r,s,l;return(0,p.Jh)(this,(function(o){switch(o.label){case 0:n=(0,p.pi)((0,p.pi)({},x),{owner:t}),a=(0,b.qu)(x,n),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,Ue.ws)(i,null!==(l=null==x?void 0:x.id)&&void 0!==l?l:"",a)];case 2:return r=o.sent(),T(r),[3,4];case 3:return s=o.sent(),(0,V.Eo)(s,e("server.entity-updating-error",{entity:e("label.owner-lowercase")})),[3,4];case 4:return[2]}}))}))}),[x,i]),At=(0,w.useCallback)((function(e){return(0,p.mG)(void 0,void 0,void 0,(function(){var t,n,a,r,s;return(0,p.Jh)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),t=[],x&&(t=(0,b.qu)(x,e)),[4,(0,Ue.ws)(i,null!==(r=x.id)&&void 0!==r?r:"",t)];case 1:return n=l.sent(),T((0,p.pi)((0,p.pi)({},n),{tags:(0,de.ch)(null!==(s=n.tags)&&void 0!==s?s:[])})),[3,3];case 2:return a=l.sent(),(0,V.Eo)(a),[3,3];case 3:return[2]}}))}))}),[x,i]),Dt=(0,w.useCallback)((function(e){return(0,p.mG)(void 0,void 0,void 0,(function(){var t,n,a;return(0,p.Jh)(this,(function(i){return t=(0,Qe.Jf)(null!==(a=null==x?void 0:x.tags)&&void 0!==a?a:[],e),n=(0,p.pi)((0,p.pi)({},x),{tags:t}),[2,At(n)]}))}))}),[At,x]),Rt=(0,w.useCallback)((function(e){var t=e;T((function(e){return(0,p.pi)((0,p.pi)({},null!=e?e:t),{version:t.version})}))}),[]),xt=(0,w.useMemo)((function(){return w.createElement(f.Z,null,w.createElement(g.Z,{className:"p-x-lg",span:24},w.createElement(fe,{isRequiredDetailsAvailable:!0,airflowEndpoint:null!=we?we:"",deleteIngestion:pt,deployIngestion:dt,handleEnableDisableIngestion:mt,ingestionList:le,isAirflowAvailable:t,isLoading:q,paging:me,permissions:Ae,serviceCategory:i,serviceDetails:x,serviceName:a,triggerIngestion:ut,onIngestionWorkflowsUpdate:ot})))}),[t,q,we,x,pt,dt,mt,le,me,Ae,i,a,ut,ot]),Tt=(0,w.useMemo)((function(){var n;return w.createElement(f.Z,null,w.createElement(g.Z,{className:"p-x-lg",span:24},w.createElement(f.Z,{className:"my-4"},w.createElement(g.Z,{span:12},w.createElement(Z.Z,null)),w.createElement(g.Z,{span:12},w.createElement(v.Z,{className:"w-full justify-end"},w.createElement(E.Z,{title:Ae.EditAll?e("label.edit-entity",{entity:e("label.connection")}):e("message.no-permission-for-action")},w.createElement(h.Z,{ghost:!0,"data-testid":"edit-connection-button",disabled:!Ae.EditAll,type:"primary",onClick:rt},e("label.edit-entity",{entity:e("label.connection")}))),Xe&&t&&w.createElement(E.Z,{title:Ae.EditAll?e("label.test-entity",{entity:e("label.connection")}):e("message.no-permission-for-action")},w.createElement(A.Z,{connectionType:null!==(n=null==x?void 0:x.serviceType)&&void 0!==n?n:"",formData:Ne,isTestingDisabled:it,serviceCategory:i,serviceName:null==x?void 0:x.name,shouldValidateForm:!1,showDetails:!1})))))),w.createElement(g.Z,{className:"p-x-lg",span:24},w.createElement(De,{connectionDetails:null!=Ne?Ne:{},serviceCategory:i,serviceFQN:(null==x?void 0:x.serviceType)||""})))}),[Ae.EditAll,Xe,t,rt,x,Ne,it,i]);(0,w.useEffect)((function(){c||(0,p.mG)(void 0,void 0,void 0,(function(){var e;return(0,p.Jh)(this,(function(t){switch(t.label){case 0:B(!0),t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,u((0,qe.rq)(i),a)];case 2:return e=t.sent(),je(e),[3,5];case 3:return t.sent(),[3,5];case 4:return B(!1),[7];case 5:return[2]}}))}))}),[a,i]),(0,w.useEffect)((function(){t&&!c&&(ot(),lt())}),[t]);var Pt=(0,w.useMemo)((function(){return(0,qe.Yz)(i)}),[i]),Ht=(0,w.useCallback)((function(e){var t,n=e.cursorType,a=e.currentPage;n&&(St(((t={})[n]=ie[n],t)),$e(a))}),[ie,St]),Mt=function(e){T((function(t){return t?(0,p.pi)((0,p.pi)((0,p.pi)({},t),{deleted:!(null==t?void 0:t.deleted)}),e?{version:e}:{}):t}))},zt=(0,w.useCallback)((function(e,t){return e?Mt(t):d.push("/")}),[Mt]),Ot=(0,w.useCallback)((function(){return(0,p.mG)(void 0,void 0,void 0,(function(){var t,n;return(0,p.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(0,Ue.iw)(i,x.id)];case 1:return t=a.sent().version,(0,V.XA)(e("message.restore-entities-success",{entity:e("label.service")}),2e3),Mt(t),[3,3];case 2:return n=a.sent(),(0,V.Eo)(n,e("message.restore-entities-error",{entity:e("label.service")})),[3,3];case 3:return[2]}}))}))}),[i,x]),Gt=(0,w.useMemo)((function(){var t,n,a=[],r=N.Z.userDetails.id===(null===(t=null==x?void 0:x.owner)||void 0===t?void 0:t.id),s=Boolean(null===(n=N.Z.userDetails.teams)||void 0===n?void 0:n.some((function(e){var t;return e.id===(null===(t=null==x?void 0:x.owner)||void 0===t?void 0:t.id)}))),c=s||r||m;return l||a.push({name:(0,qe.Vc)(i),key:(0,qe.Vc)(i).toLowerCase(),count:ie.total,children:w.createElement(nt,{currentPage:We,data:H,isServiceLoading:$,paging:ie,pagingHandler:Ht,saveUpdatedServiceData:At,serviceDetails:x,serviceName:i,servicePermission:Ae,showDeleted:Ee,onDescriptionUpdate:Zt,onShowDeletedChange:Ye})}),i===Te.u.DASHBOARD_SERVICES&&a.push({name:e("label.data-model"),key:be.M8.DATA_Model,count:ee.total,children:w.createElement(U,null)}),a.push({name:e("label.ingestion-plural"),key:be.M8.INGESTIONS,isHidden:!c,count:me.total,children:xt},{name:e("label.connection"),isHidden:!Ae.EditAll,key:be.M8.CONNECTION,children:Tt}),a.filter((function(e){return!e.isHidden})).map((function(e){return{label:w.createElement(Re.Z,{count:e.count,id:e.key,isActive:o===e.key,name:e.name}),key:e.key,children:e.children}}))}),[N.Z,x,m,i,ie,Ae,Zt,Ee,Ye,H,$,St,At,ee,me,xt,Tt,o,l]);return J?w.createElement(ce.Z,null):Ae.ViewAll||Ae.ViewBasic?w.createElement(ge.Z,{pageTitle:e("label.entity-detail-plural",{entity:(0,_.C_)(x)})},(0,C.isEmpty)(x)?w.createElement(I.Z,{className:"m-0"},(0,de.mW)(i,a)):w.createElement(f.Z,{"data-testid":"service-page",gutter:[0,12]},w.createElement(g.Z,{className:"p-x-lg",span:24},w.createElement(D.U$,{isRecursiveDelete:!0,afterDeleteAction:zt,afterDomainUpdateAction:Rt,dataAsset:x,entityType:Pt,permissions:Ae,showDomain:!l,onDisplayNameUpdate:Nt,onOwnerUpdate:It,onRestoreDataAsset:Ot,onTierUpdate:Dt,onVersionClick:function(){tt&&d.push((0,ne.WB)(i,a,(0,C.toString)(tt)))}})),w.createElement(g.Z,{span:24},w.createElement(y.Z,{activeKey:o,className:"entity-details-page-tabs","data-testid":"tabs",items:Gt,onChange:st})))):w.createElement(I.Z,{type:xe.Wx.PERMISSION})}},50156:function(e,t,n){n.d(t,{Hl:function(){return I},Kz:function(){return S},QB:function(){return b},mK:function(){return C},nH:function(){return k},rh:function(){return w},vf:function(){return Z},z4:function(){return N}});var a=n(70655),i=n(56256),r=n(23031),s=n(96486),l=n(67294),o=n(83716),c=n(62761),u=n(92693),d=n(96162),m=n(78666),p=n(61105),f=n(52011),g=n(55726),v=n(93895),E=n(96840),h=n(87078),y=n(75838),b=function(e,t){var n=(0,r.t)("label."+m.Pm[e]);return t===m.Rw.ADD?(0,r.t)("label.add-workflow-ingestion",{workflow:n}):(0,r.t)("label.edit-workflow-ingestion",{workflow:n})},C=function(e){switch(e){case g.Hz.DataInsight:return(0,E.si)(d.CZ.OPEN_METADATA,d.lx.DATA_INSIGHT);case g.Hz.ElasticSearchReindex:default:return(0,E.Ec)(d.CZ.OPEN_METADATA,d.lx.SEARCH,f.i.SCHEDULE)}},w=function(e,t,n,a,i,r){var l=[];return e?l.push({name:(0,s.startCase)(t),url:C(t),activeTitle:!0}):l.push.apply(l,[{name:(0,s.startCase)(n),url:(0,E.si)(d.CZ.SERVICES,(0,y.tJ)(n))},{name:(null==r?void 0:r.name)||"",url:(0,c.LE)(a,n,"ingestions"),imgSrc:h.Z.getServiceTypeLogo((null==r?void 0:r.serviceType)||""),activeTitle:!0}]),l.push({name:b(t,i),url:"",activeTitle:!0}),l},S=function(e){var t,n=[],a=null===(t=null==e?void 0:e.connection)||void 0===t?void 0:t.config;return a?(a.supportsMetadataExtraction&&n.push(g.Hz.Metadata),a.supportsUsageExtraction&&n.push(g.Hz.Usage),a.supportsLineageExtraction&&n.push(g.Hz.Lineage),a.supportsProfiler&&n.push(g.Hz.Profiler),a.supportsDBTExtraction&&n.push(g.Hz.Dbt),a.supportsDataInsightExtraction&&n.push(g.Hz.DataInsight),a.supportsElasticSearchReindexingExtraction&&n.push(g.Hz.ElasticSearchReindex)):n=[g.Hz.Metadata,g.Hz.Usage,g.Hz.Lineage,g.Hz.Profiler,g.Hz.Dbt],n},k=function(e,t,n,i){var r=(0,s.isUndefined)(i)?e:[i];return t||n.length>0?r.reduce((function(e,t){return t===g.Hz.Usage&&n.find((function(e){return e.pipelineType===t}))?e:(0,a.ev)((0,a.ev)([],(0,a.CR)(e)),[t])}),[]):[g.Hz.Metadata,g.Hz.Usage,g.Hz.Lineage,g.Hz.Profiler,g.Hz.Dbt]},N=function(e,t,n){return e&&0===t?l.createElement(o.Z,{className:"p-y-lg",type:p.Wx.CUSTOM},function(e){switch(e){case g.Hz.DataInsight:return l.createElement(l.Fragment,null,l.createElement(i.Z.Paragraph,{className:"w-max-500"},l.createElement(v.u1,{i18nKey:"message.data-insight-pipeline-description",renderElement:l.createElement("a",{href:u.RK,rel:"noreferrer",style:{color:"#1890ff"},target:"_blank"}),values:{link:(0,r.t)("label.data-insight-ingestion")}})));case g.Hz.ElasticSearchReindex:return l.createElement(l.Fragment,null,l.createElement(i.Z.Paragraph,{className:"w-max-500"},l.createElement(v.u1,{i18nKey:"message.elastic-search-re-index-pipeline-description",renderElement:l.createElement("a",{href:u.Db,rel:"noreferrer",style:{color:"#1890ff"},target:"_blank"}),values:{link:(0,r.t)("label.search-index-ingestion")}})));default:return l.createElement(i.Z.Paragraph,{className:"w-max-500"},l.createElement(v.u1,{i18nKey:"message.no-ingestion-description",renderElement:l.createElement("a",{href:u.tf,rel:"noreferrer",style:{color:"#1890ff"},target:"_blank"}),values:{link:(0,r.t)("label.metadata-ingestion")}}))}}(n)):null},Z=function(e,t){return e.map((function(e){var n;return(n={label:(0,r.t)("label.add-workflow-ingestion",{workflow:(0,r.t)("label."+m.Pm[e])}),key:e,disabled:e===g.Hz.DataInsight&&t})["data-testid"]="list-item",n}))},I=function(e,t){return e?(0,r.t)("label.add-entity",{entity:(0,r.t)("label.ingestion-lowercase")}):t===g.Hz.ElasticSearchReindex?(0,r.t)("label.deploy"):(0,r.t)("label.add-workflow-ingestion",{workflow:(0,s.startCase)(t||(0,r.t)("label."+g.Hz.Metadata))})}},52866:function(e,t,n){n.d(t,{u:function(){return h}});var a=n(70655),i=n(56256),r=n(19650),s=n(23031),l=n(96486),o=n(67294),c=n(76),u=n(25577),d=n(24135),m=n(79335),p=n(62761),f=n(89204),g=n(24671),v=n(75838),E=n(38333),h=function(e){return(0,a.ev)((0,a.ev)((0,a.ev)([{title:(0,s.t)("label.name"),dataIndex:"displayName",key:"displayName",width:280,render:function(t,n){var a;return o.createElement(c.Link,{to:(0,v.lS)(e,null!==(a=n.fullyQualifiedName)&&void 0!==a?a:"")},o.createElement(i.Z.Paragraph,{"data-testid":"child-asset-name-link",ellipsis:{rows:2,tooltip:!0},style:{width:280,color:"inherit"}},(0,g.C_)(n)))}},{title:(0,s.t)("label.description"),dataIndex:"description",key:"description",render:function(e){return!(0,l.isUndefined)(e)&&e.trim()?o.createElement(d.Z,{markdown:e}):o.createElement("span",{className:"text-grey-muted"},(0,s.t)("label.no-entity",{entity:(0,s.t)("label.description")}))}}],(0,a.CR)(f.u.PIPELINE_SERVICES===e?[{title:(0,s.t)("label.schedule-interval"),dataIndex:"scheduleInterval",key:"scheduleInterval",render:function(e){return e?o.createElement("span",null,e):o.createElement(i.Z.Text,null,p.lH)}}]:[])),[{title:(0,s.t)("label.owner"),dataIndex:"owner",key:"owner",render:function(e){var t;return(0,l.isUndefined)(e)?o.createElement(i.Z.Text,{"data-testid":"no-owner-text"},"--"):o.createElement(r.Z,{"data-testid":"owner-data"},o.createElement(u.Z,{id:"",name:null!==(t=e.name)&&void 0!==t?t:"",type:"circle",width:"24"}),o.createElement(i.Z.Text,{"data-testid":e.name+"-owner-name"},(0,g.C_)(e)))}},{title:(0,s.t)("label.tag-plural"),dataIndex:"tags",width:200,key:"tags",render:function(e,t){var n;return o.createElement(m.Z,{tags:null!==(n=t.tags)&&void 0!==n?n:[]})}}]),(0,a.CR)(f.u.DATABASE_SERVICES===e?[{title:(0,s.t)("label.usage"),dataIndex:"usageSummary",key:"usageSummary",render:function(e){var t,n;return o.createElement(i.Z.Text,null,(0,E.Vm)(null!==(n=null===(t=null==e?void 0:e.weeklyStats)||void 0===t?void 0:t.percentileRank)&&void 0!==n?n:0))}}]:[]))}}}]);