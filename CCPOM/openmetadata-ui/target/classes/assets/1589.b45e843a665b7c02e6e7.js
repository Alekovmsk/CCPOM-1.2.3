"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[1589],{38237:function(e,t,n){var i=n(8081),a=n.n(i),r=n(23645),s=n.n(r)()(a());s.push([e.id,'/*\n *  Copyright 2022 Collate.\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n/*\n *  Copyright 2022 Collate.\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n/* navbar+tab_height+padding = 64+46+12  */\n.message-card-collapse {\n  background-color: #fff;\n}\n.message-card-collapse .ant-collapse-header-text {\n  width: 95%;\n}\n.message-card-collapse .ant-collapse-header {\n  background-color: transparent;\n}\n.message-card-collapse .ant-collapse-content {\n  border-top-width: 0px;\n}\n.message-card-collapse .ant-collapse-content-box {\n  padding-top: 0px;\n}\n.message-card-collapse .ant-tag {\n  padding: 4px 12px;\n  font-size: 14px;\n}\n',""]),t.Z=s},71999:function(e,t,n){var i=n(8081),a=n.n(i),r=n(23645),s=n.n(r)()(a());s.push([e.id,'/*\n *  Copyright 2023 Collate.\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n/*\n *  Copyright 2022 Collate.\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n/* navbar+tab_height+padding = 64+46+12  */\n.dbt-tab-container .ant-card-body {\n  padding: 1px 0 0 8px;\n}\n.dbt-tab-container .query-editor .CodeMirror {\n  height: calc(100vh - 320px);\n}\n.dbt-tab-container .query-lines {\n  height: 26px;\n  margin-right: 0;\n  border-radius: 12px;\n  color: #757575;\n  border: 1px solid #0000001a;\n  background-color: #eeeeee;\n  display: flex;\n  align-items: center;\n  padding: 0 8px;\n}\n',""]),t.Z=s},3460:function(e,t,n){n.d(t,{w:function(){return s}});var i=n(70655),a=n(67294),r=n(33994),s=function(e){return function(t){return a.createElement(r.ZP,null,a.createElement(e,(0,i.pi)({},t)))}}},69509:function(e,t,n){n.d(t,{Z:function(){return q}});var i=n(70655),a=n(56256),r=n(71230),s=n(15746),l=n(96486),o=n(67294),c=n(68432),u=n(69523),d=n(92693),p=n(64632),m=n(51513),f=n(8277),v=n(93895),h=n(83716),y=n(27279),E=n(60331),g=n(95549),b=n(93379),T=n.n(b),w=n(7795),S=n.n(w),C=n(90569),N=n.n(C),A=n(3565),Z=n.n(A),x=n(19216),I=n.n(x),O=n(44589),L=n.n(O),P=n(38237),R={};R.styleTagTransform=L(),R.setAttributes=Z(),R.insert=N().bind(null,"head"),R.domAPI=S(),R.insertStyleElement=I(),T()(P.Z,R),P.Z&&P.Z.locals&&P.Z.locals;var k=y.Z.Panel,D=function(e){var t=e.message,n=(0,c.$)().t,r=(0,i.CR)((0,o.useState)(o.createElement(a.Z.Text,{ellipsis:!0,className:"text-primary"},t)),2),s=r[0],l=r[1],u=(0,i.CR)((0,o.useState)(!1),2),d=u[0],p=u[1];return(0,o.useEffect)((function(){l(d?o.createElement(E.Z,{"data-testid":"expanded-header",id:"sampleData-value"},n("label.value")):o.createElement(a.Z.Text,{ellipsis:!0,className:"text-primary","data-testid":"collapsed-header"},t))}),[d]),o.createElement(y.Z,{className:"message-card-collapse",onChange:function(){return p((function(e){return!e}))}},o.createElement(k,{"data-testid":"message-card",header:s,key:"1"},o.createElement(g.Z,{className:"m-t-xs",editorClass:"topic-sample-data",options:{styleActiveLine:!1},value:t.replace(/'/g,'"')})))},q=function(e){var t,n=e.entityId,y=e.entityType,E=(0,c.$)().t,g=(0,i.CR)((0,o.useState)(),2),b=g[0],T=g[1],w=(0,i.CR)((0,o.useState)(!1),2),S=w[0],C=w[1];return(0,o.useEffect)((function(){(0,i.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:C(!0),i.label=1;case 1:return i.trys.push([1,,6,7]),y!==p.py.TOPIC?[3,3]:[4,(0,f.d3)(n)];case 2:return t=i.sent(),[3,5];case 3:return[4,(0,m.pV)(n)];case 4:t=i.sent(),i.label=5;case 5:return e=t.sampleData,T(e),[3,7];case 6:return C(!1),[7];case 7:return[2]}}))}))}),[n]),S?o.createElement(u.Z,null):(0,l.isUndefined)(b)?o.createElement("div",{className:"m-t-xlg","data-testid":"no-data"},o.createElement(h.Z,null,o.createElement(a.Z.Paragraph,null,o.createElement(v.u1,{i18nKey:"message.view-sample-data-entity",renderElement:o.createElement("a",{href:d.tf,rel:"noreferrer",style:{color:"#1890ff"},target:"_blank"}),values:{entity:E("label.metadata-ingestion")}})))):o.createElement(r.Z,{className:"p-md",gutter:[16,16]},null===(t=b.messages)||void 0===t?void 0:t.map((function(e){return o.createElement(s.Z,{key:e,span:24},o.createElement(D,{message:e}))})))}},61289:function(e,t,n){var i=n(19650),a=n(67294),r=n(68432),s=n(38780),l=n(24135),o=n(62761),c=n(58369),u=n(81787);t.Z=function(e){var t=e.index,n=e.columnData,d=e.entityFqn,p=e.isReadOnly,m=e.onClick,f=e.entityType,v=e.hasEditPermission,h=e.onThreadLinkSelect,y=(0,r.$)().t;return a.createElement(i.Z,{className:"hover-icon-group","data-testid":"description",direction:"vertical",id:"field-description-"+t},n.field?a.createElement(l.Z,{markdown:n.field}):a.createElement("span",{className:"text-grey-muted"},y("label.no-entity",{entity:y("label.description")})),p?null:a.createElement(i.Z,{align:"baseline",size:"middle"},v&&a.createElement(s.ReactComponent,{className:"cursor-pointer hover-cell-icon","data-testid":"edit-button",height:14,name:y("label.edit"),style:{color:o.MJ},width:14,onClick:m}),a.createElement(u.Z,{data:n,entityFqn:d,entityTaskType:c.Sn.DESCRIPTION,entityType:f,onThreadLinkSelect:h})))}},55608:function(e,t,n){var i=n(70655),a=n(94184),r=n.n(a),s=n(96486),l=n(67294),o=n(71406),c=n(58369),u=n(81787);t.Z=function(e){var t,n,a=e.tags,d=e.record,p=e.index,m=e.type,f=e.entityFqn,v=e.isReadOnly,h=e.hasTagEditAccess,y=e.showInlineEditTagButton,E=e.onThreadLinkSelect,g=e.handleTagSelection,b=e.entityType;return l.createElement("div",{className:"hover-icon-group","data-testid":(0,s.lowerCase)(m)+"-tags-"+p},l.createElement("div",{className:r()("d-flex justify-content flex-col items-start"),"data-testid":"tags-wrapper"},l.createElement(o.Z,{showBottomEditButton:!0,permission:h&&!v,selectedTags:a,showHeader:!1,showInlineEditButton:y,tagType:m,onSelectionChange:function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,g(e,d)];case 1:return t.sent(),[2]}}))}))}},l.createElement(l.Fragment,null,!v&&l.createElement(u.Z,{data:{fqn:null!==(t=d.fullyQualifiedName)&&void 0!==t?t:"",field:null!==(n=d.tags)&&void 0!==n?n:[]},entityFqn:f,entityTaskType:c.Sn.TAGS,entityType:b,tagSource:m,onThreadLinkSelect:E})))))}},76597:function(e,t,n){n.d(t,{t:function(){return R}});var i=n(70655),a=n(19586),r=n(56256),s=n(96486),l=n(67294),o=n(68432),c=n(15137),u=n(58369),d=n(61105),p=n(226),m=n(85861),f=n(24671),v=n(902),h=n(40734),y=n(46321),E=n(8752),g=n(79839),b=n(83716),T=n(37565),w=n(25213),S=n(24135),C=function(e){var t=e.extension,n=(0,o.$)().t,i=(0,l.useMemo)((function(){return(0,s.map)(t,(function(e,t){return{name:t,value:e}}))}),[t]),a=(0,l.useMemo)((function(){return[{title:n("label.name"),dataIndex:"name",key:"name",width:200,render:function(e){return e}},{title:n("label.value"),dataIndex:"value",key:"value",render:function(e){return(0,s.isString)(e)?l.createElement(S.Z,{markdown:e||""}):l.createElement(r.Z.Text,{className:"break-all","data-testid":"value"},e)}}]}),[]);return l.createElement(w.Z,{bordered:!0,className:"m-md",columns:a,"data-testid":"custom-properties-table",dataSource:i,pagination:!1,rowKey:"name",size:"small"})},N=n(16165),A=n(23031),Z=n(38780),x=n(59136),I=n(4107),O=n(45102),L=function(e){var t=e.value,n=e.onCancel,a=e.type,r=e.propertyName,s=e.onSave,o=(0,i.CR)((0,l.useState)(t),2),c=o[0],u=o[1];return l.createElement(O.Z,{onCancel:n,onSave:function(){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return[4,s(c)];case 1:return e.sent(),[2]}}))}))}},l.createElement(I.Z,{className:"w-64","data-testid":"value-input",id:"value",name:r,placeholder:"value",type:a,value:c,onChange:function(e){var t=e.target.value;u(t)}}))},P=function(e){var t,n=e.isVersionView,a=e.versionDataKeys,o=e.propertyName,c=e.extension,u=e.propertyType,d=e.onExtensionUpdate,p=e.hasEditPermissions,m=null==c?void 0:c[o],f=(0,i.CR)((0,l.useState)(!1),2),v=f[0],h=f[1],y=function(){h(!1)},E=function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var t,n;return(0,i.Jh)(this,(function(a){switch(a.label){case 0:return t=(0,i.pi)((0,i.pi)({},c||{}),((n={})[o]="integer"===u.name?(0,s.toNumber)(e||0):e,n)),[4,d(t)];case 1:return a.sent(),h(!1),[2]}}))}))};return l.createElement("div",null,v?function(){switch(u.name){case"string":case"integer":return l.createElement(L,{propertyName:o,type:"integer"===u.name?"number":"text",value:m,onCancel:y,onSave:E});case"markdown":return l.createElement(x.p,{header:(0,A.t)("label.edit-entity-name",{entityType:(0,A.t)("label.property"),entityName:o}),placeholder:(0,A.t)("label.enter-property-value"),value:m||"",visible:v,onCancel:y,onSave:E});default:return null}}():l.createElement(l.Fragment,null,l.createElement("div",{className:"d-flex gap-2 items-center"},(t=function(){if(n){var e=null==a?void 0:a.includes(o);return l.createElement(S.Z,{className:e?"diff-added":"",markdown:String(m)||""})}return"markdown"===u.name?l.createElement(S.Z,{markdown:m||""}):l.createElement(r.Z.Text,{className:"break-all","data-testid":"value"},m)}(),"integer"===u.name?(0,s.isUndefined)(m)?l.createElement("span",{className:"text-grey-muted","data-testid":"no-data"},(0,A.t)("message.no-data")):t:m?t:l.createElement("span",{className:"text-grey-muted","data-testid":"no-data"},(0,A.t)("message.no-data"))),p&&l.createElement(N.Z,{component:Z.ReactComponent,"data-testid":"edit-icon",onClick:function(){h(!0)}}))))},R=function(e){var t,n=e.handleExtensionUpdate,w=e.entityType,S=e.hasEditAccess,N=e.className,A=e.isVersionView,Z=e.hasPermission,x=e.entityDetails,I=(0,o.$)().t,O=(0,E.BL)().getEntityPermissionByFqn,L=(0,i.CR)((0,l.useState)(),2),R=L[0],k=L[1],D=(0,i.CR)((0,l.useState)({}),2),q=D[0],M=D[1],G=(0,i.CR)((0,l.useState)(!1),2),U=G[0],F=G[1],J=(0,c.UO)().fqn,V=(0,h.p2)(J);(0,l.useEffect)((function(){(0,i.mG)(void 0,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,(0,m.p)(w,V)];case 1:return e=t.sent(),k(e),[2]}}))}))}),[V]);var B=(0,i.CR)((0,l.useState)(),2),H=B[0],_=B[1],W=null!=x?x:R,K=(0,l.useCallback)((function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(a){switch(a.label){case 0:return(0,s.isUndefined)(n)||!W?[3,2]:(t=(0,i.pi)((0,i.pi)({},W),{extension:e}),[4,n(t)]);case 1:a.sent(),k(t),a.label=2;case 2:return[2]}}))}))}),[W,n]),Y=(0,l.useMemo)((function(){if(A){var e=null==W?void 0:W.changeDescription,t=(0,v.gY)(u.Sn.EXTENSION,e),n=(0,v.r9)(t);if(t.added){var i=JSON.parse(n||[])[0];if(i)return{extensionObject:null==W?void 0:W.extension,addedKeysList:Object.keys(i)}}if(W&&t.updated)return(0,v.xq)(W,t)}return{extensionObject:null==W?void 0:W.extension}}),[A,W]),$=(0,l.useMemo)((function(){return[{title:I("label.name"),dataIndex:"name",key:"name",width:200,render:function(e,t){return(0,f.C_)(t)}},{title:I("label.value"),dataIndex:"value",key:"value",render:function(e,t){return l.createElement(P,{extension:Y.extensionObject,hasEditPermissions:S,isVersionView:A,propertyName:t.name,propertyType:t.propertyType,versionDataKeys:Y.addedKeysList,onExtensionUpdate:K})}}]}),[null==W?void 0:W.extension,S,Y,A,K]);return(0,l.useEffect)((function(){((null==H?void 0:H.ViewAll)||(null==H?void 0:H.ViewBasic))&&(0,i.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:F(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,(0,p.ov)(w)];case 2:return e=n.sent(),M(e),[3,5];case 3:return t=n.sent(),(0,y.Eo)(t),[3,5];case 4:return F(!1),[7];case 5:return[2]}}))}))}),[H]),(0,l.useEffect)((function(){!function(e){(0,i.mG)(void 0,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:F(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,O(g.A.TYPE,e)];case 2:return t=n.sent(),_(t),[3,5];case 3:return n.sent(),(0,y.Eo)(I("server.fetch-entity-permissions-error",{entity:I("label.resource-permission-lowercase")})),[3,5];case 4:return F(!1),[7];case 5:return[2]}}))}))}(w)}),[w]),U?l.createElement(a.Z,{active:!0}):Z?(0,s.isEmpty)(q.customProperties)&&(0,s.isUndefined)(null==W?void 0:W.extension)?l.createElement("div",{className:"flex-center tab-content-height"},l.createElement(b.Z,{className:N},l.createElement(r.Z.Paragraph,null,I("message.adding-new-entity-is-easy-just-give-it-a-spin",{entity:I("label.custom-property-plural")})))):(0,s.isEmpty)(q.customProperties)&&!(0,s.isUndefined)(null==W?void 0:W.extension)?l.createElement(C,{extension:null==W?void 0:W.extension}):l.createElement(T.Z,{bordered:!0,className:"m-md",columns:$,"data-testid":"custom-properties-table",dataSource:null!==(t=q.customProperties)&&void 0!==t?t:[],loading:U,pagination:!1,rowKey:"name",size:"small"}):l.createElement("div",{className:"flex-center tab-content-height"},l.createElement(b.Z,{type:d.Wx.PERMISSION}))}},46600:function(e,t,n){n.d(t,{Z:function(){return O}});var i=n(91894),a=n(19650),r=n(60331),s=n(71577),l=n(94184),o=n.n(l),c=n(96486),u=n(67294),d=n(68432),p=n(51297),m=n(27914),f=n(97010),v=n(95549),h=n(93379),y=n.n(h),E=n(7795),g=n.n(E),b=n(90569),T=n.n(b),w=n(3565),S=n.n(w),C=n(19216),N=n.n(C),A=n(44589),Z=n.n(A),x=n(71999),I={};I.styleTagTransform=Z(),I.setAttributes=S(),I.insert=T().bind(null,"head"),I.domAPI=g(),I.insertStyleElement=N(),y()(x.Z,I),x.Z&&x.Z.locals&&x.Z.locals;var O=function(e){var t=e.title,n=e.sqlQuery,l=(0,d.$)().t,h=(0,u.useMemo)((function(){var e=(0,c.split)(n,"\n").length;return{queryLine:e+" "+l(e>1?"label.line-plural":"label.line"),lineCount:e}}),[n]),y=h.queryLine,E=h.lineCount,g=(0,f.V)(n).onCopyToClipBoard;return u.createElement(i.Z,{className:"m-md w-auto dbt-tab-container",extra:u.createElement(a.Z,{className:"m-y-xs"},u.createElement(r.Z,{className:"query-lines","data-testid":"query-line"},y),u.createElement(s.Z,{className:"flex-center button-size bg-white","data-testid":"query-entity-copy-button",icon:u.createElement(p.ReactComponent,{height:16,width:16}),onClick:g})),title:t},u.createElement(v.Z,{className:"custom-code-mirror-theme",editorClass:o()(E>4?"table-query-editor":"query-editor"),mode:{name:m.Q.SQL},options:{readOnly:!0},value:n}))}},58968:function(e,t,n){n.d(t,{H:function(){return o},o:function(){return l}});var i,a=n(96486),r=n(74475),s=n(58369),l=[{name:(0,a.startCase)(r.Z.t("label.upload-csv-uppercase-file")),step:1},{name:(0,a.startCase)(r.Z.t("label.preview-data")),step:2}],o=((i={})[s.Sn.DESCRIPTION]={request:r.Z.t("message.request-description"),update:r.Z.t("message.request-update-description")},i[s.Sn.TAGS]={request:r.Z.t("label.request-tag-plural"),update:r.Z.t("label.update-request-tag-plural")},i)},81787:function(e,t,n){n.d(t,{Z:function(){return w}});var i=n(94199),a=n(19650),r=n(96486),s=n(67294),l=n(68432),o=n(15137),c=n(7873),u=n(73213),d=n(62761),p=n(58968),m=n(58369),f=n(90058),v=n(93895),h=n(70655),y=n(23031),E=n(90386),g=n(24671),b={height:14,name:"comments",width:14,style:{color:d.MJ}},T=n(86385),w=function(e){var t=e.data,n=e.tagSource,w=e.entityFqn,S=e.entityType,C=e.entityTaskType,N=e.onThreadLinkSelect,A=(0,l.$)().t,Z=(0,o.k6)(),x=(0,s.useMemo)((function(){return(0,T.AI)(S)}),[S]),I=x.fqnPart,O=x.entityField,L=(0,s.useMemo)((function(){var e,n=(0,v.Td)(null!==(e=t.fqn)&&void 0!==e?e:"",I);return n.includes(u.o)?'"'+n+'"':n}),[t.fqn]),P=(0,s.useMemo)((function(){var e=!(0,r.isEmpty)(t.field);return s.createElement(i.Z,{destroyTooltipOnHide:!0,overlayClassName:"ant-popover-request-description",title:e?p.H[C].update:p.H[C].request},s.createElement(c.ReactComponent,{className:"hover-cell-icon cursor-pointer","data-testid":"task-element",height:14,name:A("label.request-tag-plural"),style:{color:d.MJ},width:14,onClick:function(){return function(e){C===m.Sn.DESCRIPTION?Z.push((e?T.L6:T.Ub)(S,w,O,L)):Z.push((e?T.Se:T.zt)(S,w,O,L))}(e)}}))}),[t.field]);return s.createElement(a.Z,{"data-testid":"entity-task",size:"middle"},n!==f.c6.Glossary&&P,function(e,t,n,a){var r=(0,g.ec)(t,n,a);return s.createElement(i.Z,{destroyTooltipOnHide:!0,overlayClassName:"ant-popover-request-description",title:(0,y.t)("label.list-entity",{entity:(0,y.t)("label.conversation")})},s.createElement(E.ReactComponent,(0,h.pi)({},b,{className:"hover-cell-icon cursor-pointer","data-testid":"field-thread",onClick:function(t){t.preventDefault(),t.stopPropagation(),e(r)}})))}(N,S,w,L))}},51583:function(e,t,n){n.r(t),n.d(t,{default:function(){return $}});var i=n(70655),a=n(34901),r=n(96486),s=n(67294),l=n(68432),o=n(15137),c=n(95137),u=n(83716),d=n(69523),p=n(8752),m=n(79839),f=n(71230),v=n(15746),h=n(19650),y=n(25499),E=n(33994),g=n(75642),b=n(3460),T=n(113),w=n(46600),S=n(9600),C=n(33873),N=n(16177),A=n(80646),Z=n(69509),x=n(67167),I=n(71406),O=n(1727),L=n(62761),P=n(61105),R=n(64632),k=n(31615),D=n(90058),q=n(8277),M=n(93895),G=n(24671),U=n(40734),F=n(38333),J=n(73553),V=n(46321),B=n(19521),H=n(76597),_=n(23647),W=(0,b.w)((function(e){var t=e.updateTopicDetailsState,n=e.topicDetails,a=e.fetchTopic,r=e.followTopicHandler,d=e.unFollowTopicHandler,p=e.versionHandler,m=e.createThread,b=e.onTopicUpdate,W=e.topicPermissions,K=e.handleToggleDelete,Y=e.onUpdateVote,$=(0,l.$)().t,z=(0,c.Eu)().currentUser,Q=(0,E.$J)(),j=Q.postFeed,X=Q.deleteFeed,ee=Q.updateFeed,te=(0,o.UO)(),ne=te.fqn,ie=te.tab,ae=void 0===ie?R.M8.SCHEMA:ie,re=(0,o.k6)(),se=(0,i.CR)((0,s.useState)(!1),2),le=se[0],oe=se[1],ce=(0,i.CR)((0,s.useState)(""),2),ue=ce[0],de=ce[1],pe=(0,i.CR)((0,s.useState)(0),2),me=pe[0],fe=pe[1],ve=(0,i.CR)((0,s.useState)(k.Th.Conversation),2),he=ve[0],ye=ve[1],Ee=(0,s.useMemo)((function(){return(0,U.p2)(ne)}),[ne]),ge=(0,s.useMemo)((function(){var e,t;return(0,i.pi)((0,i.pi)({},n),{tier:(0,F.Zk)(null!==(e=n.tags)&&void 0!==e?e:[]),topicTags:(0,F.nD)(null!==(t=n.tags)&&void 0!==t?t:[]),entityName:(0,G.C_)(n)})}),[n]),be=ge.owner,Te=ge.deleted,we=ge.description,Se=ge.followers,Ce=void 0===Se?[]:Se,Ne=ge.entityName,Ae=ge.topicTags,Ze=ge.tier,xe=(0,s.useMemo)((function(){var e;return{isFollowing:null==Ce?void 0:Ce.some((function(e){return e.id===(null==z?void 0:z.id)})),followersCount:null!==(e=null==Ce?void 0:Ce.length)&&void 0!==e?e:0}}),[Ce,z]).isFollowing,Ie=function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,b((0,i.pi)((0,i.pi)({},n),{extension:e.extension}),"extension")];case 1:return t.sent(),[2]}}))}))},Oe=function(e,t){de(e),t&&ye(t)},Le=function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,b((0,i.pi)((0,i.pi)({},n),{messageSchema:e}),"messageSchema")];case 1:return a.sent(),[3,3];case 2:return t=a.sent(),(0,V.Eo)(t),[3,3];case 3:return[2]}}))}))},Pe=function(){return oe(!0)},Re=function(){return oe(!1)},ke=function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var t,a;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:if(we===e)return[3,6];t=(0,i.pi)((0,i.pi)({},n),{description:e}),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,b(t,"description")];case 2:return r.sent(),[3,5];case 3:return a=r.sent(),(0,V.Eo)(a),[3,5];case 4:return oe(!1),[7];case 5:return[3,7];case 6:oe(!1),r.label=7;case 7:return[2]}}))}))},De=(0,s.useCallback)((function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(a){switch(a.label){case 0:return t=(0,i.pi)((0,i.pi)({},n),{owner:e?(0,i.pi)((0,i.pi)({},be),e):void 0}),[4,b(t,"owner")];case 1:return a.sent(),[2]}}))}))}),[be]),qe=function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var t,a;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return(0,J.eY)(e)&&n?(t=(0,i.ev)((0,i.ev)([],(0,i.CR)(Ze?[Ze]:[])),(0,i.CR)(e)),a=(0,i.pi)((0,i.pi)({},n),{tags:t}),[4,b(a,"tags")]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},Me=function(){return(0,M.Aq)(R.py.TOPIC,Ee,fe)},Ge=(0,s.useCallback)((function(e,t){return e?K(t):re.push("/")}),[]),Ue=(0,s.useMemo)((function(){return{editTagsPermission:(W.EditTags||W.EditAll)&&!Te,editDescriptionPermission:(W.EditDescription||W.EditAll)&&!Te,editCustomAttributePermission:(W.EditAll||W.EditCustomFields)&&!Te,editAllPermission:W.EditAll&&!Te,editLineagePermission:(W.EditAll||W.EditLineage)&&!Te,viewSampleDataPermission:W.ViewAll||W.ViewSampleData,viewAllPermission:W.ViewAll}}),[W,Te]),Fe=Ue.editTagsPermission,Je=Ue.editDescriptionPermission,Ve=Ue.editCustomAttributePermission,Be=Ue.editAllPermission,He=Ue.editLineagePermission,_e=Ue.viewSampleDataPermission,We=Ue.viewAllPermission;(0,s.useEffect)((function(){Me()}),[W,Ee]);var Ke=(0,s.useMemo)((function(){var e,t;return[{label:s.createElement(x.Z,{id:R.M8.SCHEMA,name:$("label.schema")}),key:R.M8.SCHEMA,children:s.createElement(f.Z,{gutter:[0,16],wrap:!1},s.createElement(v.Z,{className:"p-t-sm m-x-lg",flex:"auto"},s.createElement("div",{className:"d-flex flex-col gap-4"},s.createElement(T.Z,{description:n.description,entityFqn:Ee,entityName:Ne,entityType:R.py.TOPIC,hasEditAccess:Je,isEdit:le,owner:n.owner,showActions:!Te,onCancel:Re,onDescriptionEdit:Pe,onDescriptionUpdate:ke,onThreadLinkSelect:Oe}),s.createElement(_.Z,{entityFqn:Ee,hasDescriptionEditAccess:Je,hasTagEditAccess:Fe,isReadOnly:Boolean(n.deleted),messageSchema:n.messageSchema,onThreadLinkSelect:Oe,onUpdate:Le}))),s.createElement(v.Z,{className:"entity-tag-right-panel-container","data-testid":"entity-right-panel",flex:"320px"},s.createElement(h.Z,{className:"w-full",direction:"vertical",size:"large"},s.createElement(C.Z,{activeDomain:null==n?void 0:n.domain,dataProducts:null!==(e=null==n?void 0:n.dataProducts)&&void 0!==e?e:[],hasPermission:!1}),s.createElement(I.Z,{displayType:O.F.READ_MORE,entityFqn:Ee,entityType:R.py.TOPIC,permission:Fe,selectedTags:Ae,tagType:D.c6.Classification,onSelectionChange:qe,onThreadLinkSelect:Oe}),s.createElement(I.Z,{displayType:O.F.READ_MORE,entityFqn:Ee,entityType:R.py.TOPIC,permission:Fe,selectedTags:Ae,tagType:D.c6.Glossary,onSelectionChange:qe,onThreadLinkSelect:Oe}))))},{label:s.createElement(x.Z,{count:me,id:R.M8.ACTIVITY_FEED,isActive:ae===R.M8.ACTIVITY_FEED,name:$("label.activity-feed-and-task-plural")}),key:R.M8.ACTIVITY_FEED,children:s.createElement(g.K,{entityType:R.py.TOPIC,fqn:null!==(t=null==n?void 0:n.fullyQualifiedName)&&void 0!==t?t:"",onFeedUpdate:Me,onUpdateEntityDetails:a})},{label:s.createElement(x.Z,{id:R.M8.SAMPLE_DATA,name:$("label.sample-data")}),key:R.M8.SAMPLE_DATA,children:_e?s.createElement(Z.Z,{entityId:n.id,entityType:R.py.TOPIC}):s.createElement("div",{className:"m-t-xlg"},s.createElement(u.Z,{type:P.Wx.PERMISSION}))},{label:s.createElement(x.Z,{id:R.M8.CONFIG,name:$("label.config")}),key:R.M8.CONFIG,children:s.createElement(w.Z,{sqlQuery:JSON.stringify(n.topicConfig),title:$("label.config")})},{label:s.createElement(x.Z,{id:R.M8.LINEAGE,name:$("label.lineage")}),key:R.M8.LINEAGE,children:s.createElement(N.Z,{deleted:n.deleted,entity:n,entityType:R.py.TOPIC,hasEditAccess:He})},{label:s.createElement(x.Z,{id:R.M8.CUSTOM_PROPERTIES,name:$("label.custom-property-plural")}),key:R.M8.CUSTOM_PROPERTIES,children:s.createElement(H.t,{entityType:R.py.TOPIC,handleExtensionUpdate:Ie,hasEditAccess:Ve,hasPermission:We})}]}),[le,ae,me,Ae,Ne,n,Ee,a,Te,Re,Pe,Me,Ie,Oe,qe,ke,function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var t,a;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return t=null==e?void 0:e.map((function(e){return(0,G.hL)(e,R.py.DATA_PRODUCT)})),a=(0,i.pi)((0,i.pi)({},n),{dataProducts:t}),[4,b(a,"dataProducts")];case 1:return r.sent(),[2]}}))}))},Le,Fe,Je,Ve,He,Be,_e,We]);return s.createElement(A.Z,{className:"bg-white",pageTitle:$("label.entity-detail-plural",{entity:$("label.topic")})},s.createElement(f.Z,{gutter:[0,12]},s.createElement(v.Z,{className:"p-x-lg",span:24},s.createElement(S.U$,{isRecursiveDelete:!0,afterDeleteAction:Ge,afterDomainUpdateAction:t,dataAsset:n,entityType:R.py.TOPIC,permissions:W,onDisplayNameUpdate:function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(a){switch(a.label){case 0:return t=(0,i.pi)((0,i.pi)({},n),{displayName:e.displayName}),[4,b(t,"displayName")];case 1:return a.sent(),[2]}}))}))},onFollowClick:function(){return(0,i.mG)(void 0,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return xe?[4,d()]:[3,2];case 1:return e=t.sent(),[3,4];case 2:return[4,r()];case 3:e=t.sent(),t.label=4;case 4:return[2,e]}}))}))},onOwnerUpdate:De,onRestoreDataAsset:function(){return(0,i.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,(0,q.JG)(n.id)];case 1:return e=i.sent().version,(0,V.XA)($("message.restore-entities-success",{entity:$("label.topic")}),2e3),K(e),[3,3];case 2:return t=i.sent(),(0,V.Eo)(t,$("message.restore-entities-error",{entity:$("label.topic")})),[3,3];case 3:return[2]}}))}))},onTierUpdate:function(e){var t,a=(0,J.Jf)(null!==(t=null==n?void 0:n.tags)&&void 0!==t?t:[],e),r=(0,i.pi)((0,i.pi)({},n),{tags:a});return b(r,"tags")},onUpdateVote:Y,onVersionClick:p})),s.createElement(v.Z,{span:24},s.createElement(y.Z,{destroyInactiveTabPane:!0,activeKey:null!=ae?ae:R.M8.SCHEMA,className:"entity-details-page-tabs","data-testid":"tabs",items:Ke,onChange:function(e){e!==ae&&re.push((0,L.Qt)(Ee,e))}}))),ue?s.createElement(B.Z,{createThread:m,deletePostHandler:X,open:Boolean(ue),postFeedHandler:j,threadLink:ue,threadType:he,updateThreadHandler:ee,onCancel:function(){return de("")}}):null)})),K=n(76373),Y=n(39570),$=function(){var e,t=(0,l.$)().t,n=(0,c.Eu)().currentUser,f=null!==(e=null==n?void 0:n.id)&&void 0!==e?e:"",v=(0,o.k6)(),h=(0,p.BL)().getEntityPermissionByFqn,y=(0,o.UO)().fqn,E=(0,i.CR)((0,s.useState)({}),2),g=E[0],b=E[1],T=(0,i.CR)((0,s.useState)(!0),2),w=T[0],S=T[1],C=(0,i.CR)((0,s.useState)(!1),2),N=C[0],A=C[1],Z=(0,i.CR)((0,s.useState)(Y.Bd),2),x=Z[0],I=Z[1],O=g.id,k=g.version,D=function(e){var t=(0,a.qu)((0,r.omitBy)(g,r.isUndefined),e);return(0,q.gc)(O,t)},U=function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var n,a,r,s,l,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:S(!0),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,(0,q.mp)(e,[R.GB.OWNER,R.GB.FOLLOWERS,R.GB.TAGS,R.GB.DOMAIN,R.GB.DATA_PRODUCTS,R.GB.VOTES])];case 2:return n=i.sent(),a=n.id,r=n.fullyQualifiedName,s=n.serviceType,b(n),(0,M.nk)({displayName:(0,G.C_)(n),entityType:R.py.TOPIC,fqn:null!=r?r:"",serviceType:s,timestamp:0,id:a}),[3,5];case 3:return l=i.sent(),404===(null===(o=l.response)||void 0===o?void 0:o.status)?A(!0):(0,V.Eo)(l,t("server.entity-details-fetch-error",{entityType:t("label.pipeline"),entityName:e})),[3,5];case 4:return S(!1),[7];case 5:return[2]}}))}))},F=(0,s.useCallback)((function(e){var t=e;b((function(e){return(0,i.pi)((0,i.pi)({},null!=e?e:t),{version:t.version})}))}),[]);return(0,s.useEffect)((function(){var e;e=y,(0,i.mG)(void 0,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:S(!0),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,h(m.A.TOPIC,e)];case 2:return n=i.sent(),I(n),[3,5];case 3:return i.sent(),(0,V.Eo)(t("server.fetch-entity-permissions-error",{entity:e})),[3,5];case 4:return S(!1),[7];case 5:return[2]}}))}))}),[y]),(0,s.useEffect)((function(){(x.ViewAll||x.ViewBasic)&&U(y)}),[x,y]),w?s.createElement(d.Z,null):N?s.createElement(u.Z,null,(0,M.mW)("topic",y)):x.ViewAll||x.ViewBasic?s.createElement(W,{createThread:function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,(0,K.Kl)(e)];case 1:return i.sent(),[3,3];case 2:return n=i.sent(),(0,V.Eo)(n,t("server.create-entity-error",{entity:t("label.conversation")})),[3,3];case 3:return[2]}}))}))},fetchTopic:function(){return U(y)},followTopicHandler:function(){return(0,i.mG)(void 0,void 0,void 0,(function(){var e,n,a;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,q.vs)(O,f)];case 1:return e=r.sent(),n=e.changeDescription.fieldsAdded[0].newValue,b((function(e){var t;return(0,i.pi)((0,i.pi)({},e),{followers:(0,i.ev)((0,i.ev)([],(0,i.CR)(null!==(t=null==e?void 0:e.followers)&&void 0!==t?t:[])),(0,i.CR)(n))})})),[3,3];case 2:return a=r.sent(),(0,V.Eo)(a,t("server.entity-follow-error",{entity:(0,G.C_)(g)})),[3,3];case 3:return[2]}}))}))},handleToggleDelete:function(e){b((function(t){return t?(0,i.pi)((0,i.pi)((0,i.pi)({},t),{deleted:!(null==t?void 0:t.deleted)}),e?{version:e}:{}):t}))},topicDetails:g,topicPermissions:x,unFollowTopicHandler:function(){return(0,i.mG)(void 0,void 0,void 0,(function(){var e,n,a;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,q.mM)(O,f)];case 1:return e=r.sent(),n=e.changeDescription.fieldsDeleted[0].oldValue,b((function(e){var t;return(0,i.pi)((0,i.pi)({},e),{followers:(null!==(t=null==e?void 0:e.followers)&&void 0!==t?t:[]).filter((function(e){return e.id!==n[0].id}))})})),[3,3];case 2:return a=r.sent(),(0,V.Eo)(a,t("server.entity-unfollow-error",{entity:(0,G.C_)(g)})),[3,3];case 3:return[2]}}))}))},updateTopicDetailsState:F,versionHandler:function(){k&&v.push((0,L.h4)(R.py.TOPIC,y,(0,r.toString)(k)))},onTopicUpdate:function(e,t){return(0,i.mG)(void 0,void 0,void 0,(function(){var n,a;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,D(e)];case 1:return n=r.sent(),b((function(e){var a,r,s;return"tags"===t?(0,i.pi)((0,i.pi)({},e),((a={version:n.version})[t]=(0,M.ch)(null!==(s=n.tags)&&void 0!==s?s:[]),a)):(0,i.pi)((0,i.pi)({},e),((r={version:n.version})[t]=n[t],r))})),[3,3];case 2:return a=r.sent(),(0,V.Eo)(a),[3,3];case 3:return[2]}}))}))},onUpdateVote:function(e,t){return(0,i.mG)(void 0,void 0,void 0,(function(){var n,a;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,(0,q.LL)(t,e)];case 1:return i.sent(),[4,(0,q.mp)(y,[R.GB.OWNER,R.GB.FOLLOWERS,R.GB.TAGS,R.GB.VOTES])];case 2:return n=i.sent(),b(n),[3,4];case 3:return a=i.sent(),(0,V.Eo)(a),[3,4];case 4:return[2]}}))}))}}):s.createElement(u.Z,{type:P.Wx.PERMISSION})}}}]);