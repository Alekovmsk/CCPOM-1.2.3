"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[7750],{41234:function(e,t,n){var i=n(8081),a=n.n(i),r=n(23645),s=n.n(r)()(a());s.push([e.id,'/*\n *  Copyright 2022 Collate.\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.test-suite-description .description-inner-main-container {\n  padding-left: 0;\n  padding-right: 0;\n}\n.test-suite-description .rich-text-editor-container {\n  padding-left: 0;\n}\n',""]),t.Z=s},45747:function(e,t,n){n.d(t,{S:function(){return Z}});var i=n(70655),a=n(71230),r=n(15746),s=n(38272),l=n(19650),c=n(56256),u=n(9676),o=n(71577),d=n(7606),p=n(67294),m=n(68432),E=n(76),f=n(69523),h=n(62761),v=n(22653),y=n(17888),S=n(93895),g=n(24671),C=n(40734),b=n(38333),T=n(59817),Z=function(e){var t=e.onCancel,n=e.existingTest,Z=e.onSubmit,w=e.cancelText,A=e.submitText,R=(0,m.$)().t,N=(0,i.CR)((0,p.useState)(""),2),x=N[0],I=N[1],D=(0,i.CR)((0,p.useState)([]),2),k=D[0],L=D[1],_=(0,i.CR)((0,p.useState)(),2),P=_[0],O=_[1],U=(0,i.CR)((0,p.useState)(1),2),B=U[0],V=U[1],M=(0,i.CR)((0,p.useState)(0),2),z=M[0],G=M[1],q=(0,i.CR)((0,p.useState)(!1),2),H=q[0],F=q[1],J=(0,p.useCallback)((function(e){var t=e.searchText,n=void 0===t?"":t,a=e.page,r=void 0===a?1:a;return(0,i.mG)(void 0,void 0,void 0,(function(){var e,t,a;return(0,i.Jh)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,3,4]),F(!0),[4,(0,y.w4)({pageNumber:r,pageSize:h.IV,searchIndex:v.W.TEST_CASE,query:n})];case 1:return e=s.sent(),t=e.hits.hits,G(null!==(a=e.hits.total.value)&&void 0!==a?a:0),L(1===r?t:function(e){return(0,i.ev)((0,i.ev)([],(0,i.CR)(e)),(0,i.CR)(t))}),V(r),[3,4];case 2:return s.sent(),[3,4];case 3:return F(!1),[7];case 4:return[2]}}))}))}),[n]),K=(0,p.useCallback)((function(e){e.currentTarget.scrollHeight-e.currentTarget.scrollTop==500&&k.length<z&&!H&&J({searchText:x,page:B+1})}),[x,z,k,H]);return(0,p.useEffect)((function(){J({searchText:x})}),[x]),p.createElement(a.Z,{gutter:[0,16]},p.createElement(r.Z,{span:24},p.createElement(T.Z,{removeMargin:!0,showClearSearch:!0,showLoadingStatus:!0,placeholder:R("label.search-entity",{entity:R("label.test-case-plural")}),searchValue:x,onSearch:function(e){I(e)}})),p.createElement(r.Z,{span:24},p.createElement(s.ZP,{loading:{spinning:!1,indicator:p.createElement(f.Z,null)}},p.createElement(d.Z,{data:k,height:500,itemKey:"id",onScroll:K},(function(e){var t,n,i=e._source,a=(0,b.lW)(i.entityLink),r=(0,S.AY)(a),s=i.entityLink.includes("::columns::");return p.createElement(l.Z,{className:"m-b-md border rounded-4 p-sm cursor-pointer",direction:"vertical",onClick:function(){var e;(e=i.id)&&((null==P?void 0:P.has(null!=e?e:""))?O((function(t){var n=new Map;return null==t||t.forEach((function(t){return t.id!==e&&n.set(t.id,t)})),n})):O((function(t){var n,i=new Map;return null==t||t.forEach((function(e){return i.set(e.id,e)})),i.set(e,null===(n=k.find((function(t){return t._source.id===e})))||void 0===n?void 0:n._source),i})))}},p.createElement(l.Z,{className:"justify-between w-full"},p.createElement(c.Z.Paragraph,{className:"m-0 font-medium text-base w-max-500","data-testid":i.name,ellipsis:{tooltip:!0}},(0,g.C_)(i)),p.createElement(u.Z,{checked:null==P?void 0:P.has(null!==(t=i.id)&&void 0!==t?t:"")})),p.createElement(c.Z.Paragraph,{className:"m-0 w-max-500",ellipsis:{tooltip:!0}},(0,g.C_)(i.testDefinition)),p.createElement(c.Z.Paragraph,{className:"m-0"},p.createElement(E.Link,{"data-testid":"table-link",to:(0,h.DV)(a,"profiler"),onClick:function(e){return e.stopPropagation()}},r)),s&&p.createElement(l.Z,null,p.createElement(c.Z.Text,{className:"font-medium text-xs"},R("label.column")+":"),p.createElement(c.Z.Text,{className:"text-grey-muted text-xs"},null!==(n=(0,S.AY)((0,C.YH)((0,b.lW)(i.entityLink,s))))&&void 0!==n?n:"--")))})))),p.createElement(r.Z,{className:"d-flex justify-end items-center p-y-xss",span:24},p.createElement(o.Z,{"data-testid":"cancel",type:"link",onClick:t},null!=w?w:R("label.cancel")),p.createElement(o.Z,{"data-testid":"submit",loading:H,type:"primary",onClick:function(){return(0,i.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,i.Jh)(this,(function(n){return F(!0),e=(0,i.ev)([],(0,i.CR)(null!==(t=null==P?void 0:P.values())&&void 0!==t?t:[])).map((function(e){var t;return null!==(t=e.id)&&void 0!==t?t:""})),Z(e),F(!1),[2]}))}))}},null!=A?A:R("label.submit"))))}},43633:function(e,t,n){var i=n(70655),a=n(71577),r=n(94199),s=n(19650),l=n(56256),c=n(23031),u=n(96486),o=n(67294),d=n(15137),p=n(96605),m=n(90386),E=n(38780),f=n(7873),h=n(99886),v=n(62761),y=n(58369),S=n(31615),g=n(93895),C=n(24671),b=n(86385),T=n(46321),Z=n(59136),w=n(24135);t.Z=function(e){var t=e.className,n=e.header,A=e.hasEditAccess,R=e.onDescriptionEdit,N=e.description,x=void 0===N?"":N,I=e.isEdit,D=e.onCancel,k=e.onDescriptionUpdate,L=e.isReadOnly,_=void 0!==L&&L,P=e.removeBlur,O=void 0!==P&&P,U=e.entityName,B=e.entityFieldThreads,V=e.onThreadLinkSelect,M=e.entityType,z=e.entityFqn,G=e.entityFieldTasks,q=e.reduceDescription,H=(0,d.k6)(),F=null==B?void 0:B[0],J=null==G?void 0:G[0],K=function(){H.push((0,b.Ub)(M,z))},W=function(){H.push((0,b.L6)(M,z))},$=function(){R&&R()},Y=function(){var e=Boolean(x.trim());return b.GZ.includes(M)?o.createElement(a.Z,{className:"w-7 h-7 p-0 flex-center","data-testid":"request-entity-description",type:"text",onClick:e?W:K},o.createElement(r.Z,{placement:"right",title:e?(0,c.t)("message.request-update-description"):(0,c.t)("message.request-description")},o.createElement(f.ReactComponent,(0,i.pi)({name:(0,c.t)("message.request-description")},v.K$)))):null},j=function(e){var t=e.descriptionThread;return(0,u.isUndefined)(t)?o.createElement(o.Fragment,null,(null==x?void 0:x.trim())&&V?o.createElement(a.Z,{className:"w-7 h-7 link-text p-0 flex-center","data-testid":"start-description-thread",icon:o.createElement(p.ReactComponent,(0,i.pi)({},v.K$,{name:"comments"})),type:"text",onClick:function(){return null==V?void 0:V((0,C.ec)(M,z,y.Sn.DESCRIPTION))}}):null):o.createElement(a.Z,{className:"w-9 h-7 p-0","data-testid":"description-thread",type:"text",onClick:function(){return null==V?void 0:V(t.entityLink)}},o.createElement(s.Z,{align:"center",className:"h-full",size:2},o.createElement(m.ReactComponent,(0,i.pi)({},v.K$,{name:"tasks"})),o.createElement(l.Z.Text,{"data-testid":"description-thread-count"},t.count)))};return o.createElement("div",{className:"schema-description relative "+t},o.createElement(s.Z,{align:"end",className:"description-inner-main-container",size:4},o.createElement("div",{className:"relative"},o.createElement("div",{className:"description h-full relative","data-testid":"description",id:"center"},(null==x?void 0:x.trim())?o.createElement(w.Z,{className:q?"max-two-lines":"",enableSeeMoreVariant:!O,markdown:x}):o.createElement("span",{className:"text-grey-muted p-y-xs"},(0,c.t)("label.no-entity",{entity:(0,c.t)("label.description")})))),o.createElement((function(){return _?null:o.createElement(s.Z,{align:"end",size:0},A&&o.createElement(a.Z,{className:"w-7 h-7 p-0 flex-center","data-testid":"edit-description",icon:o.createElement(E.ReactComponent,(0,i.pi)({color:v.MJ},v.K$)),type:"text",onClick:$}),(0,g.nq)(M)?o.createElement(o.Fragment,null,o.createElement(Y,null),(0,u.isUndefined)(J)?null:o.createElement(a.Z,{className:"w-9 h-7 p-0","data-testid":"description-task",type:"text",onClick:function(){return null==V?void 0:V(J.entityLink,S.Th.Task)}},o.createElement(s.Z,{align:"center",className:"h-full",size:2},o.createElement(h.ReactComponent,(0,i.pi)({},v.K$,{name:"tasks"})),o.createElement(l.Z.Text,{"data-testid":"description-tasks-count"},J.count)))):null,o.createElement(j,{descriptionThread:F}))}),null)),o.createElement(Z.p,{header:n||(0,c.t)("label.edit-description-for",{entityName:U}),placeholder:(0,c.t)("label.enter-entity",{entity:(0,c.t)("label.description")}),value:x,visible:Boolean(I),onCancel:D,onSave:function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:if(!k||!(0,u.isFunction)(k))return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,k(e)];case 2:return n.sent(),D&&D(),[3,4];case 3:return t=n.sent(),(0,T.Eo)(t),[3,4];case 4:return[2]}}))}))}}))}},68185:function(e,t,n){n.r(t),n.d(t,{default:function(){return Y}});var i=n(70655),a=n(71230),r=n(15746),s=n(19650),l=n(71577),c=n(50146),u=n(34901),o=n(67294),d=n(68432),p=n(15137),m=n(45747),E=n(95137),f=n(43633),h=n(39541),v=n(83716),y=n(24053),S=n(26387),g=n(69523),C=n(80646),b=n(8752),T=n(79839),Z=n(80271),w=n(61105),A=n(64632),R=n(34530),N=n(85087),x=n(802),I=n(61284),D=n(78802),k=n(24671),L=n(39570),_=n(96840),P=n(46321),O=n(93379),U=n.n(O),B=n(7795),V=n.n(B),M=n(90569),z=n.n(M),G=n(3565),q=n.n(G),H=n(19216),F=n.n(H),J=n(44589),K=n.n(J),W=n(41234),$={};$.styleTagTransform=K(),$.setAttributes=q(),$.insert=z().bind(null,"head"),$.domAPI=V(),$.insertStyleElement=F(),U()(W.Z,$),W.Z&&W.Z.locals&&W.Z.locals;var Y=function(){var e,t=(0,d.$)().t,n=(0,b.BL)().getEntityPermissionByFqn,O=(0,p.UO)().fqn,U=(0,N.a)().isAdminUser,B=(0,p.k6)(),V=(0,E.Eu)().isAuthDisabled,M=U||V,z=(0,i.CR)((0,o.useState)(),2),G=z[0],q=z[1],H=(0,i.CR)((0,o.useState)(!1),2),F=H[0],J=H[1],K=(0,i.CR)((0,o.useState)(!0),2),W=K[0],$=K[1],Y=(0,i.CR)((0,o.useState)([]),2),j=Y[0],Q=Y[1],X=(0,x.C)(),ee=X.currentPage,te=X.handlePageChange,ne=X.pageSize,ie=X.handlePageSizeChange,ae=X.paging,re=X.handlePagingChange,se=X.showPagination,le=(0,i.CR)((0,o.useState)(!1),2),ce=le[0],ue=le[1],oe=(0,i.CR)((0,o.useState)(L.Bd),2),de=oe[0],pe=oe[1],me=(0,i.CR)((0,o.useState)(!1),2),Ee=me[0],fe=me[1],he=(0,i.CR)((0,o.useState)([]),2),ve=he[0],ye=he[1],Se=(0,o.useMemo)((function(){var e,t;return{testOwner:null==G?void 0:G.owner,testSuiteId:null!==(e=null==G?void 0:G.id)&&void 0!==e?e:"",testSuiteDescription:null!==(t=null==G?void 0:G.description)&&void 0!==t?t:""}}),[G]),ge=Se.testSuiteDescription,Ce=Se.testSuiteId,be=Se.testOwner,Te=function(e){var t=(0,u.qu)(G,e);return(0,D.pQ)(Ce,t)},Ze=function(e){J(e)},we=function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(a){switch(a.label){case 0:$(!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,(0,D.Cz)((0,i.pi)((0,i.pi)({fields:"testCaseResult,testDefinition,testSuite",testSuiteId:Ce,orderByLastExecutionDate:!0},e),{limit:ne}))];case 2:return n=a.sent(),Q(n.data),re(n.paging),[3,5];case 3:return a.sent(),Q([]),(0,P.Eo)(t("server.entity-fetch-error",{entity:t("label.test-case-plural")})),[3,5];case 4:return $(!1),[7];case 5:return[2]}}))}))},Ae=(0,o.useCallback)((function(e){var n,a;n=(0,i.pi)((0,i.pi)({},G),{owner:e?(0,i.pi)((0,i.pi)({},be),e):void 0}),a=w.KW.UPDATE,Te(n).then((function(e){e?q(e):(0,P.Eo)(t("server.unexpected-response"))})).catch((function(e){(0,P.Eo)(e,t("server.entity-"+(a===w.KW.UPDATE?"updating":"removing")+"-error",{entity:t("label.owner")}))}))}),[be,G]),Re=function(e){var t,n=e.cursorType,i=e.currentPage;n&&(te(i),we(((t={})[n]=ae[n],t)))},Ne=function(e){e&&Q((function(t){return t.map((function(t){return t.id===e.id?(0,i.pi)((0,i.pi)({},t),e):t}))}))};(0,o.useEffect)((function(){(de.ViewAll||de.ViewBasic)&&(0,i.mG)(void 0,void 0,void 0,(function(){var e,n;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,(0,D.zz)(O,{fields:"owner",include:R.y.All})];case 1:return e=i.sent(),ye([{name:t("label.test-suite-plural"),url:(0,_.p_)(I.R.TEST_SUITES)},{name:(0,k.C_)(e),url:""}]),q(e),[3,3];case 2:return n=i.sent(),q(void 0),(0,P.Eo)(n,t("server.entity-fetch-error",{entity:t("label.test-suite")})),[3,3];case 3:return[2]}}))}))}),[de,O]),(0,o.useEffect)((function(){(0,i.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:ue(!0),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,n(T.A.TEST_SUITE,O)];case 2:return e=i.sent(),pe(e),[3,5];case 3:return t=i.sent(),(0,P.Eo)(t),[3,5];case 4:return ue(!1),[7];case 5:return[2]}}))}))}),[O]),(0,o.useEffect)((function(){Ce&&we({testSuiteId:Ce})}),[G,ne]);var xe=(0,o.useMemo)((function(){return{currentPage:ee,pageSize:ne,paging:ae,onShowSizeChange:ie,pagingHandler:Re}}),[ee,ae,ne,ie,Re]);return ce?o.createElement(g.Z,null):de.ViewAll||de.ViewBasic?o.createElement(C.Z,{pageTitle:t("label.entity-detail-plural",{entity:(0,k.C_)(G)})},o.createElement(a.Z,{className:"page-container",gutter:[16,32]},o.createElement(r.Z,{span:24},o.createElement(s.Z,{align:"center",className:"justify-between w-full"},o.createElement(S.Z,{"data-testid":"test-suite-breadcrumb",titleLinks:ve}),o.createElement(s.Z,null,(de.EditAll||de.EditTests)&&o.createElement(l.Z,{"data-testid":"add-test-case-btn",type:"primary",onClick:function(){return fe(!0)}},t("label.add-entity",{entity:t("label.test-case-plural")})),o.createElement(h.Z,{isRecursiveDelete:!0,afterDeleteAction:function(){B.push((0,_.p_)(I.R.TEST_SUITES))},allowSoftDelete:!1,canDelete:M,deleted:null==G?void 0:G.deleted,entityId:null==G?void 0:G.id,entityName:null==G?void 0:G.fullyQualifiedName,entityType:A.py.TEST_SUITE}))),o.createElement("div",{className:"w-full m-t-xxs m-b-xs"},o.createElement(y.V,{hasPermission:M,owner:be,onUpdate:Ae})),o.createElement(f.Z,{className:"test-suite-description",description:ge,entityName:(0,k.C_)(G),hasEditAccess:M,isEdit:F,onCancel:function(){return Ze(!1)},onDescriptionEdit:function(){return Ze(!0)},onDescriptionUpdate:function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var n,a,r;return(0,i.Jh)(this,(function(s){switch(s.label){case 0:if((null==G?void 0:G.description)===e)return[3,6];n=(0,i.pi)((0,i.pi)({},G),{description:e}),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,Te(n)];case 2:if(!(a=s.sent()))throw t("server.unexpected-response");return q(a),[3,5];case 3:return r=s.sent(),(0,P.Eo)(r),[3,5];case 4:return Ze(!1),[7];case 5:return[3,7];case 6:Ze(!1),s.label=7;case 7:return[2]}}))}))}})),o.createElement(r.Z,{span:24},o.createElement(Z.Z,{afterDeleteAction:we,isLoading:ce||W,pagingData:xe,removeFromTestSuite:{testSuite:G},showPagination:se,testCases:j,onTestCaseResultUpdate:Ne,onTestUpdate:Ne})),o.createElement(r.Z,{span:24},o.createElement(c.Z,{centered:!0,destroyOnClose:!0,closable:!1,footer:null,open:Ee,title:t("label.add-entity",{entity:t("label.test-case-plural")}),width:750},o.createElement(m.S,{existingTest:null!==(e=null==G?void 0:G.tests)&&void 0!==e?e:[],onCancel:function(){return fe(!1)},onSubmit:function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,D.AM)({testCaseIds:e,testSuiteId:Ce})];case 1:return n.sent(),fe(!1),we(),[3,3];case 2:return t=n.sent(),(0,P.Eo)(t),[3,3];case 3:return[2]}}))}))}}))))):o.createElement(v.Z,{type:w.Wx.PERMISSION})}},71859:function(e,t,n){n.d(t,{B:function(){return r},I:function(){return a}});var i=n(64632),a=[i.py.TABLE,i.py.DASHBOARD,i.py.TOPIC,i.py.PIPELINE,i.py.MLMODEL,i.py.CONTAINER,i.py.DASHBOARD_DATA_MODEL,i.py.STORED_PROCEDURE,i.py.SEARCH_INDEX,i.py.DATABASE,i.py.DATABASE_SCHEMA,i.py.DATABASE_SERVICE,i.py.MESSAGING_SERVICE,i.py.DASHBOARD_SERVICE,i.py.PIPELINE_SERVICE,i.py.MLMODEL_SERVICE,i.py.STORAGE_SERVICE,i.py.METADATA_SERVICE,i.py.SEARCH_SERVICE],r=function(e,t){var n=Date.now()/1e3;return n>e&&n<t}}}]);