"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[4946],{71068:function(e,t,n){var a=n(8081),i=n.n(a),s=n(23645),l=n.n(s)()(i());l.push([e.id,'/*\n *  Copyright 2022 Collate.\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.assignee-tag {\n  display: flex;\n  align-items: center;\n  padding: 2px 3px;\n  margin: 1px 2px;\n}\n.assignee-item .profile-image {\n  vertical-align: middle;\n}\n',""]),t.Z=l},41953:function(e,t,n){var a=n(8081),i=n.n(a),s=n(23645),l=n.n(s)()(i());l.push([e.id,'/*\n *  Copyright 2023 Collate.\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.request-tags .ant-select-custom,\n.request-description .ant-select-custom {\n  margin: 0;\n}\n.request-description .ant-tabs-description {\n  margin-top: 0;\n}\n.task-data {\n  width: unset;\n}\n',""]),t.Z=l},42105:function(e,t,n){var a=n(93379),i=n.n(a),s=n(7795),l=n.n(s),r=n(90569),u=n.n(r),c=n(3565),o=n.n(c),d=n(19216),m=n.n(d),p=n(44589),g=n.n(p),h=n(41953),f={};f.styleTagTransform=g(),f.setAttributes=o(),f.insert=u().bind(null,"head"),f.domAPI=l(),f.insertStyleElement=m(),i()(h.Z,f),h.Z&&h.Z.locals&&h.Z.locals},94946:function(e,t,n){n.r(t);var a=n(70655),i=n(56256),s=n(49409),l=n(4107),r=n(19650),u=n(71577),c=n(50963),o=n(96486),d=n(67674),m=n(67294),p=n(68432),g=n(15137),h=n(52046),f=n(98542),b=n(79686),y=n(26387),v=n(95969),E=n(69523),S=n(58369),T=n(64632),Z=n(59583),C=n(31615),w=n(90058),A=n(76373),I=n(93895),L=n(24671),k=n(40734),N=n(86385),R=n(46321),x=n(25131),O=n(58666);n(42105),t.default=(0,d.Pi)((function(){var e,t=(0,p.$)().t,n=(0,g.TH)(),d=(0,g.k6)(),U=(0,a.CR)((0,c.useForm)(),1)[0],q=(0,g.UO)(),D=q.entityType,F=q.fqn,V=new URLSearchParams(n.search),M=V.get("field"),P=V.get("value"),W=(0,a.CR)((0,m.useState)({}),2),B=W[0],Y=W[1],_=(0,a.CR)((0,m.useState)([]),2),K=_[0],j=_[1],H=(0,a.CR)((0,m.useState)([]),2),z=H[0],X=H[1],$=(0,a.CR)((0,m.useState)([]),1)[0],G="Request tags for "+((null==P?void 0:P.replaceAll(/^"|"$/g,""))||D)+" "+(M!==S.Sn.COLUMNS?(0,L.C_)(B):""),J=(0,m.useMemo)((function(){return(0,k.p2)(F)}),[D]),Q=(0,m.useMemo)((function(){return h.Z.getCurrentUserDetails()}),[h.Z.userDetails,h.Z.nonSecureUserDetails]),ee=function(){return M&&P?""+M+L.LV+P+L.LV+"tags":S.Sn.TAGS};return(0,m.useEffect)((function(){(0,N.Dy)(D,F,Y)}),[F,D]),(0,m.useEffect)((function(){var e=B.owner,t=[];e&&(t=[{label:(0,L.C_)(e),value:e.id||"",type:e.type}],X(t),j((function(e){return(0,a.ev)((0,a.ev)([],(0,a.CR)(t)),(0,a.CR)(e))}))),U.setFieldsValue({title:G.trimEnd(),assignees:t})}),[B]),(0,o.isEmpty)(B)?m.createElement(E.Z,null):m.createElement(b.Z,{firstPanel:{minWidth:700,flex:.6,children:m.createElement("div",{className:"max-width-md w-9/10 m-x-auto m-y-md d-grid gap-4"},m.createElement(y.Z,{titleLinks:(0,a.ev)((0,a.ev)([],(0,a.CR)((0,N.rM)(B,D))),[{name:t("label.create-entity",{entity:t("label.task")}),activeTitle:!0,url:""}])}),m.createElement("div",{className:"m-t-0 request-tags",key:"request-tags"},m.createElement(i.Z.Paragraph,{className:"text-base","data-testid":"form-title"},t("label.create-entity",{entity:t("label.task")})),m.createElement(s.Z,{form:U,initialValues:{suggestTags:[]},layout:"vertical",onFinish:function(e){var n={from:null==Q?void 0:Q.name,message:e.title||G,about:(0,L.ec)(D,J,ee()),taskDetails:{assignees:z.map((function(e){return{id:e.value,type:e.type}})),suggestion:JSON.stringify(e.suggestTags),type:Z.U.RequestTag,oldValue:"[]"},type:C.Th.Task};(0,A.Kl)(n).then((function(){(0,R.XA)(t("server.create-entity-success",{entity:t("label.task")})),d.push((0,I.X3)(D,J,T.M8.ACTIVITY_FEED,f.o.TASKS))})).catch((function(e){return(0,R.Eo)(e)}))}},m.createElement(s.Z.Item,{"data-testid":"title",label:t("label.task-entity",{entity:t("label.title")})+":",name:"title"},m.createElement(l.Z,{disabled:!0,placeholder:""+t("label.task-entity",{entity:t("label.title")})})),m.createElement(s.Z.Item,{"data-testid":"assignees",label:t("label.assignee-plural")+":",name:"assignees",rules:[{required:!0,message:t("message.field-text-is-required",{fieldText:t("label.assignee-plural")})}]},m.createElement(x.Z,{options:K,value:z,onChange:X,onSearch:function(e){(0,N.Od)(e,j)}})),m.createElement(s.Z.Item,{"data-testid":"tags-label",label:t("label.suggest-entity",{entity:t("label.tag-plural")})+":",name:"suggestTags"},m.createElement(O.Z,{tagType:w.c6.Dlaclassification})),m.createElement(s.Z.Item,null,m.createElement(r.Z,{className:"w-full justify-end","data-testid":"cta-buttons",size:16},m.createElement(u.Z,{type:"link",onClick:function(){return d.goBack()}},t("label.back")),m.createElement(u.Z,{"data-testid":"submit-tag-request",htmlType:"submit",type:"primary"},t($?"label.suggest":"label.submit")))))))},pageTitle:t("label.task"),secondPanel:{minWidth:60,flex:.4,children:m.createElement(v.Z,{hideBreadcrumbs:!0,showTags:!0,id:null!==(e=B.id)&&void 0!==e?e:"",source:(0,a.pi)((0,a.pi)({},B),{entityType:D})})}})}))},25131:function(e,t,n){n.d(t,{Z:function(){return L}});var a=n(70655),i=n(19650),s=n(56256),l=n(34041),r=n(23031),u=n(96486),c=n(67294),o=n(43443),d=n(40773),m=n(37878),p=n(55546),g=n(93379),h=n.n(g),f=n(7795),b=n.n(f),y=n(90569),v=n.n(y),E=n(3565),S=n.n(E),T=n(19216),Z=n.n(T),C=n(44589),w=n.n(C),A=n(71068),I={};I.styleTagTransform=w(),I.setAttributes=S(),I.insert=v().bind(null,"head"),I.domAPI=b(),I.insertStyleElement=Z(),h()(A.Z,I),A.Z&&A.Z.locals&&A.Z.locals;var L=function(e){var t=e.value,n=void 0===t?[]:t,g=e.onSearch,h=e.onChange,f=e.options,b=(0,c.useMemo)((function(){var e=(0,u.groupBy)(f,(function(e){return e.type})),t=[];return(0,u.isUndefined)(e.team)||t.push({type:"group",label:"Teams",value:p.jc.TEAM,options:e.team.map((function(e){return(0,a.pi)((0,a.pi)({},e),{label:c.createElement(i.Z,{"data-testid":"assignee-option",key:e.value},c.createElement(o.ReactComponent,{height:16,width:16}),c.createElement(s.Z.Text,null,e.label))})}))}),(0,u.isUndefined)(e.user)||t.push({type:"group",label:"Users",value:p.jc.USER,options:e.user.map((function(e){return(0,a.pi)((0,a.pi)({},e),{label:c.createElement("div",{"data-testid":"assignee-option-"+e.label},c.createElement(d.w,{className:"assignee-item",id:e.value,name:e.label,size:m.e.small}))})}))}),t}),[f]);return c.createElement(l.Z,{showSearch:!0,className:"ant-select-custom select-assignee","data-testid":"select-assignee",defaultActiveFirstOption:!1,filterOption:!1,mode:"multiple",notFoundContent:null,options:b,placeholder:(0,r.t)("label.select-to-search"),showArrow:!1,value:n.length?n:void 0,onChange:function(e,t){var n=t.map((function(e){return{label:e["data-label"],value:e.value,type:e.type}}));h(n)},onSearch:g})}}}]);