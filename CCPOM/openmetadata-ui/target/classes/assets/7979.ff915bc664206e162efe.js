"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[7979],{99280:function(e,n,t){var i=t(8081),r=t.n(i),o=t(23645),a=t.n(o)()(r());a.push([e.id,'/*\n *  Copyright 2022 Collate.\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.form-field.cron-field select {\n  background: white;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  padding: 5px;\n}\n.cron-field-row {\n  margin: 0 0 10px 0;\n}\n.cron-string {\n  margin-top: 15px;\n  background: #7147e840;\n  color: #37352f;\n  padding: 7px 10px;\n  border-left: 3px solid #0968da;\n}\n.cron-badge-option-container {\n  display: inline-block;\n  margin: 10px 0 10px 0;\n}\n.cron-badge-option {\n  height: 30px;\n  width: 30px;\n  background: #f5f5f5;\n  margin: 2px 5px;\n  padding: 5px;\n  display: inline-table;\n  text-align: center;\n  border-radius: 15px;\n  cursor: pointer;\n}\n.cron-badge-option.disabled {\n  cursor: not-allowed;\n  color: #6b7280;\n}\n.cron-badge-option:hover {\n  background: #d6d6d6;\n}\n.cron-badge-option.disabled:hover {\n  background: #f5f5f5;\n}\n.cron-badge-option.active {\n  background: #0968da;\n  color: white;\n}\n.month-opt-container .cron-badge-option {\n  width: 35px;\n  height: 32px;\n  border-radius: 18px;\n  font-size: 12px;\n  padding: 8px 5px;\n}\n',""]),n.Z=a},92130:function(e,n,t){t.d(n,{Z:function(){return J}});var i=t(70655),r=t(34041),o=t(49409),a=t(15746),l=t(71230),s=t(4107),c=t(94184),u=t.n(c),d=t(92458),m=t.n(d),p=t(96486),f=t(67294),v=t(68432),h=t(93895),b=t(85280),g=function(e){var n=e.selectedPeriod,t=e.selectedMinOption,i=e.selectedHourOption,r=e.selectedDayOption,o=e.selectedWeekOption,a=e.selectedMonthOption,l=e.selectedYearOption;switch(n){case"minute":return(0,b.Lt)(t);case"hour":return(0,b.A1)(i);case"day":return(0,b.vj)(r);case"week":return(0,b.T4)(o);case"month":return(0,b.G4)(a);case"year":return(0,b.ix)(l);default:return null}},w=t(93379),O=t.n(w),E=t(7795),y=t.n(E),C=t(90569),Z=t.n(C),x=t(3565),k=t.n(x),P=t(19216),N=t.n(P),S=t(44589),M=t.n(S),I=t(99280),R={};R.styleTagTransform=M(),R.setAttributes=k(),R.insert=Z().bind(null,"head"),R.domAPI=y(),R.insertStyleElement=N(),O()(I.Z,R),I.Z&&I.Z.locals&&I.Z.locals;var J=function(e){var n,t,c,d,w,O,E,y,C,Z,x=(0,v.$)().t,k=(0,i.CR)((0,f.useState)(null!==(n=e.value)&&void 0!==n?n:""),2),P=k[0],N=k[1],S=(0,i.CR)((0,f.useState)(function(e){var n,t,r={selectedPeriod:"",selectedMinOption:{min:5},selectedHourOption:{min:0},selectedDayOption:{hour:0,min:0},selectedWeekOption:{dow:1,hour:0,min:0},selectedMonthOption:{dom:1,hour:0,min:0},selectedYearOption:{dom:1,mon:1,hour:0,min:0}},o=function(e){for(var n in b.Bj)if(b.Bj[n].test(e))return n}(e),a=e?e.split(" "):[],l={min:a[0],hour:a[1],dom:a[2],mon:a[3],dow:a[4]};if(r.selectedPeriod=o||r.selectedPeriod,!(0,p.isEmpty)(o)){var s=r[b.D8[o||"hour"]],c=b.V8[o];try{for(var u=(0,i.XA)(c),d=u.next();!d.done;d=u.next()){var m=d.value;"time"===m?(s.hour=(0,p.toNumber)(l.hour),s.min=(0,p.toNumber)(l.min)):s[m]=(0,p.toNumber)(l[m])}}catch(e){n={error:e}}finally{try{d&&!d.done&&(t=u.return)&&t.call(u)}finally{if(n)throw n.error}}}return r}(null!==(t=e.value)&&void 0!==t?t:"")),2),M=S[0],I=S[1],R=(0,i.CR)((0,f.useState)((0,b.ug)()),1)[0],J=(0,i.CR)((0,f.useState)((0,b.Ln)()),1)[0],A=(0,i.CR)((0,f.useState)((0,b.JY)()),1)[0],D=(0,i.CR)((0,f.useState)((0,b.C2)()),1)[0],T=(0,i.CR)((0,f.useState)((0,b.Vl)()),1)[0],G=(0,i.CR)((0,f.useState)((0,b.po)()),1)[0],j=(0,i.CR)((0,f.useState)((0,b.dK)()),1)[0],L=(0,f.useMemo)((function(){var n=e.includePeriodOptions;return n?R.filter((function(e){return n.includes(e.label)})):R}),[e,R]),Y=e.className,F=e.disabled,W=e.disabledCronChange,H=M.selectedPeriod,V=x("label.schedule-to-run-every"),B=V+" "+H,z=function(n){var t,i=e.onChange;N(null!==(t=g(n))&&void 0!==t?t:P);var r=e.isQuartzCron?function(e){var n=e.selectedPeriod,t=e.selectedMinOption,i=e.selectedHourOption,r=e.selectedDayOption,o=e.selectedWeekOption,a=e.selectedMonthOption,l=e.selectedYearOption;switch(n){case"minute":return"0 0/"+t.min+" * * * ?";case"hour":return"0 "+i.min+" * * * ?";case"day":return"0 "+r.min+" "+r.hour+" * * ?";case"week":return"0 "+o.min+" "+o.hour+" ? * "+(o.dow+1);case"month":return"0 "+a.min+" "+a.hour+" "+a.dom+" * ?";case"year":return"0 "+l.min+" "+l.hour+" "+l.dom+" "+l.mon+" ?";default:return null}}(n):g(n);i(null!=r?r:P)},X=function(e,n){var t,r=((t={})[n]=e,t),o=M.selectedDayOption,a=Object.assign({},o,r);z((0,i.pi)((0,i.pi)({},M),{selectedDayOption:a})),I((function(e){return(0,i.pi)((0,i.pi)({},e),{selectedDayOption:a})}))},_=function(e,n){var t,r=((t={})[n]=e,t),o=M.selectedWeekOption,a=Object.assign({},o,r);z((0,i.pi)((0,i.pi)({},M),{selectedWeekOption:a})),I((function(e){return(0,i.pi)((0,i.pi)({},e),{selectedWeekOption:a})}))},q=function(e,n){var t,r=((t={})[n]=e,t),o=M.selectedMonthOption,a=Object.assign({},o,r);z((0,i.pi)((0,i.pi)({},M),{selectedMonthOption:a})),I((function(e){return(0,i.pi)((0,i.pi)({},e),{selectedMonthOption:a})}))},K=function(e,n){var t,r=((t={})[n]=e,t),o=M.selectedYearOption,a=Object.assign({},o,r);z((0,i.pi)((0,i.pi)({},M),{selectedYearOption:a})),I((function(e){return(0,i.pi)((0,i.pi)({},e),{selectedYearOption:a})}))},Q=function(e){return D.find((function(n){return n.value===e}))},U=function(e){return A.find((function(n){return n.value===e}))},$=function(n,t){var i=e.disabled;return f.createElement(r.Z,{className:"w-full","data-testid":"hour-options",disabled:i,id:"hour-select",options:D.map((function(e){return{label:e.label,value:e.value}})),value:n.hour,onChange:t})},ee=function(n,t){var i=e.disabled;return f.createElement(r.Z,{className:"w-full","data-testid":"minute-options",disabled:i,id:"minute-select",options:A.map((function(e){return{label:e.label,value:e.value}})),value:n.min,onChange:t})},ne=function(n,t,i,r){return n.map((function(n,o){var a=n.label,l=n.value,s=a;return i&&(s=s.substr(0,i)),f.createElement("span",{className:"cron-badge-option "+(l===t?"active":"")+" "+(e.disabled||!r?"disabled":""),"data-value":l,key:o,onClick:function(){null==r||r(Number(l))}},s)}))},te=(0,f.useMemo)((function(){var e,n,t,i,r,o,a,l,s,c,u,d=M.selectedYearOption,p=M.selectedWeekOption,v=M.selectedHourOption,b=M.selectedMinOption,g=M.selectedDayOption,w=M.selectedMonthOption,O=M.selectedPeriod,E=null===(e=G.find((function(e){return e.value===d.dom})))||void 0===e?void 0:e.label,y=null===(n=j.find((function(e){return e.value===d.mon})))||void 0===n?void 0:n.label,C=null===(t=T.find((function(e){return e.value===p.dow})))||void 0===t?void 0:t.label,Z="";switch(O){case"year":var x=null===(i=Q(d.hour))||void 0===i?void 0:i.label,k=null===(r=U(d.min))||void 0===r?void 0:r.label;Z=B+" on "+E+" of "+y+" at "+x+":"+k;break;case"month":x=null===(o=Q(w.hour))||void 0===o?void 0:o.label,k=null===(a=U(w.min))||void 0===a?void 0:a.label,Z=B+" on "+E+" at "+x+":"+k;break;case"week":x=null===(l=Q(p.hour))||void 0===l?void 0:l.label,k=null===(s=U(p.min))||void 0===s?void 0:s.label,Z=B+" on "+C+" at "+x+":"+k;break;case"day":x=null===(c=Q(g.hour))||void 0===c?void 0:c.label,k=null===(u=U(g.min))||void 0===u?void 0:u.label,Z=B+" at "+x+":"+k;break;case"hour":Z=B+" "+(0,h._6)(+v.min,"minute")+" past the hour";break;case"minute":Z=V+" "+b.min+" minutes";break;case"custom":Z=m().toString(P,{throwExceptionOnParseError:!1})}return f.createElement("div",{"data-testid":"schedule-description"},Z)}),[M,B,V,P]);return f.createElement(l.Z,{className:u()(Y,"cron-row"),"data-testid":"cron-container",gutter:[16,0]},f.createElement(a.Z,{"data-testid":"time-dropdown-container",span:12},f.createElement(o.Z.Item,{initialValue:H,label:x("label.every"),labelCol:{span:24},name:"period"},f.createElement(r.Z,{className:"w-full","data-testid":"cron-type",disabled:W||F,id:"cronType",options:L.map((function(e){return{label:e.label,value:e.value}})),value:H,onChange:function(n){z((0,i.pi)((0,i.pi)({},M),{selectedPeriod:n})),"custom"===n?(N("0 0 * * *"),e.onChange("0 0 * * *")):""===n&&(N(""),e.onChange("")),I((function(e){return(0,i.pi)((0,i.pi)({},e),{selectedPeriod:n})}))}}))),"custom"===M.selectedPeriod?f.createElement(a.Z,{span:12},f.createElement(o.Z.Item,{className:"m-b-0",initialValue:"0 0 * * *",label:x("label.cron"),labelCol:{span:24},name:"cron",rules:[{required:!0},{validator:function(e,n){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){return[2,m().toString(n)]}))}))}}]},f.createElement(s.Z,{type:"text",value:P,onChange:function(n){N(n.target.value),e.onChange(n.target.value)}}))):f.createElement(f.Fragment,null,"week"===M.selectedPeriod?(Z=M.selectedWeekOption,"week"===M.selectedPeriod&&f.createElement(f.Fragment,null,f.createElement(a.Z,{span:12},f.createElement(o.Z.Item,{"data-testid":"week-segment-time-container",label:x("label.time"),labelCol:{span:24}},f.createElement("div",{className:"d-flex","data-testid":"week-segment-time-options-container"},$(Z,(function(e){return _(e,"hour")})),f.createElement("span",{className:"m-x-sm self-center"},":"),ee(Z,(function(e){return _(e,"min")}))))),f.createElement(a.Z,{span:12},f.createElement(o.Z.Item,{"data-testid":"week-segment-day-option-container",label:x("label.day"),labelCol:{span:24}},f.createElement("div",{className:"cron-badge-option-container week-opt-container"},ne(T,Z.dow,1,(function(e){return _(e,"dow")}))))))):f.createElement(a.Z,{span:12},(C=M.selectedMinOption,"minute"===M.selectedPeriod&&f.createElement(o.Z.Item,{"data-testid":"minute-segment-container",label:x("label.minute"),labelCol:{span:24}},(E=C,y=function(e){return function(e,n){var t,r=((t={}).min=e,t),o=M.selectedMinOption,a=Object.assign({},o,r);z((0,i.pi)((0,i.pi)({},M),{selectedMinOption:a})),I((function(e){return(0,i.pi)((0,i.pi)({},e),{selectedMinOption:a})}))}(e)},f.createElement(r.Z,{className:"w-full","data-testid":"minute-segment-options",disabled:e.disabled,id:"minute-segment-select",options:J.map((function(e){return{label:e.label,value:e.value}})),value:E.min,onChange:y})))),(O=M.selectedHourOption,"hour"===M.selectedPeriod&&f.createElement(o.Z.Item,{"data-testid":"hour-segment-container",label:x("label.minute"),labelCol:{span:24}},ee(O,(function(e){return function(e,n){var t,r=((t={}).min=e,t),o=M.selectedHourOption,a=Object.assign({},o,r);z((0,i.pi)((0,i.pi)({},M),{selectedHourOption:a})),I((function(e){return(0,i.pi)((0,i.pi)({},e),{selectedHourOption:a})}))}(e)})))),(w=M.selectedDayOption,"day"===M.selectedPeriod&&f.createElement(f.Fragment,null,f.createElement(o.Z.Item,{"data-testid":"day-segment-container",label:x("label.time"),labelCol:{span:24}},f.createElement("div",{className:"d-flex","data-testid":"time-option-container"},$(w,(function(e){return X(e,"hour")})),f.createElement("span",{className:"m-x-sm self-center"},":"),ee(w,(function(e){return X(e,"min")})))))),(d=M.selectedMonthOption,"month"===M.selectedPeriod&&f.createElement(f.Fragment,null,f.createElement("div",{className:"cron-field-row"},f.createElement("span",{className:"m-l-xs"},x("label.date")+":"),f.createElement("div",{className:"cron-badge-option-container month-opt-container"},ne(G,d.dom,0,(function(e){return q(e,"dom")})))),f.createElement("div",{className:"cron-field-row"},f.createElement("span",{className:"m-l-xs"},x("label.time")+":"),$(d,(function(e){return q(e,"hour")}))+"\n            :\n            "+ee(d,(function(e){return q(e,"min")}))))),(c=M.selectedYearOption,"year"===M.selectedPeriod&&f.createElement(f.Fragment,null,f.createElement("div",{className:"cron-field-row"},f.createElement("span",{className:"m-l-xs"},x("label.month")+":"),f.createElement("div",{className:"cron-badge-option-container month-opt-container"},ne(j,c.mon,3,(function(e){return K(e,"mon")})))),f.createElement("div",{className:"cron-field-row"},f.createElement("span",{className:"m-l-xs"},x("label.date")+":"),f.createElement("div",{className:"cron-badge-option-container month-opt-container"},ne(G,c.dom,0,(function(e){return K(e,"dom")})))),f.createElement("div",{className:"cron-field-row"},f.createElement("span",{className:"m-l-xs"},x("label.time")+":"),$(c,(function(e){return K(e,"hour")}))+"\n            :\n            "+ee(c,(function(e){return K(e,"min")}))))))),f.createElement(a.Z,{span:24},te),(0,p.isEmpty)(P)&&f.createElement(a.Z,{span:24},f.createElement("p",{"data-testid":"manual-segment-container"},x("message.pipeline-will-trigger-manually"))))}},19894:function(e,n,t){t.d(n,{w:function(){return a}});var i=t(70655),r=t(67294),o=t(97354),a=function(){var e=(0,i.CR)((0,r.useState)(!1),2),n=e[0],t=e[1],a=(0,i.CR)((0,r.useState)(!1),2),l=a[0],s=a[1],c=(0,i.CR)((0,r.useState)(),2),u=c[0],d=c[1],m=(0,i.CR)((0,r.useState)(),2),p=m[0],f=m[1],v=(0,i.CR)((0,r.useState)("unknown"),2),h=v[0],b=v[1],g=function(){return(0,i.mG)(void 0,void 0,void 0,(function(){var e,n;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:t(!0),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,(0,o.Ef)()];case 2:return e=i.sent(),s(200===e.code),f(e.reason),b(e.platform),[3,5];case 3:return n=i.sent(),d(n),s(!1),[3,5];case 4:return t(!1),[7];case 5:return[2]}}))}))};return(0,r.useEffect)((function(){g()}),[]),{isFetchingStatus:n,isAirflowAvailable:l,error:u,fetchAirflowStatus:g,reason:p,platform:h}}},97354:function(e,n,t){t.d(n,{E0:function(){return u},Ef:function(){return b},FD:function(){return m},MX:function(){return O},Pj:function(){return d},XZ:function(){return s},aw:function(){return p},cB:function(){return v},fT:function(){return w},g6:function(){return f},ne:function(){return c},tr:function(){return h},ut:function(){return g},z8:function(){return E}});var i=t(70655),r=t(80129),o=t.n(r),a=t(22334),l=t(2598),s=function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,l.Z.post("/services/ingestionPipelines",e)];case 1:return[2,n.sent().data]}}))}))},c=function(e,n){return(0,i.mG)(void 0,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return t=(0,a.JP)("/services/ingestionPipelines/name/"+e,n),[4,l.Z.get(t)];case 1:return[2,i.sent().data]}}))}))},u=function(e,n){return(0,i.mG)(void 0,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return t=(0,a.JP)("/services/ingestionPipelines/name/"+e,n),[4,l.Z.get(t)];case 1:return[2,i.sent().data]}}))}))},d=function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var n,t,r,s,c,u,d,m,p;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=e.arrQueryFields,t=e.serviceFilter,r=e.paging,s=e.pipelineType,c=e.testSuite,u=e.serviceType,d=e.limit,m=o().stringify({service:t,testSuite:c,pipelineType:(null==s?void 0:s.length)?s.join(","):void 0,serviceType:u,limit:d}),p=""+(0,a.JP)("/services/ingestionPipelines",n,m)+(r||""),[4,l.Z.get(p)];case 1:return[2,i.sent().data]}}))}))},m=function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,l.Z.post("/services/ingestionPipelines/trigger/"+e)];case 1:return[2,n.sent().data]}}))}))},p=function(e){return l.Z.post("/services/ingestionPipelines/deploy/"+e)},f=function(e){return l.Z.post("/services/ingestionPipelines/toggleIngestion/"+e)},v=function(e){return l.Z.delete("/services/ingestionPipelines/"+e+"?hardDelete=true")},h=function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,l.Z.put("/services/ingestionPipelines",e)];case 1:return[2,n.sent().data]}}))}))},b=function(){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return[4,l.Z.get("/services/ingestionPipelines/status")];case 1:return[2,e.sent().data]}}))}))},g=function(){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return[4,l.Z.get("/services/ingestionPipelines/ip")];case 1:return[2,e.sent()]}}))}))},w=function(e,n){return l.Z.get("/services/ingestionPipelines/logs/"+e+"/last",{params:{after:n}})},O=function(e){return l.Z.post("/services/ingestionPipelines/kill/"+e)},E=function(e,n){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,l.Z.get("/services/ingestionPipelines/"+e+"/pipelineStatus",{params:n})];case 1:return[2,t.sent().data]}}))}))}}}]);