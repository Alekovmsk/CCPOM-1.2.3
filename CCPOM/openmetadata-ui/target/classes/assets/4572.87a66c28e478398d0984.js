"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[4572,4519,3111],{84519:function(e,t,n){n.r(t),n.d(t,{ReactComponent:function(){return l}});var i,a=n(67294);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r.apply(this,arguments)}var l=function(e){return a.createElement("svg",r({width:8,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"img"},e),i||(i=a.createElement("path",{d:"M4 10.2a.27.27 0 0 0-.193.08L1.08 13.03a.276.276 0 0 0 0 .39c.106.107.28.107.386 0L4 10.863l2.534 2.555a.27.27 0 0 0 .386 0 .276.276 0 0 0 0-.388l-2.727-2.75A.27.27 0 0 0 4 10.2ZM4 5.8a.27.27 0 0 1-.193-.08L1.08 2.97a.276.276 0 0 1 0-.39.271.271 0 0 1 .386 0L4 5.137 6.534 2.58a.271.271 0 0 1 .386 0 .276.276 0 0 1 0 .388L4.193 5.72A.27.27 0 0 1 4 5.8Z",fill:"currentColor",stroke:"currentColor",strokeWidth:.8})))};t.default="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDggMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik00LjAwMDAxIDEwLjIwMDRDMy45MzAyNiAxMC4yMDA0IDMuODYwNDQgMTAuMjI3MiAzLjgwNzE5IDEwLjI4MDlMMS4wNzk5MyAxMy4wMzA2QzAuOTczMzU4IDEzLjEzODEgMC45NzMzNTggMTMuMzEyIDEuMDc5OTMgMTMuNDE5NEMxLjE4NjQ5IDEzLjUyNjggMS4zNTkwNiAxMy41MjY5IDEuNDY1NTYgMTMuNDE5NEw0LjAwMDAxIDEwLjg2NDFMNi41MzQ0NiAxMy40MTk0QzYuNjQxMDMgMTMuNTI2OSA2LjgxMzYgMTMuNTI2OSA2LjkyMDEgMTMuNDE5NEM3LjAyNjYgMTMuMzEyIDcuMDI2NjcgMTMuMTM4IDYuOTIwMSAxMy4wMzA2TDQuMTkyODMgMTAuMjgwOUM0LjEzOTU4IDEwLjIyNzIgNC4wNjk3NiAxMC4yMDA0IDQuMDAwMDEgMTAuMjAwNFoiIGZpbGw9ImN1cnJlbnRDb2xvciIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMC44Ii8+CjxwYXRoIGQ9Ik00LjAwMDAxIDUuNzk5NjNDMy45MzAyNiA1Ljc5OTYzIDMuODYwNDQgNS43NzI3NiAzLjgwNzE5IDUuNzE5MDdMMS4wNzk5MyAyLjk2OTM5QzAuOTczMzU4IDIuODYxOTQgMC45NzMzNTggMi42ODc5NiAxLjA3OTkzIDIuNTgwNThDMS4xODY0OSAyLjQ3MzIxIDEuMzU5MDYgMi40NzMxNCAxLjQ2NTU2IDIuNTgwNThMNC4wMDAwMSA1LjEzNTg2TDYuNTM0NDYgMi41ODA1OEM2LjY0MTAzIDIuNDczMTQgNi44MTM2IDIuNDczMTQgNi45MjAxIDIuNTgwNThDNy4wMjY2IDIuNjg4MDMgNy4wMjY2NyAyLjg2MjAxIDYuOTIwMSAyLjk2OTM5TDQuMTkyODMgNS43MTkwN0M0LjEzOTU4IDUuNzcyNzYgNC4wNjk3NiA1Ljc5OTYzIDQuMDAwMDEgNS43OTk2M1oiIGZpbGw9ImN1cnJlbnRDb2xvciIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMC44Ii8+Cjwvc3ZnPgo="},63111:function(e,t,n){n.r(t),n.d(t,{ReactComponent:function(){return l}});var i,a=n(67294);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r.apply(this,arguments)}var l=function(e){return a.createElement("svg",r({width:8,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"img"},e),i||(i=a.createElement("path",{d:"M4 13.8a.27.27 0 0 1-.193-.08L1.08 10.97a.276.276 0 0 1 0-.39.271.271 0 0 1 .386 0L4 13.137l2.534-2.555a.27.27 0 0 1 .386 0 .276.276 0 0 1 0 .388l-2.727 2.75A.27.27 0 0 1 4 13.8ZM4 2.2a.27.27 0 0 0-.193.08L1.08 5.03a.276.276 0 0 0 0 .39c.106.107.28.107.386 0L4 2.863 6.534 5.42c.107.108.28.108.386 0a.276.276 0 0 0 0-.388L4.193 2.28A.27.27 0 0 0 4 2.2Z",fill:"currentColor",stroke:"currentColor",strokeWidth:.8})))};t.default="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDggMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik00LjAwMDAxIDEzLjc5OTZDMy45MzAyNiAxMy43OTk2IDMuODYwNDQgMTMuNzcyOCAzLjgwNzE5IDEzLjcxOTFMMS4wNzk5MyAxMC45Njk0QzAuOTczMzU4IDEwLjg2MTkgMC45NzMzNTggMTAuNjg4IDEuMDc5OTMgMTAuNTgwNkMxLjE4NjQ5IDEwLjQ3MzIgMS4zNTkwNiAxMC40NzMxIDEuNDY1NTYgMTAuNTgwNkw0LjAwMDAxIDEzLjEzNTlMNi41MzQ0NiAxMC41ODA2QzYuNjQxMDMgMTAuNDczMSA2LjgxMzYgMTAuNDczMSA2LjkyMDEgMTAuNTgwNkM3LjAyNjYgMTAuNjg4IDcuMDI2NjcgMTAuODYyIDYuOTIwMSAxMC45Njk0TDQuMTkyODMgMTMuNzE5MUM0LjEzOTU4IDEzLjc3MjggNC4wNjk3NiAxMy43OTk2IDQuMDAwMDEgMTMuNzk5NloiIGZpbGw9ImN1cnJlbnRDb2xvciIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMC44Ii8+CjxwYXRoIGQ9Ik00LjAwMDAxIDIuMjAwMzdDMy45MzAyNiAyLjIwMDM3IDMuODYwNDQgMi4yMjcyNCAzLjgwNzE5IDIuMjgwOTNMMS4wNzk5MyA1LjAzMDYxQzAuOTczMzU4IDUuMTM4MDYgMC45NzMzNTggNS4zMTIwNCAxLjA3OTkzIDUuNDE5NDJDMS4xODY0OSA1LjUyNjc5IDEuMzU5MDYgNS41MjY4NiAxLjQ2NTU2IDUuNDE5NDJMNC4wMDAwMSAyLjg2NDE0TDYuNTM0NDYgNS40MTk0MkM2LjY0MTAzIDUuNTI2ODYgNi44MTM2IDUuNTI2ODYgNi45MjAxIDUuNDE5NDJDNy4wMjY2IDUuMzExOTcgNy4wMjY2NyA1LjEzNzk5IDYuOTIwMSA1LjAzMDYxTDQuMTkyODMgMi4yODA5M0M0LjEzOTU4IDIuMjI3MjQgNC4wNjk3NiAyLjIwMDM3IDQuMDAwMDEgMi4yMDAzN1oiIGZpbGw9ImN1cnJlbnRDb2xvciIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMC44Ii8+Cjwvc3ZnPgo="},38237:function(e,t,n){var i=n(8081),a=n.n(i),r=n(23645),l=n.n(r)()(a());l.push([e.id,'/*\n *  Copyright 2022 Collate.\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n/*\n *  Copyright 2022 Collate.\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n/* navbar+tab_height+padding = 64+46+12  */\n.message-card-collapse {\n  background-color: #fff;\n}\n.message-card-collapse .ant-collapse-header-text {\n  width: 95%;\n}\n.message-card-collapse .ant-collapse-header {\n  background-color: transparent;\n}\n.message-card-collapse .ant-collapse-content {\n  border-top-width: 0px;\n}\n.message-card-collapse .ant-collapse-content-box {\n  padding-top: 0px;\n}\n.message-card-collapse .ant-tag {\n  padding: 4px 12px;\n  font-size: 14px;\n}\n',""]),t.Z=l},71999:function(e,t,n){var i=n(8081),a=n.n(i),r=n(23645),l=n.n(r)()(a());l.push([e.id,'/*\n *  Copyright 2023 Collate.\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n/*\n *  Copyright 2022 Collate.\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n/* navbar+tab_height+padding = 64+46+12  */\n.dbt-tab-container .ant-card-body {\n  padding: 1px 0 0 8px;\n}\n.dbt-tab-container .query-editor .CodeMirror {\n  height: calc(100vh - 320px);\n}\n.dbt-tab-container .query-lines {\n  height: 26px;\n  margin-right: 0;\n  border-radius: 12px;\n  color: #757575;\n  border: 1px solid #0000001a;\n  background-color: #eeeeee;\n  display: flex;\n  align-items: center;\n  padding: 0 8px;\n}\n',""]),t.Z=l},69509:function(e,t,n){n.d(t,{Z:function(){return Z}});var i=n(70655),a=n(56256),r=n(71230),l=n(15746),s=n(96486),c=n(67294),o=n(68432),u=n(69523),d=n(92693),p=n(64632),m=n(51513),y=n(8277),h=n(93895),M=n(83716),g=n(27279),f=n(60331),E=n(95549),N=n(93379),D=n.n(N),I=n(7795),v=n.n(I),A=n(90569),w=n.n(A),T=n(3565),b=n.n(T),C=n(19216),S=n.n(C),x=n(44589),L=n.n(x),j=n(38237),O={};O.styleTagTransform=L(),O.setAttributes=b(),O.insert=w().bind(null,"head"),O.domAPI=v(),O.insertStyleElement=S(),D()(j.Z,O),j.Z&&j.Z.locals&&j.Z.locals;var k=g.Z.Panel,z=function(e){var t=e.message,n=(0,o.$)().t,r=(0,i.CR)((0,c.useState)(c.createElement(a.Z.Text,{ellipsis:!0,className:"text-primary"},t)),2),l=r[0],s=r[1],u=(0,i.CR)((0,c.useState)(!1),2),d=u[0],p=u[1];return(0,c.useEffect)((function(){s(d?c.createElement(f.Z,{"data-testid":"expanded-header",id:"sampleData-value"},n("label.value")):c.createElement(a.Z.Text,{ellipsis:!0,className:"text-primary","data-testid":"collapsed-header"},t))}),[d]),c.createElement(g.Z,{className:"message-card-collapse",onChange:function(){return p((function(e){return!e}))}},c.createElement(k,{"data-testid":"message-card",header:l,key:"1"},c.createElement(E.Z,{className:"m-t-xs",editorClass:"topic-sample-data",options:{styleActiveLine:!1},value:t.replace(/'/g,'"')})))},Z=function(e){var t,n=e.entityId,g=e.entityType,f=(0,o.$)().t,E=(0,i.CR)((0,c.useState)(),2),N=E[0],D=E[1],I=(0,i.CR)((0,c.useState)(!1),2),v=I[0],A=I[1];return(0,c.useEffect)((function(){(0,i.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:A(!0),i.label=1;case 1:return i.trys.push([1,,6,7]),g!==p.py.TOPIC?[3,3]:[4,(0,y.d3)(n)];case 2:return t=i.sent(),[3,5];case 3:return[4,(0,m.pV)(n)];case 4:t=i.sent(),i.label=5;case 5:return e=t.sampleData,D(e),[3,7];case 6:return A(!1),[7];case 7:return[2]}}))}))}),[n]),v?c.createElement(u.Z,null):(0,s.isUndefined)(N)?c.createElement("div",{className:"m-t-xlg","data-testid":"no-data"},c.createElement(M.Z,null,c.createElement(a.Z.Paragraph,null,c.createElement(h.u1,{i18nKey:"message.view-sample-data-entity",renderElement:c.createElement("a",{href:d.tf,rel:"noreferrer",style:{color:"#1890ff"},target:"_blank"}),values:{entity:f("label.metadata-ingestion")}})))):c.createElement(r.Z,{className:"p-md",gutter:[16,16]},null===(t=N.messages)||void 0===t?void 0:t.map((function(e){return c.createElement(l.Z,{key:e,span:24},c.createElement(z,{message:e}))})))}},41706:function(e,t,n){var i=n(71577),a=n(19650),r=n(67294),l=n(68432),s=n(84519),c=n(63111),o=n(62761);t.Z=function(e){var t=e.expandedRowKeys,n=e.allRowKeys,u=e.toggleExpandAll,d=(0,l.$)().t,p=(0,r.useMemo)((function(){return t.length===n.length}),[t,n]);return r.createElement(i.Z,{className:"text-primary rounded-4","data-testid":"toggle-expand-button",size:"small",type:"text",onClick:u},r.createElement(a.Z,{align:"center",size:4},p?r.createElement(s.ReactComponent,{color:o.MJ,"data-testid":"collapse-icon",height:"14px"}):r.createElement(c.ReactComponent,{color:o.MJ,"data-testid":"expand-icon",height:"14px"}),d(p?"label.collapse-all":"label.expand-all")))}},46600:function(e,t,n){n.d(t,{Z:function(){return x}});var i=n(91894),a=n(19650),r=n(60331),l=n(71577),s=n(94184),c=n.n(s),o=n(96486),u=n(67294),d=n(68432),p=n(51297),m=n(27914),y=n(97010),h=n(95549),M=n(93379),g=n.n(M),f=n(7795),E=n.n(f),N=n(90569),D=n.n(N),I=n(3565),v=n.n(I),A=n(19216),w=n.n(A),T=n(44589),b=n.n(T),C=n(71999),S={};S.styleTagTransform=b(),S.setAttributes=v(),S.insert=D().bind(null,"head"),S.domAPI=E(),S.insertStyleElement=w(),g()(C.Z,S),C.Z&&C.Z.locals&&C.Z.locals;var x=function(e){var t=e.title,n=e.sqlQuery,s=(0,d.$)().t,M=(0,u.useMemo)((function(){var e=(0,o.split)(n,"\n").length;return{queryLine:e+" "+s(e>1?"label.line-plural":"label.line"),lineCount:e}}),[n]),g=M.queryLine,f=M.lineCount,E=(0,y.V)(n).onCopyToClipBoard;return u.createElement(i.Z,{className:"m-md w-auto dbt-tab-container",extra:u.createElement(a.Z,{className:"m-y-xs"},u.createElement(r.Z,{className:"query-lines","data-testid":"query-line"},g),u.createElement(l.Z,{className:"flex-center button-size bg-white","data-testid":"query-entity-copy-button",icon:u.createElement(p.ReactComponent,{height:16,width:16}),onClick:E})),title:t},u.createElement(h.Z,{className:"custom-code-mirror-theme",editorClass:c()(f>4?"table-query-editor":"query-editor"),mode:{name:m.Q.SQL},options:{readOnly:!0},value:n}))}},79317:function(e,t,n){n.d(t,{K:function(){return a},c:function(){return r}});var i=n(80307),a={x:1200},r=[i.a.ForeignKey,i.a.PrimaryKey]},24572:function(e,t,n){n.r(t),n.d(t,{default:function(){return le}});var i=n(70655),a=n(71230),r=n(15746),l=n(19650),s=n(25499),c=n(34901),o=n(96486),u=n(67294),d=n(68432),p=n(15137),m=n(33994),y=n(75642),h=n(19521),M=n(95137),g=n(76597),f=n(113),E=n(83716),N=n(46600),D=n(9600),I=n(33873),v=n(16177),A=n(69523),w=n(80646),T=n(8752),b=n(79839),C=n(69509),S=n(67167),x=n(71406),L=n(1727),j=n(62761),O=n(61105),k=n(64632),z=n(59583),Z=n(90058),R=n(76373),Y=n(51513),U=n(93895),Q=n(24671),P=n(39570),G=n(85145),J=n(40734),F=n(38333),_=n(73553),H=n(46321),q=n(59817),X=n(41706),W=n(94199),V=n(56256),K=n(89368),B=n(37565),$=n(59136),ee=n(61289),te=n(55608),ne=n(79317),ie=n(36775),ae=function(e){var t=e.searchIndexFields,n=e.searchedFields,a=e.expandableConfig,r=e.onUpdate,l=e.hasDescriptionEditAccess,s=e.hasTagEditAccess,c=e.isReadOnly,p=void 0!==c&&c,m=e.onThreadLinkSelect,y=e.entityFqn,h=(0,d.$)().t,M=(0,i.CR)((0,u.useState)(),2),g=M[0],f=M[1],E=u.useMemo((function(){return(0,G._l)(n)}),[n]),N=(0,u.useCallback)((function(e,t){f({field:e,index:t})}),[]),D=(0,u.useCallback)((function(){f(void 0)}),[]),I=function(e,n){return(0,i.mG)(void 0,void 0,void 0,(function(){var a,l;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return e&&n?(a=(0,o.cloneDeep)(t),(0,F.OJ)(null!==(l=n.fullyQualifiedName)&&void 0!==l?l:"",e,a),[4,r(a)]):[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},v=(0,u.useCallback)((function(e,t){N(e,t)}),[N]),A=(0,u.useCallback)((function(e,t){var n=(0,o.isEmpty)(e)?t.dataType:e;return(0,o.isEmpty)(n)?u.createElement(u.Fragment,null,j.lH):u.createElement("div",{"data-testid":t.name+"-data-type"},p||n&&n.length<25&&!p?(0,o.toLower)(n):u.createElement(W.Z,{title:(0,o.toLower)(n)},u.createElement(V.Z.Text,{ellipsis:!0,className:"cursor-pointer"},n)))}),[p]),w=(0,u.useCallback)((function(e,t,n){var i;return u.createElement(ee.Z,{columnData:{fqn:null!==(i=t.fullyQualifiedName)&&void 0!==i?i:"",field:t.description},entityFqn:y,entityType:k.py.SEARCH_INDEX,hasEditPermission:l,index:n,isReadOnly:p,onClick:function(){return v(t,n)},onThreadLinkSelect:m})}),[y,l,p,v,m]),T=(0,u.useMemo)((function(){return[{title:h("label.name"),dataIndex:"name",key:"name",accessor:"name",width:220,fixed:"left",render:function(e,t){return u.createElement("div",{className:"d-inline-flex w-max-90"},u.createElement("span",{className:"break-word"},(0,Q.C_)(t)))}},{title:h("label.type"),dataIndex:"dataTypeDisplay",key:"dataTypeDisplay",accessor:"dataTypeDisplay",ellipsis:!0,width:180,render:A},{title:h("label.description"),dataIndex:"description",key:"description",accessor:"description",width:320,render:w},{title:h("label.tag-plural"),dataIndex:"tags",key:"tags",accessor:"tags",width:250,render:function(e,t,n){return u.createElement(te.Z,{entityFqn:y,entityType:k.py.SEARCH_INDEX,handleTagSelection:I,hasTagEditAccess:s,index:n,isReadOnly:p,record:t,tags:e,type:ie.c6.Classification,onThreadLinkSelect:m})}},{title:h("label.glossary-term-plural"),dataIndex:"tags",key:"tags",accessor:"tags",width:250,render:function(e,t,n){return u.createElement(te.Z,{entityFqn:y,entityType:k.py.SEARCH_INDEX,handleTagSelection:I,hasTagEditAccess:s,index:n,isReadOnly:p,record:t,tags:e,type:ie.c6.Glossary,onThreadLinkSelect:m})}}]}),[y,p,s,v,I,A,w,I,m]);return u.createElement(u.Fragment,null,u.createElement(B.Z,{bordered:!0,className:"m-b-sm",columns:T,"data-testid":"search-index-fields-table",dataSource:E,expandable:a,locale:{emptyText:u.createElement(K.Z,null)},pagination:!1,rowKey:"fullyQualifiedName",scroll:ne.K,size:"middle"}),g&&u.createElement($.p,{header:h("label.edit-entity",{entity:h("label.field")})+': "'+(0,Q.C_)(g.field)+'"',placeholder:h("label.enter-field-description",{field:h("label.field")}),value:g.field.description,visible:Boolean(g),onCancel:D,onSave:function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return(0,o.isUndefined)(g)||!g.field.fullyQualifiedName?[3,2]:(n=(0,o.cloneDeep)(t),(0,F.Q6)(g.field.fullyQualifiedName,e,n),[4,r(n)]);case 1:return i.sent(),f(void 0),[3,3];case 2:f(void 0),i.label=3;case 3:return[2]}}))}))}}))},re=function(e){var t=e.fields,n=e.onUpdate,l=e.hasDescriptionEditAccess,s=e.hasTagEditAccess,c=e.onThreadLinkSelect,p=e.isReadOnly,m=void 0!==p&&p,y=e.entityFqn,h=(0,d.$)().t,M=(0,i.CR)((0,u.useState)(""),2),g=M[0],f=M[1],E=(0,i.CR)((0,u.useState)([]),2),N=E[0],D=E[1],I=(0,i.CR)((0,u.useState)([]),2),v=I[0],A=I[1],w=(0,u.useMemo)((function(){return(0,o.sortBy)(t,"ordinalPosition")}),[t]),T=(0,u.useCallback)((function(e){f(e)}),[]),b=(0,u.useMemo)((function(){return(0,F.Ht)(t,"fullyQualifiedName")}),[t]),C=(0,u.useCallback)((function(){N.length<b.length?D(b):D([])}),[N,b]),S=(0,u.useMemo)((function(){return(0,i.pi)((0,i.pi)({},(0,F.Bn)()),{rowExpandable:function(e){return!(0,o.isEmpty)(e.children)},expandedRowKeys:N,onExpand:function(e,t){var n;D(e?(0,i.ev)((0,i.ev)([],(0,i.CR)(N)),[null!==(n=t.fullyQualifiedName)&&void 0!==n?n:""]):N.filter((function(e){return e!==t.fullyQualifiedName})))}})}),[N]);return(0,u.useEffect)((function(){if(g){var e=(0,F.iK)(w,g);A(e),D(b)}else A(w),D([])}),[g,w]),u.createElement(u.Fragment,null,u.createElement(a.Z,{align:"middle",justify:"space-between"},u.createElement(r.Z,{span:12},u.createElement(q.Z,{removeMargin:!0,placeholder:""+h("message.find-in-table"),searchValue:g,typingInterval:500,onSearch:T})),u.createElement(r.Z,null,u.createElement(X.Z,{allRowKeys:b,expandedRowKeys:N,toggleExpandAll:C}))),u.createElement(ae,{entityFqn:y,expandableConfig:S,hasDescriptionEditAccess:l,hasTagEditAccess:s,isReadOnly:m,searchIndexFields:t,searchedFields:v,onThreadLinkSelect:c,onUpdate:n}))},le=function(){var e,t=this,n=(0,m.$J)(),q=n.postFeed,X=n.deleteFeed,W=n.updateFeed,V=(0,T.BL)().getEntityPermissionByFqn,K=(0,p.UO)(),B=K.fqn,$=K.tab,ee=void 0===$?k.M8.FIELDS:$,te=(0,d.$)().t,ne=(0,p.k6)(),ie=(0,M.Eu)().currentUser,ae=null!==(e=null==ie?void 0:ie.id)&&void 0!==e?e:"",le=(0,i.CR)((0,u.useState)(!0),2),se=le[0],ce=le[1],oe=(0,i.CR)((0,u.useState)(),2),ue=oe[0],de=oe[1],pe=(0,i.CR)((0,u.useState)(0),2),me=pe[0],ye=pe[1],he=(0,i.CR)((0,u.useState)(!1),2),Me=he[0],ge=he[1],fe=(0,i.CR)((0,u.useState)(""),2),Ee=fe[0],Ne=fe[1],De=(0,i.CR)((0,u.useState)(z.T.Conversation),2),Ie=De[0],ve=De[1],Ae=(0,i.CR)((0,u.useState)(P.Bd),2),we=Ae[0],Te=Ae[1],be=(0,u.useMemo)((function(){return we.ViewAll||we.ViewBasic}),[we]),Ce=(0,u.useMemo)((function(){return(0,J.p2)(B)}),[B]),Se=function(){return(0,i.mG)(t,void 0,void 0,(function(){var e,t,n;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:ce(!0),i.label=1;case 1:return i.trys.push([1,3,4,5]),e=G.he,[4,(0,Y.h$)(B,e)];case 2:return t=i.sent(),de(t),(0,U.nk)({displayName:(0,Q.C_)(t),entityType:k.py.SEARCH_INDEX,fqn:null!==(n=t.fullyQualifiedName)&&void 0!==n?n:"",serviceType:t.serviceType,timestamp:0,id:t.id}),[3,5];case 3:return i.sent(),[3,5];case 4:return ce(!1),[7];case 5:return[2]}}))}))},xe=function(){ge(!0)},Le=function(){ge(!1)},je=(0,u.useMemo)((function(){if(ue){var e=ue.tags;return(0,i.pi)((0,i.pi)({},ue),{tier:(0,F.Zk)(null!=e?e:[]),searchIndexTags:(0,F.nD)(null!=e?e:[]),entityName:(0,Q.C_)(ue)})}return{}}),[ue,null==ue?void 0:ue.tags]),Oe=je.tier,ke=je.searchIndexTags,ze=je.owner,Ze=je.version,Re=je.followers,Ye=void 0===Re?[]:Re,Ue=je.description,Qe=je.entityName,Pe=je.deleted,Ge=je.id,Je=void 0===Ge?"":Ge,Fe=(0,u.useMemo)((function(){return{editTagsPermission:(we.EditTags||we.EditAll)&&!Pe,editDescriptionPermission:(we.EditDescription||we.EditAll)&&!Pe,editCustomAttributePermission:(we.EditAll||we.EditCustomFields)&&!Pe,editLineagePermission:(we.EditAll||we.EditLineage)&&!Pe,viewSampleDataPermission:we.ViewAll||we.ViewSampleData,viewAllPermission:we.ViewAll}}),[we,Pe]),_e=Fe.editTagsPermission,He=Fe.editDescriptionPermission,qe=Fe.editCustomAttributePermission,Xe=Fe.editLineagePermission,We=Fe.viewSampleDataPermission,Ve=Fe.viewAllPermission,Ke=(0,u.useCallback)((function(e){return(0,i.mG)(t,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,,2,3]),[4,V(b.A.SEARCH_INDEX,e)];case 1:return t=n.sent(),Te(t),[3,3];case 2:return ce(!1),[7];case 3:return[2]}}))}))}),[V]),Be=function(){return(0,U.Aq)(k.py.SEARCH_INDEX,Ce,ye)},$e=(0,u.useCallback)((function(e){if(!ue)return e;var t=(0,c.qu)(ue,e);return(0,Y.AN)(Je,t)}),[ue,Je]),et=function(e,n){return(0,i.mG)(t,void 0,void 0,(function(){var t,a;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,$e(e)];case 1:return t=r.sent(),de((function(e){var a,r,l;if(e)return"tags"===n?(0,i.pi)((0,i.pi)({},e),((a={version:t.version})[n]=(0,U.ch)(null!==(l=t.tags)&&void 0!==l?l:[]),a)):(0,i.pi)((0,i.pi)({},e),((r={version:t.version})[n]=t[n],r))})),Be(),[3,3];case 2:return a=r.sent(),(0,H.Eo)(a),[3,3];case 3:return[2]}}))}))},tt=(0,u.useCallback)((function(e){return(0,i.mG)(t,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return ue?(t=(0,i.pi)((0,i.pi)({},ue),{owner:e?(0,i.pi)((0,i.pi)({},ze),e):void 0}),[4,et(t,"owner")]):[2];case 1:return n.sent(),[2]}}))}))}),[ze,ue]),nt=function(e){return(0,i.mG)(t,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return ue?Ue===e?[3,2]:(t=(0,i.pi)((0,i.pi)({},ue),{description:e}),[4,et(t,"description")]):[2];case 1:return n.sent(),ge(!1),[3,3];case 2:ge(!1),n.label=3;case 3:return[2]}}))}))},it=function(e){return(0,i.mG)(t,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return!ue||(0,o.isEqual)(ue.fields,e)?[3,2]:(t=(0,i.pi)((0,i.pi)({},ue),{fields:e}),[4,et(t,"fields")]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},at=function(e,t){Ne(e),t&&ve(t)},rt=function(e){return(0,i.mG)(t,void 0,void 0,(function(){var t,n;return(0,i.Jh)(this,(function(a){switch(a.label){case 0:return e&&ue?(t=(0,i.ev)((0,i.ev)([],(0,i.CR)(Oe?[Oe]:[])),(0,i.CR)(e)),n=(0,i.pi)((0,i.pi)({},ue),{tags:t}),[4,et(n,"tags")]):[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))},lt=function(e){return(0,i.mG)(t,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return t=(0,_.eY)(e),[4,rt(t)];case 1:return n.sent(),[2]}}))}))},st=(0,u.useCallback)((function(e){return(0,i.mG)(t,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return ue?[4,$e((0,i.pi)((0,i.pi)({},ue),{extension:e.extension}))]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}),[$e,ue]),ct=(0,u.useMemo)((function(){var e,t;return u.createElement(a.Z,{gutter:[0,16],id:"schemaDetails",wrap:!1},u.createElement(r.Z,{className:"p-t-sm m-l-lg tab-content-height p-r-lg",flex:"auto"},u.createElement("div",{className:"d-flex flex-col gap-4"},u.createElement(f.Z,{description:null==ue?void 0:ue.description,entityFqn:Ce,entityName:Qe,entityType:k.py.SEARCH_INDEX,hasEditAccess:He,isEdit:Me,owner:null==ue?void 0:ue.owner,showActions:!(null==ue?void 0:ue.deleted),onCancel:Le,onDescriptionEdit:xe,onDescriptionUpdate:nt,onThreadLinkSelect:at}),u.createElement(re,{entityFqn:Ce,fields:null!==(e=null==ue?void 0:ue.fields)&&void 0!==e?e:[],hasDescriptionEditAccess:He,hasTagEditAccess:_e,isReadOnly:null==ue?void 0:ue.deleted,onThreadLinkSelect:at,onUpdate:it}))),u.createElement(r.Z,{className:"entity-tag-right-panel-container","data-testid":"entity-right-panel",flex:"320px"},u.createElement(l.Z,{className:"w-full",direction:"vertical",size:"large"},u.createElement(I.Z,{activeDomain:null==ue?void 0:ue.domain,dataProducts:null!==(t=null==ue?void 0:ue.dataProducts)&&void 0!==t?t:[],hasPermission:!1}),u.createElement(x.Z,{displayType:L.F.READ_MORE,entityFqn:Ce,entityType:k.py.SEARCH_INDEX,permission:_e,selectedTags:ke,tagType:Z.c6.Classification,onSelectionChange:lt,onThreadLinkSelect:at}),u.createElement(x.Z,{displayType:L.F.READ_MORE,entityFqn:Ce,entityType:k.py.SEARCH_INDEX,permission:_e,selectedTags:ke,tagType:Z.c6.Glossary,onSelectionChange:lt,onThreadLinkSelect:at}))))}),[Me,ue,xe,nt,_e,He]),ot=(0,u.useMemo)((function(){var e,t;return[{label:u.createElement(S.Z,{id:k.M8.FIELDS,name:te("label.field-plural")}),key:k.M8.FIELDS,children:ct},{label:u.createElement(S.Z,{count:me,id:k.M8.ACTIVITY_FEED,isActive:ee===k.M8.ACTIVITY_FEED,name:te("label.activity-feed-and-task-plural")}),key:k.M8.ACTIVITY_FEED,children:u.createElement(m.ZP,null,u.createElement(y.K,{entityType:k.py.SEARCH_INDEX,fqn:null!==(e=null==ue?void 0:ue.fullyQualifiedName)&&void 0!==e?e:"",owner:null==ue?void 0:ue.owner,onFeedUpdate:Be,onUpdateEntityDetails:Se}))},{label:u.createElement(S.Z,{id:k.M8.SAMPLE_DATA,name:te("label.sample-data")}),key:k.M8.SAMPLE_DATA,children:We?u.createElement(C.Z,{entityId:null!==(t=null==ue?void 0:ue.id)&&void 0!==t?t:"",entityType:k.py.SEARCH_INDEX}):u.createElement("div",{className:"m-t-xlg"},u.createElement(E.Z,{type:O.Wx.PERMISSION}))},{label:u.createElement(S.Z,{id:k.M8.LINEAGE,name:te("label.lineage")}),key:k.M8.LINEAGE,children:u.createElement(v.Z,{deleted:null==ue?void 0:ue.deleted,entity:ue,entityType:k.py.SEARCH_INDEX,hasEditAccess:Xe})},{label:u.createElement(S.Z,{id:k.M8.SEARCH_INDEX_SETTINGS,name:te("label.search-index-setting-plural")}),key:k.M8.SEARCH_INDEX_SETTINGS,children:u.createElement(N.Z,{sqlQuery:JSON.stringify(null==ue?void 0:ue.searchIndexSettings),title:te("label.search-index-setting-plural")})},{label:u.createElement(S.Z,{id:k.M8.CUSTOM_PROPERTIES,name:te("label.custom-property-plural")}),key:k.M8.CUSTOM_PROPERTIES,children:u.createElement(g.t,{entityType:k.py.SEARCH_INDEX,handleExtensionUpdate:st,hasEditAccess:qe,hasPermission:Ve})}]}),[ct,ee,ue,me,Qe,st,Be,We,Xe,qe,Ve]),ut=(0,u.useCallback)((function(e){return(0,i.mG)(t,void 0,void 0,(function(){var t,n;return(0,i.Jh)(this,(function(a){switch(a.label){case 0:return ue?(t=(0,_.Jf)(ke,e),n=(0,i.pi)((0,i.pi)({},ue),{tags:t}),[4,et(n,"tags")]):[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))}),[ue,et,ke]),dt=function(e){de((function(t){return t?(0,i.pi)((0,i.pi)((0,i.pi)({},t),{deleted:!(null==t?void 0:t.deleted)}),e?{version:e}:{}):t}))},pt=(0,u.useCallback)((function(){return(0,i.mG)(t,void 0,void 0,(function(){var e,t,n,a;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,Y.vs)(Je,ae)];case 1:return e=r.sent(),t=e.changeDescription.fieldsAdded[0].newValue,n=(0,i.ev)((0,i.ev)([],(0,i.CR)(null!=Ye?Ye:[])),(0,i.CR)(t)),de((function(e){return e?(0,i.pi)((0,i.pi)({},e),{followers:n}):e})),Be(),[3,3];case 2:return a=r.sent(),(0,H.Eo)(a,te("server.entity-follow-error",{entity:(0,Q.C_)(ue)})),[3,3];case 3:return[2]}}))}))}),[ae,Je,Be]),mt=(0,u.useCallback)((function(){return(0,i.mG)(t,void 0,void 0,(function(){var e,t,n;return(0,i.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(0,Y.mM)(Je,ae)];case 1:return e=a.sent(),t=e.changeDescription.fieldsDeleted[0].oldValue,de((function(e){var n;return e?(0,i.pi)((0,i.pi)({},e),{followers:null===(n=e.followers)||void 0===n?void 0:n.filter((function(e){return e.id!==t[0].id}))}):e})),Be(),[3,3];case 2:return n=a.sent(),(0,H.Eo)(n,te("server.entity-unfollow-error",{entity:(0,Q.C_)(ue)})),[3,3];case 3:return[2]}}))}))}),[ae,Je,Be]),yt=(0,u.useMemo)((function(){return{isFollowing:null==Ye?void 0:Ye.some((function(e){return e.id===ae}))}}),[Ye,ae]).isFollowing,ht=(0,u.useCallback)((function(){return(0,i.mG)(t,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return yt?[4,mt()]:[3,2];case 1:return e.sent(),[3,4];case 2:return[4,pt()];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))}),[yt,mt,pt]),Mt=(0,u.useCallback)((function(){Ze&&ne.push((0,j.h4)(k.py.SEARCH_INDEX,B,Ze+""))}),[Ze]),gt=(0,u.useCallback)((function(e,t){return e?dt(t):ne.push("/")}),[]),ft=(0,u.useCallback)((function(e){var t=e;de((function(e){return(0,i.pi)((0,i.pi)({},null!=e?e:t),{version:t.version})}))}),[]);return(0,u.useEffect)((function(){B&&Ke(B)}),[B]),(0,u.useEffect)((function(){be&&(Se(),Be())}),[B,be]),se?u.createElement(A.Z,null):be?ue?u.createElement(w.Z,{className:"bg-white",pageTitle:te("label.entity-detail-plural",{entity:te("label.search-index")}),title:te("label.entity-detail-plural",{entity:te("label.search-index")})},u.createElement(a.Z,{gutter:[0,12]},u.createElement(r.Z,{className:"p-x-lg","data-testid":"entity-page-header",span:24},u.createElement(D.U$,{isRecursiveDelete:!0,afterDeleteAction:gt,afterDomainUpdateAction:ft,dataAsset:ue,entityType:k.py.SEARCH_INDEX,permissions:we,onDisplayNameUpdate:function(e){return(0,i.mG)(t,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return ue?(t=(0,i.pi)((0,i.pi)({},ue),{displayName:e.displayName}),[4,et(t,"displayName")]):[2];case 1:return n.sent(),[2]}}))}))},onFollowClick:ht,onOwnerUpdate:tt,onRestoreDataAsset:function(){return(0,i.mG)(t,void 0,void 0,(function(){var e,t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,Y.v8)(Je)];case 1:return e=n.sent().version,(0,H.XA)(te("message.restore-entities-success",{entity:te("label.search-index")}),2e3),dt(e),[3,3];case 2:return t=n.sent(),(0,H.Eo)(t,te("message.restore-entities-error",{entity:te("label.search-index")})),[3,3];case 3:return[2]}}))}))},onTierUpdate:ut,onUpdateVote:function(e,n){return(0,i.mG)(t,void 0,void 0,(function(){var t,a;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,(0,Y.HG)(n,e)];case 1:return i.sent(),[4,(0,Y.h$)(B,G.he)];case 2:return t=i.sent(),de(t),[3,4];case 3:return a=i.sent(),(0,H.Eo)(a),[3,4];case 4:return[2]}}))}))},onVersionClick:Mt})),u.createElement(r.Z,{span:24},u.createElement(s.Z,{destroyInactiveTabPane:!0,activeKey:null!=ee?ee:k.M8.FIELDS,className:"entity-details-page-tabs","data-testid":"tabs",items:ot,onChange:function(e){e!==ee&&ne.push((0,G.$n)(B,e))}})),Ee?u.createElement(h.Z,{createThread:function(e){return(0,i.mG)(t,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,R.Kl)(e)];case 1:return n.sent(),Be(),[3,3];case 2:return t=n.sent(),(0,H.Eo)(t,te("server.create-entity-error",{entity:te("label.conversation")})),[3,3];case 3:return[2]}}))}))},deletePostHandler:X,open:Boolean(Ee),postFeedHandler:q,threadLink:Ee,threadType:Ie,updateThreadHandler:W,onCancel:function(){Ne("")}}):null)):u.createElement(E.Z,{className:"m-0"}):u.createElement(E.Z,{type:O.Wx.PERMISSION})}}}]);