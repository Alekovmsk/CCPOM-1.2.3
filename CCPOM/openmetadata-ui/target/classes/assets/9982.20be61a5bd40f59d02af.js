"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[9982],{69982:function(e,t,a){a.r(t),a.d(t,{default:function(){return A}});var l=a(70655),n=a(67294),r=a(68432),i=a(15137),s=a(49101),d=a(49409),c=a(56256),o=a(71577),u=a(19650),m=a(50963),y=a(96486),p=a(16139),v=a(17309),b=a(79690),f=a(95137),E=a(79686),h=a(26387),w=function(e){var t=e.header,a=e.allowAccess,i=void 0===a||a,w=e.isLoading,g=e.slashedBreadcrumb,k=e.onCancel,T=e.onSave,C=(0,r.$)().t,N=(0,l.CR)((0,m.useForm)(),1)[0],Z=(0,f.Eu)().currentUser,x=(d.Z.useWatch("owner",N),d.Z.useWatch("reviewers",N),n.createElement("div",{"data-testid":"right-panel"},n.createElement(c.Z.Title,{level:5},C("label.configure-entity",{entity:C("label.knowledge-center")})),n.createElement(c.Z.Text,{className:"mb-5"},C("message.create-new-knowledge-center-guide")))),L=[{name:"name",id:"root/name",label:C("label.name"),required:!0,placeholder:C("label.name"),type:v.U.TEXT,props:{"data-testid":"name"},rules:[{pattern:p.$Q,message:C("message.entity-name-validation")},{min:1,max:128,message:""+C("message.entity-maximum-size",{entity:""+C("label.name"),max:"128"})}]},{name:"displayName",id:"root/displayName",label:C("label.display-name"),required:!1,placeholder:C("label.display-name"),type:v.U.TEXT,props:{"data-testid":"display-name"}},{name:"mutuallyExclusive",label:C("label.mutually-exclusive"),type:v.U.SWITCH,required:!1,props:{"data-testid":"mutually-exclusive-button"},id:"root/mutuallyExclusive",formItemLayout:v.E.HORIZONATAL}];return C("label.owner"),v.U.USER_TEAM_SELECT,n.createElement(o.Z,{"data-testid":"add-owner",icon:n.createElement(s.Z,{style:{color:"white",fontSize:"12px"}}),size:"small",type:"primary"}),v.E.HORIZONATAL,C("label.reviewer-plural"),v.U.USER_MULTI_SELECT,n.createElement(o.Z,{"data-testid":"add-reviewers",icon:n.createElement(s.Z,{style:{color:"white",fontSize:"12px"}}),size:"small",type:"primary"}),v.E.HORIZONATAL,n.createElement(E.Z,{firstPanel:{children:n.createElement("div",{className:"max-width-md w-9/10 service-form-container"},n.createElement(h.Z,{titleLinks:g}),n.createElement(c.Z.Title,{className:"m-t-md","data-testid":"form-heading",level:5},t),n.createElement("div",{className:"add-knowledgeCenter","data-testid":"add-knowledgeCenter"},n.createElement(d.Z,{form:N,layout:"vertical",onFinish:function(e){var t=e.name,a=e.displayName,l=e.description,n=void 0===l?"":l,r=e.tags,i=e.mutuallyExclusive,s=e.reviewers,d=void 0===s?[]:s,c=e.owner,o=null!=c?c:{id:null==Z?void 0:Z.id,type:"user"},u={name:t.trim(),displayName:null==a?void 0:a.trim(),description:n,reviewers:d.map((function(e){return(0,y.toString)(e.fullyQualifiedName)})).filter(Boolean),owner:o,tags:r||[],mutuallyExclusive:Boolean(i)};T(u)}},(0,b.GL)(L),n.createElement(u.Z,{className:"w-full justify-end","data-testid":"cta-buttons",size:16},n.createElement(o.Z,{"data-testid":"cancel-knowledgeCenter",type:"link",onClick:k},C("label.cancel")),n.createElement(o.Z,{"data-testid":"save-knowledgeCenter",disabled:!i,htmlType:"submit",loading:w,type:"primary"},C("label.save")))))),minWidth:700,flex:.7},pageTitle:C("label.add-entity",{entity:C("label.knowledge-center")}),secondPanel:{children:x,className:"p-md service-doc-panel",minWidth:60,overlay:{displayThreshold:200,header:C("label.setup-guide"),rotation:"counter-clockwise"}}})},g=a(8752),k=a(79839),T=a(62761),C=a(72819),N=a(18460),Z=a(93895),x=a(39570),L=a(96840),S=a(73553),R=a(46321),A=function(){var e=(0,i.k6)(),t=(0,g.BL)().permissions,a=(0,l.CR)((0,n.useState)([]),2),s=a[0],d=a[1],c=(0,l.CR)((0,n.useState)(!1),2),o=c[0],u=c[1],m=(0,l.CR)((0,n.useState)(!1),2),y=m[0],p=m[1],v=(0,l.CR)((0,n.useState)([]),2),b=v[0],f=v[1],E=(0,r.$)().t,h=(0,n.useMemo)((function(){return(0,x.P_)(C.OX.Create,k.A.KNOWLEDGE_CENTER,t)}),[t]),A=function(t){void 0===t&&(t=""),e.push((0,L.Ky)(t))},U=(0,n.useCallback)((function(){A()}),[]),O=(0,n.useCallback)((function(e){return(0,l.mG)(void 0,void 0,void 0,(function(){var t,a,n;return(0,l.Jh)(this,(function(l){switch(l.label){case 0:p(!0),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,(0,N.Vc)(e)];case 2:return t=l.sent(),A(null!==(n=t.fullyQualifiedName)&&void 0!==n?n:""),[3,5];case 3:return a=l.sent(),r=(0,Z.B)(a,T.c9.alreadyExist)?E("server.entity-already-exist",{entity:E("label.knowledge-center"),entityPlural:E("label.knowledge-center-lowercase-plural"),name:e.name}):a,i=E("server.add-entity-error",{entity:E("label.knowledge-center-lowercase")}),(0,R.Eo)(r,i),[3,5];case 4:return p(!1),[7];case 5:return[2]}var r,i}))}))}),[]);return(0,n.useEffect)((function(){f([{name:E("label.knowledge-center"),url:(0,L.Ky)()},{name:E("label.add-entity",{entity:E("label.knowledge-center")}),url:"",activeTitle:!0}])}),[]),n.createElement("div",{className:"self-center"},n.createElement(w,{allowAccess:h,fetchTags:function(){u(!0),(0,S.bn)().then((function(e){return(0,l.mG)(void 0,void 0,void 0,(function(){var t;return(0,l.Jh)(this,(function(a){switch(a.label){case 0:return e.data?[4,(0,S.bM)(e.data)]:[3,2];case 1:return t=a.sent(),d(t),[3,3];case 2:(0,R.Eo)(E("server.entity-fetch-error",{entity:E("label.tag-plural")})),a.label=3;case 3:return[2]}}))}))})).catch((function(e){(0,R.Eo)(e,E("server.entity-fetch-error",{entity:E("label.tag-plural")}))})).finally((function(){u(!1)}))},header:E("label.add-entity",{entity:E("label.knowledge-center")}),isLoading:y,isTagLoading:o,slashedBreadcrumb:b,tagList:s,onCancel:U,onSave:O}))}}}]);